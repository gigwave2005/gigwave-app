/*! For license information please see main.4c12aaf3.js.LICENSE.txt */
(()=>{var e={43(e,t,n){"use strict";e.exports=n(202)},151(e,t){!function(e){"use strict";var t="0123456789bcdefghjkmnpqrstuvwxyz",n=40007860,r=110574,i=6378137,s=.00669447819799;function a(e){return Math.log(e)/Math.log(2)}function o(e){var t;if(Array.isArray(e))if(2!==e.length)t="expected array of length 2, got length "+e.length;else{var n=e[0],r=e[1];"number"!=typeof n||isNaN(n)?t="latitude must be a number":n<-90||n>90?t="latitude must be within the range [-90, 90]":"number"!=typeof r||isNaN(r)?t="longitude must be a number":(r<-180||r>180)&&(t="longitude must be within the range [-180, 180]")}else t="location must be an array";if(void 0!==t)throw new Error("Invalid GeoFire location '"+e+"': "+t)}function l(e){var n;if("string"!=typeof e)n="geohash must be a string";else if(0===e.length)n="geohash cannot be the empty string";else for(var r=0,i=e;r<i.length;r++){var s=i[r];-1===t.indexOf(s)&&(n="geohash cannot contain '"+s+"'")}if(void 0!==n)throw new Error("Invalid GeoFire geohash '"+e+"': "+n)}function c(e){if("number"!=typeof e||isNaN(e))throw new Error("Error: degrees must be a number");return e*Math.PI/180}function u(e,n){if(void 0===n&&(n=10),o(e),void 0!==n){if("number"!=typeof n||isNaN(n))throw new Error("precision must be a number");if(n<=0)throw new Error("precision must be greater than 0");if(n>22)throw new Error("precision cannot be greater than 22");if(Math.round(n)!==n)throw new Error("precision must be an integer")}for(var r={min:-90,max:90},i={min:-180,max:180},s="",a=0,l=0,c=1;s.length<n;){var u=c?e[1]:e[0],d=c?i:r,h=(d.min+d.max)/2;u>h?(a=1+(a<<1),d.min=h):(a=0+(a<<1),d.max=h),c=!c,l<4?l++:(l=0,s+=t[a],a=0)}return s}function d(e,t){var n=c(t),r=Math.cos(n)*i*Math.PI/180*(1/Math.sqrt(1-s*Math.sin(n)*Math.sin(n)));return r<1e-12?e>0?360:0:Math.min(360,e/r)}function h(e,t){var n=d(e,t);return Math.abs(n)>1e-6?Math.max(1,a(360/n)):1}function f(e){return Math.min(a(20003930/e),110)}function g(e){if(e<=180&&e>=-180)return e;var t=e+180;return t>0?t%360-180:180- -t%360}function p(e,t){var n=t/r,i=Math.min(90,e[0]+n),s=Math.max(-90,e[0]-n),a=2*Math.floor(f(t)),o=2*Math.floor(h(t,i))-1,l=2*Math.floor(h(t,s))-1;return Math.min(a,o,l,110)}function m(e,t){var n=t/r,i=Math.min(90,e[0]+n),s=Math.max(-90,e[0]-n),a=d(t,i),o=d(t,s),l=Math.max(a,o);return[[e[0],e[1]],[e[0],g(e[1]-l)],[e[0],g(e[1]+l)],[i,e[1]],[i,g(e[1]-l)],[i,g(e[1]+l)],[s,e[1]],[s,g(e[1]-l)],[s,g(e[1]+l)]]}function v(e,n){l(e);var r=Math.ceil(n/5);if(e.length<r)return[e,e+"~"];var i=(e=e.substring(0,r)).substring(0,e.length-1),s=t.indexOf(e.charAt(e.length-1)),a=5-(n-5*i.length),o=s>>a<<a,c=o+(1<<a);return c>31?[i+t[o],i+"~"]:[i+t[o],i+t[c]]}e.BASE32=t,e.BITS_PER_CHAR=5,e.E2=s,e.EARTH_EQ_RADIUS=i,e.EARTH_MERI_CIRCUMFERENCE=n,e.EPSILON=1e-12,e.GEOHASH_PRECISION=10,e.MAXIMUM_BITS_PRECISION=110,e.METERS_PER_DEGREE_LATITUDE=r,e.boundingBoxBits=p,e.boundingBoxCoordinates=m,e.degreesToRadians=c,e.distanceBetween=function(e,t){o(e),o(t);var n=c(t[0]-e[0]),r=c(t[1]-e[1]),i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(c(e[0]))*Math.cos(c(t[0]))*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.geohashForLocation=u,e.geohashQuery=v,e.geohashQueryBounds=function(e,t){o(e);var n=Math.max(1,p(e,t)),r=Math.ceil(n/5),i=m(e,t).map(function(e){return v(u(e,r),n)});return i.filter(function(e,t){return!i.some(function(n,r){return t>r&&e[0]===n[0]&&e[1]===n[1]})})},e.latitudeBitsForResolution=f,e.longitudeBitsForResolution=h,e.metersToLongitudeDegrees=d,e.validateGeohash=l,e.validateKey=function(e){var t;if("string"!=typeof e?t="key must be a string":0===e.length?t="key cannot be the empty string":11+e.length>755?t="key is too long to be stored in Firebase":/[\[\].#$\/\u0000-\u001F\u007F]/.test(e)&&(t="key cannot contain any of the following characters: . # $ ] [ /"),void 0!==t)throw new Error("Invalid GeoFire key '"+e+"': "+t)},e.validateLocation=o,e.wrapLongitude=g,Object.defineProperty(e,"__esModule",{value:!0})}(t)},153(e,t,n){"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,p(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,N=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+I(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(a,t,i,"",function(e){return e})):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+I(o=e[c],c);l+=C(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,i,u=s+I(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,p=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!p)if(null!==r(c))p=!0,R(N);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function N(e,n){p=!1,m&&(m=!1,y(_),_=-1),g=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,k=null,_=-1,T=5,I=-1;function C(){return!(t.unstable_now()-I<T)}function j(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?S():(E=!1,k=null)}}else E=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=j,S=function(){P.postMessage(null)}}else S=function(){v(j,0)};function R(e){k=e,E||(E=!0,S())}function D(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(y(_),_=-1):m=!0,D(x,s-a))):(e.sortIndex=o,n(c,e),p||g||(p=!0,R(N))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391(e,t,n){"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579(e,t,n){"use strict";e.exports=n(153)},730(e,t,n){"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function p(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(g,e)||!d.call(f,e)&&(h.test(e)?g[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),N=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case N:return"Portal";case k:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){ge.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Se=null,Ee=null;function ke(e){if(e=bi(e)){if("function"!==typeof Ne)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ne(e.stateNode,e.type,t))}}function _e(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Ce(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ie(e,t,n)}finally{je=!1,(null!==Se||null!==Ee)&&(Ce(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(qe(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ge(i),e;if(a===r)return Ge(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Nt,St,Et,kt,_t=!1,Tt=[],It=null,Ct=null,jt=null,At=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void kt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){_t=!1,null!==It&&Ft(It)&&(It=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Ct&&zt(Ct,e),null!==jt&&zt(jt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Bt=w.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Ht(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Kt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=xe(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),gn=sn(fn),pn=sn(M({},fn,{dataTransfer:0})),mn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function kn(){return En}var _n=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(_n),In=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(An),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Dn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){_e(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Qn(e){Fr(e,0)}function Yn(e){if(K(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,xe(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Er={};function kr(e){if(Sr[e])return Sr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var _r=kr("animationend"),Tr=kr("animationiteration"),Ir=kr("animationstart"),Cr=kr("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){jr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Dr=Ar[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(_r,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=s,i=xe(n),a=[];e:{var o=jr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case _r:case Tr:case Ir:l=vn;break;case Cr:l=jn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,g=r;null!==g;){var p=(f=g).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Pe(g,h))&&u.push(Wr(g,p,f)))),d)break;g=g.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[gi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,p="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,p="onPointerLeave",h="onPointerEnter",g="pointer"),d=null==l?o:wi(l),f=null==c?o:wi(c),(o=new u(p,g+"leave",l,n,i)).target=d,o.relatedTarget=f,p=null,yi(i)===r&&((u=new u(h,g+"enter",c,n,i)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,g=0,f=u=l;f;f=Kr(f))g++;for(f=0,p=h;p;p=Kr(p))f++;for(;0<g-f;)u=Kr(u),g--;for(;0<f-g;)h=Kr(h),f--;for(;g--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Jn;else if(Gn(o))if(Xn)m=ar;else{m=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sr);switch(m&&(m=m(e,r))?Wn(a,m,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?wi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(v=Hr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,s))&&a.unshift(Wr(n,l,o)):i||null!=(l=Pe(n,s))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,gi="__reactContainer$"+di,pi="__reactEvents$"+di,mi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Ni=[],Si=-1;function Ei(e){return{current:e}}function ki(e){0>Si||(e.current=Ni[Si],Ni[Si]=null,Si--)}function _i(e,t){Si++,Ni[Si]=e.current,e.current=t}var Ti={},Ii=Ei(Ti),Ci=Ei(!1),ji=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){ki(Ci),ki(Ii)}function Di(e,t,n){if(Ii.current!==Ti)throw Error(s(168));_i(Ii,t),_i(Ci,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,ji=Ii.current,_i(Ii,e),_i(Ci,Ci.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,ji),r.__reactInternalMemoizedMergedChildContext=e,ki(Ci),ki(Ii),_i(Ii,e)):ki(Ci),_i(Ci,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,qi),i}finally{bt=t,Vi=!1}}return null}var Bi=[],Gi=0,Wi=null,Hi=0,Ki=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){Bi[Gi++]=Hi,Bi[Gi++]=Wi,Wi=e,Hi=t}function Zi(e,t,n){Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=Bi[--Gi],Bi[Gi]=null,Hi=Bi[--Gi],Bi[Gi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var ps=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case N:return(t=Mc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Dc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case N:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return g(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function p(i,s,o,l){for(var c=null,u=null,d=s,p=s=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var v=f(i,d,o[p],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,p),null===u?c=v:u.sibling=v,u=v,d=m}if(p===o.length)return n(i,d),is&&$i(i,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(s=a(d,s,p),null===u?c=d:u.sibling=d,u=d);return is&&$i(i,p),c}for(d=r(i,d);p<o.length;p++)null!==(m=g(d,i,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),s=a(m,s,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),is&&$i(i,p),c}function m(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,p=o,m=o=0,v=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(v=p,p=null):v=p.sibling;var b=f(i,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(i,p),o=a(b,o,m),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(i,p),is&&$i(i,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return is&&$i(i,m),u}for(p=r(i,p);!y.done;m++,y=l.next())null!==(y=g(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),is&&$i(i,m),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=ms(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((s=Dc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=ms(r,s,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Mc(a,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return p(r,s,a,l);if(O(a))return m(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Lc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),Ns=Ei(null),Ss=null,Es=null,ks=null;function _s(){ks=Es=Ss=null}function Ts(e){var t=Ns.current;ki(Ns),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t){Ss=e,ks=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function js(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=e,Ss.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var As=null;function Ps(e){null===As?As=[e]:As.push(e)}function Rs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(g=p.payload)){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=p.payload)?g.call(f,d,h):g)||void 0===h)break e;d=M({},d,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Ws=Ei(Gs),Hs=Ei(Gs),Ks=Ei(Gs);function Qs(e){if(e===Gs)throw Error(s(174));return e}function Ys(e,t){switch(_i(Ks,t),_i(Hs,e),_i(Ws,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Ws),_i(Ws,t)}function Js(){ki(Ws),ki(Hs),ki(Ks)}function Xs(e){Qs(Ks.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(_i(Hs,e),_i(Ws,n))}function $s(e){Hs.current===e&&(ki(Ws),ki(Hs))}var Zs=Ei(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ma(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Sa(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Oa(_a.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,ja(9,ka.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(s(349));0!==(30&sa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ia(e)}function _a(e,t,n){return n(function(){Ta(t)&&Ia(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ia(e){var t=Ds(e,1);null!==t&&tc(t,e,1,-1)}function Ca(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return ya().memoizedState}function Pa(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=ja(t,n,s,r))}aa.flags|=e,i.memoizedState=ja(1|t,n,s,r)}function Da(e,t){return Pa(8390656,8,e,t)}function Oa(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function Ma(e,t){return Ra(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Fa.bind(null,t,e),n)}function Va(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),aa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Wa(){return ya().memoizedState}function Ha(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ya(t,n);else if(null!==(n=Rs(e,t,n,r))){tc(n,e,r,Zl()),Ja(n,t,r)}}function Ka(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Rs(e,t,i,r))&&(tc(n,e,r,i=Zl()),Ja(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:js,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:js,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:js,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ha.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ca,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ca(!1),t=e[0];return e=Ga.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&sa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(_a.bind(null,r,a,e),[e]),r.flags|=2048,ja(9,ka.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:js,useCallback:za,useContext:js,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:wa,useRef:Aa,useState:function(){return wa(ba)},useDebugValue:Va,useDeferredValue:function(e){return Ba(ya(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:Na,useSyncExternalStore:Sa,useId:Wa,unstable_isNewReconciler:!1},eo={readContext:js,useCallback:za,useContext:js,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:xa,useRef:Aa,useState:function(){return xa(ba)},useDebugValue:Va,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:Na,useSyncExternalStore:Sa,useId:Wa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=ec(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(tc(t,e,r,n),Vs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=js(s):(i=Pi(t)?ji:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=js(s):(s=Pi(t)?ji:Ii.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),qs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bl||(Bl=!0,Gl=r),uo(0,t)},n}function go(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Cs(t,i),r=pa(e,t,n,r,s,i),n=ma(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i))}function No(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ac(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Bo(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Bo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return _o(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Pl,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Pl,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,_i(Pl,Al),Al|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_i(Pl,Al),Al|=r;return wo(e,t,i,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,n,r,i){var s=Pi(n)?ji:Ii.current;return s=Ai(t,s),Cs(t,i),n=pa(e,t,n,r,s,i),r=ma(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i))}function To(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Cs(t,i),null===t.stateNode)qo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=js(c):c=Ai(t,c=Pi(n)?ji:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Os=!1;var h=t.memoizedState;a.state=h,qs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ci.current||Os?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Os||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=js(l):l=Ai(t,l=Pi(n)?ji:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Os=!1,h=t.memoizedState,a.state=h,qs(t,r,a,i);var g=t.memoizedState;o!==d||h!==g||Ci.current||Os?("function"===typeof f&&(no(t,n,f,r),g=t.memoizedState),(c=Os||io(t,n,c,r,h,g,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,g,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,g,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){ko(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Bo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function jo(e,t,n,r,i){return fs(),gs(i),t.flags|=256,wo(e,t,n,r),t.child}var Ao,Po,Ro,Do={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_i(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,i,0,null),e=Dc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Do,e):Mo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(a=Dc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Do,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Il)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),tc(r,e,i,-1))}return gc(),Fo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=Mo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,i}return e=(o=e.child).sibling,i=Pc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Mo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&gs(r),ws(t,e.child,null,n),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Vo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ho(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Wo(t),null;case 3:return r=t.stateNode,Js(),ki(Ci),ki(Ii),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sc(ss),ss=null))),Wo(t),null;case 5:$s(t);var i=Qs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Qs(Ws.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ao(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Ro(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ks.current),Qs(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(ki(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(sc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Js(),null===e&&qr(t.stateNode.containerInfo),Wo(t),null;case 10:return Ts(t.type._context),Wo(t),null;case 19:if(ki(Zs),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>zl&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*Xe()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,_i(Zs,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),ki(Ci),ki(Ii),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(ki(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(Zs),null;case 4:return Js(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Yo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function Zo(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Zo(t,n,s)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[pi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Yo||$o(n,t);case 6:var r=cl,i=ul;cl=null,dl(e,t,n),ul=i,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&Zo(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Yo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,dl(e,t,n),Yo=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));hl(a,o,i),cl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),ml(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(m){Sc(e,e.return,m)}try{tl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),ml(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(gl(t,e),ml(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;null!=g?ne(i,!!a.multiple,g,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),ml(e);break;case 13:gl(t,e),ml(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,gl(t,e),Yo=u):gl(t,e),ml(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(g=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:$o(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:$o(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==g?(g.return=f,Xo=g):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),ml(e),4&r&&fl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ll(e,al(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ol(e,al(e),a);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var i=Xo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Qo;var c=Yo;if(Qo=a,(Yo=l)&&!c)for(Xo=i;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?xl(i):null!==l?(l.return=a,Xo=l):xl(i);for(;null!==s;)Xo=s,yl(s,t,n),s=s.sibling;Xo=i,Qo=o,Yo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xo=s):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&rl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{rl(t)}catch(l){Sc(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var Nl,Sl=Math.ceil,El=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,_l=w.ReactCurrentBatchConfig,Tl=0,Il=null,Cl=null,jl=0,Al=0,Pl=Ei(0),Rl=0,Dl=null,Ol=0,Ll=0,Ml=0,Fl=null,Ul=null,Vl=0,zl=1/0,ql=null,Bl=!1,Gl=null,Wl=null,Hl=!1,Kl=null,Ql=0,Yl=0,Jl=null,Xl=-1,$l=0;function Zl(){return 0!==(6&Tl)?Xe():-1!==Xl?Xl:Xl=Xe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==jl?jl&-jl:null!==ps.transition?(0===$l&&($l=pt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function tc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Ll|=n),4===Rl&&ac(e,jl)),nc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(zl=Xe()+500,Ui&&qi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Il?jl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(oc.bind(null,e)):zi(oc.bind(null,e)),ai(function(){0===(6&Tl)&&qi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,$l=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=pc(e,r);else{t=r;var i=Tl;Tl|=2;var a=fc();for(Il===e&&jl===t||(ql=null,zl=Xe()+500,dc(e,t));;)try{vc();break}catch(l){hc(e,l)}_s(),El.current=a,Tl=i,null!==Cl?t=0:(Il=null,jl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=gt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Dl,dc(e,0),ac(e,r),nc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=pc(e,r))&&(0!==(a=gt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Dl,dc(e,0),ac(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,ql),t);break}wc(e,Ul,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,ql),r);break}wc(e,Ul,ql);break;default:throw Error(s(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=pc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Ml,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function oc(e){if(0!==(6&Tl))throw Error(s(327));xc();var t=ht(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=pc(e,t);if(0!==e.tag&&2===n){var r=gt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Dl,dc(e,0),ac(e,t),nc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,ql),nc(e,Xe()),null}function lc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(zl=Xe()+500,Ui&&qi())}}function cc(e){null!==Kl&&0===Kl.tag&&0===(6&Tl)&&xc();var t=Tl;Tl|=1;var n=_l.transition,r=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=r,_l.transition=n,0===(6&(Tl=t))&&qi()}}function uc(){Al=Pl.current,ki(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:Js(),ki(Ci),ki(Ii),na();break;case 5:$s(r);break;case 4:Js();break;case 13:case 19:ki(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Il=e,Cl=e=Pc(e.current,null),jl=Al=t,Rl=0,Dl=null,Ml=Ll=Ol=0,Ul=Fl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}As=null}return e}function hc(e,t){for(;;){var n=Cl;try{if(_s(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,kl.current=null,null===n||null===n.return){Rl=1,Dl=t,Cl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=mo(o);if(null!==g){g.flags&=-257,vo(g,o,l,0,t),1&g.mode&&po(a,u,t),c=u;var p=(t=g).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){po(a,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),gs(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,go(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(w){t=w,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function fc(){var e=El.current;return El.current=Xa,null===e?Xa:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Il||0===(268435455&Ol)&&0===(268435455&Ll)||ac(Il,jl)}function pc(e,t){var n=Tl;Tl|=2;var r=fc();for(Il===e&&jl===t||(ql=null,dc(e,t));;)try{mc();break}catch(i){hc(e,i)}if(_s(),Tl=n,El.current=r,null!==Cl)throw Error(s(261));return Il=null,jl=0,Rl}function mc(){for(;null!==Cl;)yc(Cl)}function vc(){for(;null!==Cl&&!Ye();)yc(Cl)}function yc(e){var t=Nl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?bc(e):Cl=t,kl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ho(n,t,Al)))return void(Cl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Rl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=bt,i=_l.transition;try{_l.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Kl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Il&&(Cl=Il=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Ic(tt,function(){return xc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var o=bt;bt=1;var l=Tl;Tl|=4,kl.current=null,function(e,t){if(ei=Gt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(g=h.firstChild);)f=h,h=g;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(g=h.nextSibling))break;f=(h=f).parentNode}h=g}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}p=el,el=!1}(e,n),pl(n,e),gr(ti),Gt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Je(),Tl=l,bt=o,_l.transition=a}else e.current=n;if(Hl&&(Hl=!1,Kl=e,Ql=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bl)throw Bl=!1,e=Gl,Gl=null,e;0!==(1&Ql)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,qi()}(e,t,n,r)}finally{_l.transition=i,bt=r}return null}function xc(){if(null!==Kl){var e=wt(Ql),t=_l.transition,n=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Ql=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:tl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,g=d.return;if(il(d),d===u){Xo=null;break}if(null!==f){f.return=g,Xo=f;break}Xo=g}}}var p=a.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Xo=y;break e}Xo=a.return}}var b=e.current;for(Xo=b;null!==Xo;){var w=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(N){Sc(l,l.return,N)}if(l===o){Xo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xo=x;break e}Xo=l.return}}if(Tl=i,qi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(N){}r=!0}return r}finally{bt=n,_l.transition=t}}return!1}function Nc(e,t,n){e=Us(e,t=fo(0,t=lo(n,t),1),1),t=Zl(),null!==e&&(vt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=go(t,e=lo(n,e),1),1),e=Zl(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(jl&n)===n&&(4===Rl||3===Rl&&(130023424&jl)===jl&&500>Xe()-Vl?dc(e,0):Ml|=n),nc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zl();null!==(e=Ds(e,t))&&(vt(e,t,n),nc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Ic(e,t){return Ke(e,t)}function Cc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Cc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Ac(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Dc(n.children,i,a,t);case E:o=8,i|=8;break;case k:return(e=jc(12,n,t,2|i)).elementType=k,e.lanes=a,e;case C:return(e=jc(13,n,t,i)).elementType=C,e.lanes=a,e;case j:return(e=jc(19,n,t,i)).elementType=j,e.lanes=a,e;case R:return Oc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case T:o=9;break e;case I:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Dc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Vc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,s,a,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=Vc(null),n=e.current,(s=Fs(r=Zl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,s=Zl(),a=ec(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(tc(e,i,a,s),Vs(e,i,a)),a}function Bc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Co(t),fs();break;case 5:Xs(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Ns,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(_i(Zs,1&Zs.current),null!==(e=Bo(e,t,n))?e.sibling:null);_i(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Bo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Cs(t,n),i=pa(null,t,r,e,i,n);var a=ma();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Io(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),i){case 0:t=_o(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=No(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Co(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),qs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=jo(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=jo(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Bo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),ko(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,_i(Ns,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ci.current){t=Bo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cs(t,n),r=r(i=js(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),No(e,t,r,i=to(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),qo(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Cs(t,n),so(t,r,i),oo(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function $c(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Bc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Bc(a);s.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[gi]=a.current,qr(8===e.nodeType?e.parentNode:e),cc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Bc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[gi]=l.current,qr(8===e.nodeType?e.parentNode:e),cc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Bc(a)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){qc(null,e,null,null)}),t[gi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Xe()),0===(6&Tl)&&(zl=Xe()+500,qi()))}break;case 13:cc(function(){var t=Ds(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),Wc(e,1)}},Nt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)tc(t,e,134217728,Zl());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=ec(e),n=Ds(e,t);if(null!==n)tc(n,e,t,Zl());Wc(e,t)}},Et=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ce=cc;var Zc={usingClientEntryPoint:!1,Events:[bi,wi,xi,_e,Te,lc]},eu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(tu),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,a,o),e[gi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){"use strict";e.exports=n(234)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.p="/",(()=>{"use strict";var e=n(43),t=n(391);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l=n.p+"static/media/bg-gig-collage.6e3c98f0e5074c71cff0.jpg";var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u=["color","size","strokeWidth","absoluteStrokeWidth","children"];var d=(t,n)=>{const r=(0,e.forwardRef)((r,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:d,children:h}=r,f=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,u);return(0,e.createElement)("svg",o(o({ref:i},c),{},{width:a,height:a,stroke:s,strokeWidth:d?24*Number(l)/Number(a):l,className:"lucide lucide-".concat((g=t,g.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},f),[...n.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...(Array.isArray(h)?h:[h])||[]]);var g});return r.displayName="".concat(t),r};const h=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f=d("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),g=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),p=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=d("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),v=d("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),y=d("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),b=d("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),w=d("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),x=d("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),N=d("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var S=n(579);function E(t){let{onSelect:n,placeholder:r="Type address..."}=t;const i=(0,e.useRef)(null);return(0,e.useEffect)(()=>{const e=setInterval(()=>{var t,r;if(null!==(t=window.google)&&void 0!==t&&null!==(r=t.maps)&&void 0!==r&&r.places&&i.current){clearInterval(e);const t=new window.google.maps.places.Autocomplete(i.current,{fields:["formatted_address","geometry","name"]});if(t.addListener("place_changed",()=>{const e=t.getPlace();if(null!==e&&void 0!==e&&e.geometry){const t={address:e.formatted_address,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},name:e.name};console.log("\u2705 ADDRESS CAPTURED:",t),n(t)}}),console.log("\u2705 Autocomplete ready"),!document.getElementById("pac-text-fix")){const e=document.createElement("style");e.id="pac-text-fix",e.innerHTML="\n            .pac-item,\n            .pac-item *,\n            .pac-item-query,\n            .pac-matched {\n              color: #000000 !important;\n            }\n          ",document.head.appendChild(e)}}},100);return()=>clearInterval(e)},[n]),(0,S.jsx)("input",{ref:i,type:"text",placeholder:r,style:{width:"100%",padding:"12px 16px",backgroundColor:"#2a2a2a",color:"#ffffff",border:"2px solid #00d4ff",borderRadius:"8px",fontSize:"16px",outline:"none"}})}const k=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(k(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new T;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I=function(e){return function(e){const t=k(e);return _.encodeByteArray(t,!0)}(e).replace(/\./g,"")},C=function(e){try{return _.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const j=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,A=()=>{try{return j()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyC3kQTbaNNYojEIx1jaU9p0C8K4ue7NFIs",REACT_APP_FIREBASE_APP_ID:"1:253503195277:web:c6c109ccee6fdbd9c57ac4",REACT_APP_FIREBASE_AUTH_DOMAIN:"gigwave-397a4.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"253503195277",REACT_APP_FIREBASE_PROJECT_ID:"gigwave-397a4",REACT_APP_FIREBASE_STORAGE_BUCKET:"gigwave-397a4.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&C(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},P=e=>{var t,n;return null===(n=null===(t=A())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},R=()=>{var e;return null===(e=A())||void 0===e?void 0:e.config},D=e=>{var t;return null===(t=A())||void 0===t?void 0:t["_".concat(e)]};class O{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function L(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){return!function(){var e;const t=null===(e=A())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){try{return"object"===typeof indexedDB}catch(e){return!1}}class U extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,U.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V.prototype.create)}}class V{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(z,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new U(n,s,t)}}const z=/\{\$([^}]+)}/g;function q(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(B(n)&&B(s)){if(!q(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function B(e){return null!==e&&"object"===typeof e}function G(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function W(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function H(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class K{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Q),void 0===r.error&&(r.error=Q),void 0===r.complete&&(r.complete=Q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q(){}function Y(e){return e&&e._delegate?e._delegate:e}class J{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const X="[DEFAULT]";class ${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new O;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:X})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===X?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;return this.component?this.component.multipleInstances?e:X:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Z{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ee=[];var te;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(te||(te={}));const ne={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},re=te.INFO,ie={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},se=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ie[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ae{constructor(e){this.name=e,this._logLevel=re,this._logHandler=se,this._userLogHandler=null,ee.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...t),this._logHandler(this,te.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...t),this._logHandler(this,te.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,te.INFO,...t),this._logHandler(this,te.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,te.WARN,...t),this._logHandler(this,te.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,te.ERROR,...t),this._logHandler(this,te.ERROR,...t)}}let oe,le;const ce=new WeakMap,ue=new WeakMap,de=new WeakMap,he=new WeakMap,fe=new WeakMap;let ge={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ue.get(e);if("objectStoreNames"===t)return e.objectStoreNames||de.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ve(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function pe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ye(this),n),ve(ce.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ve(e.apply(ye(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ye(this),t,...r);return de.set(s,t.sort?t.sort():[t]),ve(s)}}function me(e){return"function"===typeof e?pe(e):(e instanceof IDBTransaction&&function(e){if(ue.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});ue.set(e,t)}(e),t=e,(oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ge):e);var t}function ve(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ve(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ce.set(t,e)}).catch(()=>{}),fe.set(t,e),t}(e);if(he.has(e))return he.get(e);const t=me(e);return t!==e&&(he.set(e,t),fe.set(t,e)),t}const ye=e=>fe.get(e);const be=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],xe=new Map;function Ne(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(xe.get(t))return xe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=we.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!be.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return xe.set(t,s),s}ge=(e=>o(o({},e),{},{get:(t,n,r)=>Ne(t,n)||e.get(t,n,r),has:(t,n)=>!!Ne(t,n)||e.has(t,n)}))(ge);class Se{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Ee="@firebase/app",ke="0.10.13",_e=new ae("@firebase/app"),Te="@firebase/app-compat",Ie="@firebase/analytics-compat",Ce="@firebase/analytics",je="@firebase/app-check-compat",Ae="@firebase/app-check",Pe="@firebase/auth",Re="@firebase/auth-compat",De="@firebase/database",Oe="@firebase/data-connect",Le="@firebase/database-compat",Me="@firebase/functions",Fe="@firebase/functions-compat",Ue="@firebase/installations",Ve="@firebase/installations-compat",ze="@firebase/messaging",qe="@firebase/messaging-compat",Be="@firebase/performance",Ge="@firebase/performance-compat",We="@firebase/remote-config",He="@firebase/remote-config-compat",Ke="@firebase/storage",Qe="@firebase/storage-compat",Ye="@firebase/firestore",Je="@firebase/vertexai-preview",Xe="@firebase/firestore-compat",$e="firebase",Ze="[DEFAULT]",et={[Ee]:"fire-core",[Te]:"fire-core-compat",[Ce]:"fire-analytics",[Ie]:"fire-analytics-compat",[Ae]:"fire-app-check",[je]:"fire-app-check-compat",[Pe]:"fire-auth",[Re]:"fire-auth-compat",[De]:"fire-rtdb",[Oe]:"fire-data-connect",[Le]:"fire-rtdb-compat",[Me]:"fire-fn",[Fe]:"fire-fn-compat",[Ue]:"fire-iid",[Ve]:"fire-iid-compat",[ze]:"fire-fcm",[qe]:"fire-fcm-compat",[Be]:"fire-perf",[Ge]:"fire-perf-compat",[We]:"fire-rc",[He]:"fire-rc-compat",[Ke]:"fire-gcs",[Qe]:"fire-gcs-compat",[Ye]:"fire-fst",[Xe]:"fire-fst-compat",[Je]:"fire-vertex","fire-js":"fire-js",[$e]:"fire-js-all"},tt=new Map,nt=new Map,rt=new Map;function it(e,t){try{e.container.addComponent(t)}catch(n){_e.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function st(e){const t=e.name;if(rt.has(t))return _e.debug("There were multiple attempts to register component ".concat(t,".")),!1;rt.set(t,e);for(const n of tt.values())it(n,e);for(const n of nt.values())it(n,e);return!0}function at(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ot(e){return void 0!==e.settings}const lt=new V("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ct{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new J("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lt.create("app-deleted",{appName:this._name})}}const ut="10.14.1";function dt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ze,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw lt.create("bad-app-name",{appName:String(i)});if(n||(n=R()),!n)throw lt.create("no-options");const s=tt.get(i);if(s){if(q(n,s.options)&&q(r,s.config))return s;throw lt.create("duplicate-app",{appName:i})}const a=new Z(i);for(const l of rt.values())a.addComponent(l);const o=new ct(n,r,a);return tt.set(i,o),o}function ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;const t=tt.get(e);if(!t&&e===Ze&&R())return dt();if(!t)throw lt.create("no-app",{appName:e});return t}function ft(e,t,n){var r;let i=null!==(r=et[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _e.warn(e.join(" "))}st(new J("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const gt="firebase-heartbeat-store";let pt=null;function mt(){return pt||(pt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ve(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ve(a.result),e.oldVersion,e.newVersion,ve(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(gt)}catch(n){console.warn(n)}}}).catch(e=>{throw lt.create("idb-open",{originalErrorMessage:e.message})})),pt}async function vt(e,t){try{const n=(await mt()).transaction(gt,"readwrite"),r=n.objectStore(gt);await r.put(t,yt(e)),await n.done}catch(n){if(n instanceof U)_e.warn(n.message);else{const e=lt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});_e.warn(e.message)}}}function yt(e){return"".concat(e.name,"!").concat(e.options.appId)}class bt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){_e.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=wt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Nt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Nt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=I(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return _e.warn(t),""}}}function wt(){return(new Date).toISOString().substring(0,10)}class xt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!F()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await mt()).transaction(gt),n=await t.objectStore(gt).get(yt(e));return await t.done,n}catch(t){if(t instanceof U)_e.warn(t.message);else{const e=lt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});_e.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Nt(e){return I(JSON.stringify({version:2,heartbeats:e})).length}var St;St="",st(new J("platform-logger",e=>new Se(e),"PRIVATE")),st(new J("heartbeat",e=>new bt(e),"PRIVATE")),ft(Ee,ke,St),ft(Ee,ke,"esm2017"),ft("fire-js","");ft("firebase","10.14.1","app");var Et,kt,_t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Tt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function g(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=m(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new p(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),p=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,g(n,2*i+2*s),n[2*i+2*s+1]+=l*m,g(n,2*i+2*s+1),n[2*i+2*s+1]+=f*p,g(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,g(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,kt=Tt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Et=Tt.Integer=r}).apply("undefined"!==typeof _t?_t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var It,Ct,jt,At,Pt,Rt,Dt,Ot,Lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Mt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Lt&&Lt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function g(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function E(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _,e=>e.reset());class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function P(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=B(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),W={};function H(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[G]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[G]=null)):V(e)}}}function X(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[G])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var i=t;x(t=new R(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&q(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function ge(){}function pe(e){return e.h||(e.h=e.i())}function me(){}ge.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function be(){R.call(this,"c")}d(ye,R),d(be,R);var we={},xe=null;function Ne(){return xe=xe||new ne}function Se(e){R.call(this,we.La,e)}function Ee(e){const t=Ne();re(t,new Se(t))}function ke(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=Ne();re(t,new ke(t,e))}function Te(e,t){R.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Se,R),we.STAT_EVENT="statevent",d(ke,R),we.Ma="timingevent",d(Te,R),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ae,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,ge),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ae=new De;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=kn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,Ge(e,e.I)}function Ge(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||wn(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),cn(n)}mn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else Nn(n,11)}else if((e.K||n.g==e)&&bn(n),!g(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=En(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),Be(o)),r.g=a}else pn(r);0<n.i.length&&dn(n)}else"stop"!=c[0]&&"close"!=c[0]||Nn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Nn(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=h||7==t||Ee(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=sn(this.g);e="";var s=r.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),He(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ke(this),He(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=qe(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),vn(d),d.M=!0,_e(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),He(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?wn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(g(e[r]))continue;var n=N(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ke(this),He(this)}}}catch(Ft){}},Oe.prototype.cancel=function(){this.J=!0,Ke(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),_e(17)),Ke(this),this.s=2,He(this)):Ge(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var pt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){Nt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return Nt(e),t=_t(e,t),e.g.has(t)}function kt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ut(){this.g=new fe}function Vt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function qt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Bt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Gt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Wt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Kt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Kt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Yt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){Nt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,Et(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(qt,ge),qt.prototype.g=function(){return new Bt(this.l,this.j)},qt.prototype.i=(pt={},function(){return pt}),d(Bt,ne),(e=Bt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wt(this):Ht(this),3==this.readyState&&Gt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Wt(this))},e.Qa=function(e){this.g&&(this.response=e,Wt(this))},e.ga=function(){this.g&&Wt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Yt,ne);var Jt=/^https?$/i,Xt=["POST","PUT"];function $t(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Jt.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<rn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function nn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(zt){return null}}function an(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,e),this.cb=an("retryDelaySeedMs",1e4,e),this.Wa=an("forwardChannelMaxRetries",2,e),this.wa=an("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Ut,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),fn(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=kn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}Sn(e)}function cn(e){e.g&&(vn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(i.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function dn(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||j(),I||(T(),I=!0),C.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),fn(e,r),e.m&&e.o&&Qt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=gn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function fn(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function gn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Vt(o,e,"req"+n+"_")}catch(Ft){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||j(),I||(T(),I=!0),C.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),xn(e,e.v)),e.v++,!0)}function vn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function yn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function bn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function wn(e,t){var n=null;if(e.g==t){bn(e),vn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ne(),new Te(r,n)),dn(e)}else pn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),xn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Nn(e,5);break;case 4:Nn(e,10);break;case 3:Nn(e,6);break;default:Nn(e,2)}}function xn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function Nn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ce;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),Sn(e),un(e)}function Sn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function En(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),fn(e,r),r}function kn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Yt(new qt({eb:n})):new Yt(e.pa)).Ha(e.J),t}function _n(){}function Tn(){}function In(e,t){ne.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!g(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!g(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function Cn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jn(){be.call(this),this.status=1}function An(e){this.g=e}(e=Yt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void $t(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Xt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){$t(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Yt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=En(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=gn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Kt(s)))+"&"+t:this.m&&Qt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||Xe(this.h)||hn(this))},e.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),cn(this),yn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),mn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=_n.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Tn.prototype.g=function(e,t){return new In(e,t)},d(In,ne),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){ln(this.g)},In.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&dn(t)},In.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,In.aa.N.call(this)},d(Cn,ye),d(jn,be),d(An,_n),An.prototype.ua=function(){re(this.g,"a")},An.prototype.ta=function(e){re(this.g,new Cn(e))},An.prototype.sa=function(e){re(this.g,new jn)},An.prototype.ra=function(){re(this.g,"b")},Tn.prototype.createWebChannel=Tn.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,Ot=Mt.createWebChannelTransport=function(){return new Tn},Dt=Mt.getStatEventTarget=function(){return Ne()},Rt=Mt.Event=we,Pt=Mt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,At=Mt.ErrorCode=Pe,Re.COMPLETE="complete",jt=Mt.EventType=Re,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ct=Mt.WebChannel=me,Mt.FetchXmlHttpFactory=qt,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,It=Mt.XhrIo=Yt}).apply("undefined"!==typeof Lt?Lt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ft="@firebase/firestore";class Ut{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");let Vt="10.14.0";const zt=new ae("@firebase/firestore");function qt(){return zt.logLevel}function Bt(e){if(zt.logLevel<=te.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ht);zt.debug("Firestore (".concat(Vt,"): ").concat(e),...i)}}function Gt(e){if(zt.logLevel<=te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ht);zt.error("Firestore (".concat(Vt,"): ").concat(e),...i)}}function Wt(e){if(zt.logLevel<=te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ht);zt.warn("Firestore (".concat(Vt,"): ").concat(e),...i)}}function Ht(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Vt,") INTERNAL ASSERTION FAILED: ")+e;throw Gt(t),new Error(t)}function Qt(e,t){e||Kt()}function Yt(e,t){return e}const Jt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends U{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class $t{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class en{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ut.UNAUTHENTICATED))}shutdown(){}}class tn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nn{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qt(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $t,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $t)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qt("string"==typeof t.accessToken),new Zt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(null===e||"string"==typeof e),new Ut(e)}}class rn{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sn{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new rn(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class an{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class on{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qt(void 0===this.o);const n=e=>{null!=e.error&&Bt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Bt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Qt("string"==typeof e.token),this.R=e.token,new an(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ln(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cn{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ln(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function un(e,t){return e<t?-1:e>t?1:0}function dn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hn.fromMillis(Date.now())}static fromDate(e){return hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new hn(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new hn(0,0))}static max(){return new fn(new hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gn{constructor(e,t,n){void 0===t?t=0:t>e.length&&Kt(),void 0===n?n=e.length-t:n>e.length-t&&Kt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===gn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends gn{construct(e,t,n){return new pn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new pn(e)}static emptyPath(){return new pn([])}}const mn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends gn{construct(e,t,n){return new vn(e,t,n)}static isValidIdentifier(e){return mn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xt(Jt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xt(Jt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xt(Jt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}class yn{constructor(e){this.path=e}static fromPath(e){return new yn(pn.fromString(e))}static fromName(e){return new yn(pn.fromString(e).popFirst(5))}static empty(){return new yn(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yn(new pn(e.slice()))}}class bn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}bn.UNKNOWN_ID=-1;function wn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fn.fromTimestamp(1e9===r?new hn(n+1,0):new hn(n,r));return new Nn(i,yn.empty(),t)}function xn(e){return new Nn(e.readTime,e.key,-1)}class Nn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Nn(fn.min(),yn.empty(),-1)}static max(){return new Nn(fn.max(),yn.empty(),-1)}}function Sn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=yn.comparator(e.documentKey,t.documentKey),0!==n?n:un(e.largestBatchId,t.largestBatchId))}const En="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function _n(e){if(e.code!==Jt.FAILED_PRECONDITION||e.message!==En)throw e;Bt("LocalStore","Unexpectedly lost primary lease")}class Tn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Tn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Tn?t:Tn.resolve(t)}catch(e){return Tn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Tn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Tn.reject(t)}static resolve(e){return new Tn((t,n)=>{t(e)})}static reject(e){return new Tn((t,n)=>{n(e)})}static waitFor(e){return new Tn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Tn.resolve(!1);for(const n of e)t=t.next(e=>e?Tn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Tn((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Tn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function In(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cn(e){return"IndexedDbTransactionError"===e.name}class jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function An(e){return null==e}function Pn(e){return 0===e&&1/e==-1/0}function Rn(e){return"number"==typeof e&&Number.isInteger(e)&&!Pn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}jn.oe=-1;const Dn=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],On=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ln=On,Mn=[...Ln,"indexConfiguration","indexState","indexEntries"];function Fn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Un(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class zn{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qn(this.root,e,this.comparator,!1)}getReverseIterator(){return new qn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qn(this.root,e,this.comparator,!0)}}class qn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Bn.RED,this.left=null!=r?r:Bn.EMPTY,this.right=null!=i?i:Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Bn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Bn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Kt();if(this.right.isRed())throw Kt();const e=this.left.check();if(e!==this.right.check())throw Kt();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1,Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Kt()}get value(){throw Kt()}get color(){throw Kt()}get left(){throw Kt()}get right(){throw Kt()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(e){this.comparator=e,this.data=new zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wn(this.data.getIterator())}getIteratorFrom(e){return new Wn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Gn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gn(this.comparator);return t.data=e,t}}class Wn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Gn(vn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Kn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Kn("Invalid base64 string: "+e):e}}(e);return new Qn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const Yn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(e){if(Qt(!!e),"string"==typeof e){let t=0;const n=Yn.exec(e);if(Qt(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xn(e.seconds),nanos:Xn(e.nanos)}}function Xn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $n(e){return"string"==typeof e?Qn.fromBase64String(e):Qn.fromUint8Array(e)}function Zn(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function er(e){const t=e.mapValue.fields.__previous_value__;return Zn(t)?er(t):t}function tr(e){const t=Jn(e.mapValue.fields.__local_write_time__.timestampValue);return new hn(t.seconds,t.nanos)}class nr{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class rr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rr&&e.projectId===this.projectId&&e.database===this.database}}const ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zn(e)?4:xr(e)?9007199254740991:br(e)?10:11:Kt()}function ar(e,t){if(e===t)return!0;const n=sr(e);if(n!==sr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tr(e).isEqual(tr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Jn(e.timestampValue),r=Jn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $n(e.bytesValue).isEqual($n(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xn(e.geoPointValue.latitude)===Xn(t.geoPointValue.latitude)&&Xn(e.geoPointValue.longitude)===Xn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xn(e.integerValue)===Xn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Xn(e.doubleValue),r=Xn(t.doubleValue);return n===r?Pn(n)===Pn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dn(e.arrayValue.values||[],t.arrayValue.values||[],ar);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fn(n)!==Fn(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ar(n[i],r[i])))return!1;return!0}(e,t);default:return Kt()}}function or(e,t){return void 0!==(e.values||[]).find(e=>ar(e,t))}function lr(e,t){if(e===t)return 0;const n=sr(e),r=sr(t);if(n!==r)return un(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return un(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Xn(e.integerValue||e.doubleValue),r=Xn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return cr(e.timestampValue,t.timestampValue);case 4:return cr(tr(e),tr(t));case 5:return un(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$n(e),r=$n(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=un(n[i],r[i]);if(0!==e)return e}return un(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=un(Xn(e.latitude),Xn(t.latitude));return 0!==n?n:un(Xn(e.longitude),Xn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ur(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=un((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:ur(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ir.mapValue&&t===ir.mapValue)return 0;if(e===ir.mapValue)return 1;if(t===ir.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=un(r[a],s[a]);if(0!==e)return e;const t=lr(n[r[a]],i[s[a]]);if(0!==t)return t}return un(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Kt()}}function cr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return un(e,t);const n=Jn(e),r=Jn(t),i=un(n.seconds,r.seconds);return 0!==i?i:un(n.nanos,r.nanos)}function ur(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=lr(n[i],r[i]);if(e)return e}return un(n.length,r.length)}function dr(e){return hr(e)}function hr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Jn(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $n(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return yn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=hr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(hr(e.fields[i]));return n+"}"}(e.mapValue):Kt()}function fr(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function gr(e){return!!e&&"integerValue"in e}function pr(e){return!!e&&"arrayValue"in e}function mr(e){return!!e&&"nullValue"in e}function vr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yr(e){return!!e&&"mapValue"in e}function br(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Un(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=wr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=wr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xr(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wr(t)}setAll(e){let t=vn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=wr(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());yr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Un(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Nr(wr(this.value))}}function Sr(e){const t=[];return Un(e.fields,(e,n)=>{const r=new vn([e]);if(yr(n)){const e=Sr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Hn(t)}class Er{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Er(e,0,fn.min(),fn.min(),fn.min(),Nr.empty(),0)}static newFoundDocument(e,t,n,r){return new Er(e,1,t,fn.min(),n,r,0)}static newNoDocument(e,t){return new Er(e,2,t,fn.min(),fn.min(),Nr.empty(),0)}static newUnknownDocument(e,t){return new Er(e,3,t,fn.min(),fn.min(),Nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class kr{constructor(e,t){this.position=e,this.inclusive=t}}function _r(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?yn.comparator(yn.fromName(a.referenceValue),n.key):lr(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Tr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ar(e.position[n],t.position[n]))return!1;return!0}class Ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Cr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class jr{}class Ar extends jr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ur(e,t,n):"array-contains"===t?new Br(e,n):"in"===t?new Gr(e,n):"not-in"===t?new Wr(e,n):"array-contains-any"===t?new Hr(e,n):new Ar(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Vr(e,n):new zr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lr(t,this.value)):null!==t&&sr(this.value)===sr(t)&&this.matchesComparison(lr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends jr{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Pr(e,t)}matches(e){return Rr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rr(e){return"and"===e.op}function Dr(e){return Or(e)&&Rr(e)}function Or(e){for(const t of e.filters)if(t instanceof Pr)return!1;return!0}function Lr(e){if(e instanceof Ar)return e.field.canonicalString()+e.op.toString()+dr(e.value);if(Dr(e))return e.filters.map(e=>Lr(e)).join(",");{const t=e.filters.map(e=>Lr(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Mr(e,t){return e instanceof Ar?function(e,t){return t instanceof Ar&&e.op===t.op&&e.field.isEqual(t.field)&&ar(e.value,t.value)}(e,t):e instanceof Pr?function(e,t){return t instanceof Pr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Mr(n,t.filters[r]),!0)}(e,t):void Kt()}function Fr(e){return e instanceof Ar?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(dr(e.value))}(e):e instanceof Pr?function(e){return e.op.toString()+" {"+e.getFilters().map(Fr).join(" ,")+"}"}(e):"Filter"}class Ur extends Ar{constructor(e,t,n){super(e,t,n),this.key=yn.fromName(n.referenceValue)}matches(e){const t=yn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vr extends Ar{constructor(e,t){super(e,"in",t),this.keys=qr("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zr extends Ar{constructor(e,t){super(e,"not-in",t),this.keys=qr("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>yn.fromName(e.referenceValue))}class Br extends Ar{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pr(t)&&or(t.arrayValue,this.value)}}class Gr extends Ar{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&or(this.value.arrayValue,t)}}class Wr extends Ar{constructor(e,t){super(e,"not-in",t)}matches(e){if(or(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!or(this.value.arrayValue,t)}}class Hr extends Ar{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>or(this.value.arrayValue,e))}}class Kr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Qr(e){return new Kr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Yr(e){const t=Yt(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Lr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),An(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>dr(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>dr(e)).join(",")),t.ue=e}return t.ue}function Jr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Cr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tr(e.startAt,t.startAt)&&Tr(e.endAt,t.endAt)}function Xr(e){return yn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class $r{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Zr(e,t,n,r,i,s,a,o){return new $r(e,t,n,r,i,s,a,o)}function ei(e){return new $r(e)}function ti(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ni(e){return null!==e.collectionGroup}function ri(e){const t=Yt(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Gn(vn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Ir(r,n))}),e.has(vn.keyField().canonicalString())||t.ce.push(new Ir(vn.keyField(),n))}return t.ce}function ii(e){const t=Yt(e);return t.le||(t.le=si(t,ri(e))),t.le}function si(e,t){if("F"===e.limitType)return Qr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ir(e.field,t)});const n=e.endAt?new kr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new kr(e.startAt.position,e.startAt.inclusive):null;return Qr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ai(e,t){const n=e.filters.concat([t]);return new $r(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function oi(e,t,n){return new $r(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function li(e,t){return Jr(ii(e),ii(t))&&e.limitType===t.limitType}function ci(e){return"".concat(Yr(ii(e)),"|lt:").concat(e.limitType)}function ui(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Fr(e)).join(", "),"]")),An(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>dr(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>dr(e)).join(",")),"Target(".concat(t,")")}(ii(e)),"; limitType=").concat(e.limitType,")")}function di(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):yn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ri(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=_r(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ri(e),t))&&!(e.endAt&&!function(e,t,n){const r=_r(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ri(e),t))}(e,t)}function hi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fi(e){return(t,n)=>{let r=!1;for(const i of ri(e)){const e=gi(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function gi(e,t,n){const r=e.field.isKeyField()?yn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lr(r,i):Kt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kt()}}class pi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Un(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Vn(this.inner)}size(){return this.innerSize}}const mi=new zn(yn.comparator);function vi(){return mi}const yi=new zn(yn.comparator);function bi(){let e=yi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function wi(e){let t=yi;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function xi(){return Si()}function Ni(){return Si()}function Si(){return new pi(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ei=new zn(yn.comparator),ki=new Gn(yn.comparator);function _i(){let e=ki;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ti=new Gn(un);function Ii(){return Ti}function Ci(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pn(t)?"-0":t}}function ji(e){return{integerValue:""+e}}function Ai(e,t){return Rn(t)?ji(t):Ci(e,t)}class Pi{constructor(){this._=void 0}}function Ri(e,t,n){return e instanceof Li?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zn(t)&&(t=er(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mi?Fi(e,t):e instanceof Ui?Vi(e,t):function(e,t){const n=Oi(e,t),r=qi(n)+qi(e.Pe);return gr(n)&&gr(e.Pe)?ji(r):Ci(e.serializer,r)}(e,t)}function Di(e,t,n){return e instanceof Mi?Fi(e,t):e instanceof Ui?Vi(e,t):n}function Oi(e,t){return e instanceof zi?function(e){return gr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Li extends Pi{}class Mi extends Pi{constructor(e){super(),this.elements=e}}function Fi(e,t){const n=Bi(t);for(const r of e.elements)n.some(e=>ar(e,r))||n.push(r);return{arrayValue:{values:n}}}class Ui extends Pi{constructor(e){super(),this.elements=e}}function Vi(e,t){let n=Bi(t);for(const r of e.elements)n=n.filter(e=>!ar(e,r));return{arrayValue:{values:n}}}class zi extends Pi{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function qi(e){return Xn(e.integerValue||e.doubleValue)}function Bi(e){return pr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Gi{constructor(e,t){this.field=e,this.transform=t}}class Wi{constructor(e,t){this.version=e,this.transformResults=t}}class Hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hi}static exists(e){return new Hi(void 0,e)}static updateTime(e){return new Hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ki(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Qi{}function Yi(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ss(e.key,Hi.none()):new es(e.key,e.data,Hi.none());{const n=e.data,r=Nr.empty();let i=new Gn(vn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ts(e.key,r,new Hn(i.toArray()),Hi.none())}}function Ji(e,t,n){e instanceof es?function(e,t,n){const r=e.value.clone(),i=rs(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ts?function(e,t,n){if(!Ki(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=rs(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ns(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xi(e,t,n,r){return e instanceof es?function(e,t,n,r){if(!Ki(e.precondition,t))return n;const i=e.value.clone(),s=is(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ts?function(e,t,n,r){if(!Ki(e.precondition,t))return n;const i=is(e.fieldTransforms,r,t),s=t.data;return s.setAll(ns(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ki(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function $i(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Oi(r.transform,e||null);null!=i&&(null===n&&(n=Nr.empty()),n.set(r.field,i))}return n||null}function Zi(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&dn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mi&&t instanceof Mi||e instanceof Ui&&t instanceof Ui?dn(e.elements,t.elements,ar):e instanceof zi&&t instanceof zi?ar(e.Pe,t.Pe):e instanceof Li&&t instanceof Li}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class es extends Qi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ts extends Qi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ns(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function rs(e,t,n){const r=new Map;Qt(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Di(a,o,n[i]))}return r}function is(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ri(e,s,t))}return r}class ss extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class as extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class os{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ji(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xi(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xi(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ni();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Yi(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(fn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_i())}isEqual(e){return this.batchId===e.batchId&&dn(this.mutations,e.mutations,(e,t)=>Zi(e,t))&&dn(this.baseMutations,e.baseMutations,(e,t)=>Zi(e,t))}}class ls{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qt(e.mutations.length===n.length);let r=Ei;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ls(e,t,n,r)}}class cs{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class us{constructor(e,t){this.count=e,this.unchangedNames=t}}var ds,hs;function fs(e){switch(e){default:return Kt();case Jt.CANCELLED:case Jt.UNKNOWN:case Jt.DEADLINE_EXCEEDED:case Jt.RESOURCE_EXHAUSTED:case Jt.INTERNAL:case Jt.UNAVAILABLE:case Jt.UNAUTHENTICATED:return!1;case Jt.INVALID_ARGUMENT:case Jt.NOT_FOUND:case Jt.ALREADY_EXISTS:case Jt.PERMISSION_DENIED:case Jt.FAILED_PRECONDITION:case Jt.ABORTED:case Jt.OUT_OF_RANGE:case Jt.UNIMPLEMENTED:case Jt.DATA_LOSS:return!0}}function gs(e){if(void 0===e)return Gt("GRPC error has no .code"),Jt.UNKNOWN;switch(e){case ds.OK:return Jt.OK;case ds.CANCELLED:return Jt.CANCELLED;case ds.UNKNOWN:return Jt.UNKNOWN;case ds.DEADLINE_EXCEEDED:return Jt.DEADLINE_EXCEEDED;case ds.RESOURCE_EXHAUSTED:return Jt.RESOURCE_EXHAUSTED;case ds.INTERNAL:return Jt.INTERNAL;case ds.UNAVAILABLE:return Jt.UNAVAILABLE;case ds.UNAUTHENTICATED:return Jt.UNAUTHENTICATED;case ds.INVALID_ARGUMENT:return Jt.INVALID_ARGUMENT;case ds.NOT_FOUND:return Jt.NOT_FOUND;case ds.ALREADY_EXISTS:return Jt.ALREADY_EXISTS;case ds.PERMISSION_DENIED:return Jt.PERMISSION_DENIED;case ds.FAILED_PRECONDITION:return Jt.FAILED_PRECONDITION;case ds.ABORTED:return Jt.ABORTED;case ds.OUT_OF_RANGE:return Jt.OUT_OF_RANGE;case ds.UNIMPLEMENTED:return Jt.UNIMPLEMENTED;case ds.DATA_LOSS:return Jt.DATA_LOSS;default:return Kt()}}(hs=ds||(ds={}))[hs.OK=0]="OK",hs[hs.CANCELLED=1]="CANCELLED",hs[hs.UNKNOWN=2]="UNKNOWN",hs[hs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hs[hs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hs[hs.NOT_FOUND=5]="NOT_FOUND",hs[hs.ALREADY_EXISTS=6]="ALREADY_EXISTS",hs[hs.PERMISSION_DENIED=7]="PERMISSION_DENIED",hs[hs.UNAUTHENTICATED=16]="UNAUTHENTICATED",hs[hs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hs[hs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hs[hs.ABORTED=10]="ABORTED",hs[hs.OUT_OF_RANGE=11]="OUT_OF_RANGE",hs[hs.UNIMPLEMENTED=12]="UNIMPLEMENTED",hs[hs.INTERNAL=13]="INTERNAL",hs[hs.UNAVAILABLE=14]="UNAVAILABLE",hs[hs.DATA_LOSS=15]="DATA_LOSS";let ps=null;function ms(){return new TextEncoder}const vs=new Et([4294967295,4294967295],0);function ys(e){const t=ms().encode(e),n=new kt;return n.update(t),new Uint8Array(n.digest())}function bs(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Et([n,r],0),new Et([i,s],0)]}class ws{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xs("Invalid padding: ".concat(t));if(n<0)throw new xs("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new xs("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new xs("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Et.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Et.fromNumber(n)));return 1===r.compare(vs)&&(r=new Et([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=ys(e),[n,r]=bs(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ws(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=ys(e),[n,r]=bs(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ns{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ss.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ns(fn.min(),r,new zn(un),vi(),_i())}}class Ss{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ss(n,t,_i(),_i(),_i())}}class Es{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class ks{constructor(e,t){this.targetId=e,this.me=t}}class _s{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qn.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ts{constructor(){this.fe=0,this.ge=js(),this.pe=Qn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_i(),t=_i(),n=_i();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Kt()}}),new Ss(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=js()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Is{constructor(e){this.Le=e,this.Be=new Map,this.ke=vi(),this.qe=Cs(),this.Qe=new zn(un)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Kt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Xr(i))if(0===n){const e=new yn(i.path);this.Ue(t,e,Er.newNoDocument(e,fn.min()))}else Qt(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==ps||ps.et(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=$n(n).toUint8Array()}catch(e){if(e instanceof Kn)return Wt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ws(s,r,i)}catch(e){return Wt(e instanceof xs?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Xr(i.target)){const t=new yn(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Er.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=_i();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Ns(e,t,this.Qe,this.ke,n);return this.ke=vi(),this.qe=Cs(),this.Qe=new zn(un),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ts,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gn(un),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Bt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ts),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Cs(){return new zn(yn.comparator)}function js(){return new zn(yn.comparator)}const As={asc:"ASCENDING",desc:"DESCENDING"},Ps={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rs={and:"AND",or:"OR"};class Ds{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Os(e,t){return e.useProto3Json||An(t)?t:{value:t}}function Ls(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ms(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fs(e,t){return Ls(e,t.toTimestamp())}function Us(e){return Qt(!!e),fn.fromTimestamp(function(e){const t=Jn(e);return new hn(t.seconds,t.nanos)}(e))}function Vs(e,t){return zs(e,t).canonicalString()}function zs(e,t){const n=function(e){return new pn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function qs(e){const t=pn.fromString(e);return Qt(la(t)),t}function Bs(e,t){return Vs(e.databaseId,t.path)}function Gs(e,t){const n=qs(t);if(n.get(1)!==e.databaseId.projectId)throw new Xt(Jt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xt(Jt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new yn(Qs(n))}function Ws(e,t){return Vs(e.databaseId,t)}function Hs(e){const t=qs(e);return 4===t.length?pn.emptyPath():Qs(t)}function Ks(e){return new pn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qs(e){return Qt(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ys(e,t,n){return{name:Bs(e,t),fields:n.value.mapValue.fields}}function Js(e,t){let n;if(t instanceof es)n={update:Ys(e,t.key,t.value)};else if(t instanceof ss)n={delete:Bs(e,t.key)};else if(t instanceof ts)n={update:Ys(e,t.key,t.data),updateMask:oa(t.fieldMask)};else{if(!(t instanceof as))return Kt();n={verify:Bs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Li)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ui)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zi)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Kt()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Kt()}(e,t.precondition)),n}function Xs(e,t){return{documents:[Ws(e,t.path)]}}function $s(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ws(e,i);const s=function(e){if(0!==e.length)return aa(Pr.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ia(e.field),direction:ta(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Os(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Zs(e){let t=Hs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qt(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ea(e);return t instanceof Pr&&Dr(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Ir(sa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,An(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new kr(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new kr(n,t)}(n.endAt)),Zr(t,i,a,s,o,"F",l,c)}function ea(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=sa(e.unaryFilter.field);return Ar.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=sa(e.unaryFilter.field);return Ar.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sa(e.unaryFilter.field);return Ar.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=sa(e.unaryFilter.field);return Ar.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Kt()}}(e):void 0!==e.fieldFilter?function(e){return Ar.create(sa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kt()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Pr.create(e.compositeFilter.filters.map(e=>ea(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Kt()}}(e.compositeFilter.op))}(e):Kt()}function ta(e){return As[e]}function na(e){return Ps[e]}function ra(e){return Rs[e]}function ia(e){return{fieldPath:e.canonicalString()}}function sa(e){return vn.fromServerFormat(e.fieldPath)}function aa(e){return e instanceof Ar?function(e){if("=="===e.op){if(vr(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NAN"}};if(mr(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vr(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NOT_NAN"}};if(mr(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(e.field),op:na(e.op),value:e.value}}}(e):e instanceof Pr?function(e){const t=e.getFilters().map(e=>aa(e));return 1===t.length?t[0]:{compositeFilter:{op:ra(e.op),filters:t}}}(e):Kt()}function oa(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function la(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ca{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fn.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qn.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ua{constructor(e){this.ct=e}}function da(e){const t=Zs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?oi(t,t.limit,"L"):t}class ha{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Xn(e.integerValue));else if("doubleValue"in e){const n=Xn(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Pn(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Jn(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt($n(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?xr(e)?this.dt(t,Number.MAX_SAFE_INTEGER):br(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Kt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Xn(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),yn.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}ha.vt=new ha;class fa{constructor(){this.un=new ga}addToCollectionParentIndex(e,t){return this.un.add(t),Tn.resolve()}getCollectionParents(e,t){return Tn.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Tn.resolve()}deleteFieldIndex(e,t){return Tn.resolve()}deleteAllFieldIndexes(e){return Tn.resolve()}createTargetIndexes(e,t){return Tn.resolve()}getDocumentsMatchingTarget(e,t){return Tn.resolve(null)}getIndexType(e,t){return Tn.resolve(0)}getFieldIndexes(e,t){return Tn.resolve([])}getNextCollectionGroupToUpdate(e){return Tn.resolve(null)}getMinOffset(e,t){return Tn.resolve(Nn.min())}getMinOffsetFromCollectionGroup(e,t){return Tn.resolve(Nn.min())}updateCollectionGroup(e,t,n){return Tn.resolve()}updateIndexEntries(e,t){return Tn.resolve()}}class ga{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gn(pn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Gn(pn.comparator)).toArray()}}new Uint8Array(0);class pa{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new pa(e,pa.DEFAULT_COLLECTION_PERCENTILE,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}pa.DEFAULT_COLLECTION_PERCENTILE=10,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pa.DEFAULT=new pa(41943040,pa.DEFAULT_COLLECTION_PERCENTILE,pa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pa.DISABLED=new pa(-1,0,0);class ma{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ma(0)}static kn(){return new ma(-1)}}class va{constructor(){this.changes=new pi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Tn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ya{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ba{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Xi(n.mutation,e,Hn.empty(),hn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,_i()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_i();const r=xi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=bi();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=xi();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,_i()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=vi();const s=Si(),a=Si();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ts)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Xi(a.mutation,t,a.mutation.getFieldMask(),hn.now())):s.set(t.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ya(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Si();let r=new zn((e,t)=>e-t),i=_i();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Hn.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||_i()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Ni();l.forEach(e=>{if(!i.has(e)){const r=Yi(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Tn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return yn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ni(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Tn.resolve(xi());let a=-1,o=i;return s.next(t=>Tn.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Tn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,_i())).next(e=>({batchId:a,changes:wi(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yn(t)).next(e=>{let t=bi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=bi();return this.indexManager.getCollectionParents(e,i).next(a=>Tn.forEach(a,a=>{const o=function(e,t){return new $r(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Er.newInvalidDocument(r)))});let n=bi();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Xi(s.mutation,r,Hn.empty(),hn.now()),di(t,r)&&(n=n.insert(e,r))}),n})}}class wa{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Tn.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Us(e.createTime)}}(t)),Tn.resolve()}getNamedQuery(e,t){return Tn.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:da(e.bundledQuery),readTime:Us(e.readTime)}}(t)),Tn.resolve()}}class xa{constructor(){this.overlays=new zn(yn.comparator),this.Ir=new Map}getOverlay(e,t){return Tn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xi();return Tn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Tn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Tn.resolve()}getOverlaysForCollection(e,t,n){const r=xi(),i=t.length+1,s=new yn(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Tn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new zn((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=xi(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Tn.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new cs(t,n));let i=this.Ir.get(t);void 0===i&&(i=_i(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Na{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return Tn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Tn.resolve()}}class Sa{constructor(){this.Tr=new Gn(Ea.Er),this.dr=new Gn(Ea.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Ea(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Ea(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new yn(new pn([])),n=new Ea(t,e),r=new Ea(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new yn(new pn([])),n=new Ea(t,e),r=new Ea(t,e+1);let i=_i();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ea(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ea{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return yn.comparator(e.key,t.key)||un(e.wr,t.wr)}static Ar(e,t){return un(e.wr,t.wr)||yn.comparator(e.key,t.key)}}class ka{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Gn(Ea.Er)}checkEmpty(e){return Tn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new os(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new Ea(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Tn.resolve(s)}lookupMutationBatch(e,t){return Tn.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Tn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Tn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Tn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ea(t,0),r=new Ea(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),Tn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Gn(un);return t.forEach(e=>{const t=new Ea(e,0),r=new Ea(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Tn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;yn.isDocumentKey(i)||(i=i.child(""));const s=new Ea(new yn(i),0);let a=new Gn(un);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},s),Tn.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Qt(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Tn.forEach(t.mutations,r=>{const i=new Ea(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Ea(t,0),r=this.br.firstAfterOrEqual(n);return Tn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tn.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _a{constructor(e){this.Mr=e,this.docs=new zn(yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Tn.resolve(n?n.document.mutableCopy():Er.newInvalidDocument(t))}getEntries(e,t){let n=vi();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Er.newInvalidDocument(e))}),Tn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=vi();const s=t.path,a=new yn(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Sn(xn(a),n)<=0||(r.has(a.key)||di(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Tn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Kt()}Or(e,t){return Tn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ta(this)}getSize(e){return Tn.resolve(this.size)}}class Ta extends va{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Tn.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Ia{constructor(e){this.persistence=e,this.Nr=new pi(e=>Yr(e),Jr),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sa,this.targetCount=0,this.kr=ma.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Tn.resolve()}getLastRemoteSnapshotVersion(e){return Tn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tn.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Tn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Tn.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ma(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Tn.resolve()}updateTargetData(e,t){return this.Kn(t),Tn.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Tn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Tn.waitFor(i).next(()=>r)}getTargetCount(e){return Tn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Tn.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Tn.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Tn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Tn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Tn.resolve(n)}containsKey(e,t){return Tn.resolve(this.Br.containsKey(t))}}class Ca{constructor(e,t){this.qr={},this.overlays={},this.Qr=new jn(0),this.Kr=!1,this.Kr=!0,this.$r=new Na,this.referenceDelegate=e(this),this.Ur=new Ia(this),this.indexManager=new fa,this.remoteDocumentCache=function(e){return new _a(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new ua(t),this.Gr=new wa(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xa,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new ka(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Bt("MemoryPersistence","Starting transaction:",e);const r=new ja(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Tn.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class ja extends kn{constructor(e){super(),this.currentSequenceNumber=e}}class Aa{constructor(e){this.persistence=e,this.Jr=new Sa,this.Yr=null}static Zr(e){return new Aa(e)}get Xr(){if(this.Yr)return this.Yr;throw Kt()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Tn.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Tn.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Tn.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tn.forEach(this.Xr,n=>{const r=yn.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,fn.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Tn.or([()=>Tn.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Pa{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=_i(),r=_i();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pa(e,t.fromCache,n,r)}}class Ra{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Da{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=M()?8:In(L())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Ra;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(qt()<=te.DEBUG&&Bt("QueryEngine","SDK will not create cache indexes for query:",ui(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Tn.resolve()):(qt()<=te.DEBUG&&Bt("QueryEngine","Query:",ui(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(qt()<=te.DEBUG&&Bt("QueryEngine","The SDK decides to create cache indexes for query:",ui(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(t))):Tn.resolve())}Yi(e,t){if(ti(t))return Tn.resolve(null);let n=ii(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=oi(t,null,"F"),n=ii(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=_i(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,oi(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return ti(t)||r.isEqual(fn.min())?Tn.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Tn.resolve(null):(qt()<=te.DEBUG&&Bt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ui(t)),this.rs(e,s,t,wn(r,-1)).next(e=>e))})}ts(e,t){let n=new Gn(fi(e));return t.forEach((t,r)=>{di(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return qt()<=te.DEBUG&&Bt("QueryEngine","Using full collection scan to execute query:",ui(t)),this.Ji.getDocumentsMatchingQuery(e,t,Nn.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Oa{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new zn(un),this._s=new pi(e=>Yr(e),Jr),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ba(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function La(e,t,n,r){return new Oa(e,t,n,r)}async function Ma(e,t){const n=Yt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=_i();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Fa(e){const t=Yt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Ua(e,t,n){let r=_i(),i=_i();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=vi();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(fn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Bt("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function Va(e,t){const n=Yt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function za(e,t){const n=Yt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,Tn.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new ca(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function qa(e,t,n){const r=Yt(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Cn(e))throw e;Bt("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(i.target)}function Ba(e,t,n){const r=Yt(e);let i=fn.min(),s=_i();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Yt(e),i=r._s.get(n);return void 0!==i?Tn.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,ii(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:fn.min(),n?s:_i())).next(e=>(Ga(r,hi(t),e),{documents:e,Ts:s})))}function Ga(e,t,n){let r=e.us.get(t)||fn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Wa{constructor(){this.activeTargetIds=Ii()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ha{constructor(){this.so=new Wa,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wa,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ka{_o(e){}shutdown(){}}class Qa{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ya=null;function Ja(){return null===Ya?Ya=268435456+Math.round(2147483648*Math.random()):Ya++,"0x"+Ya.toString(16)}const Xa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $a{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Za="WebChannelConnection";class eo extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,i){const s=Ja(),a=this.xo(e,t.toUriEncodedString());Bt("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then(t=>(Bt("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Wt("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Xa[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Ja();return new Promise((s,a)=>{const o=new It;o.setWithCredentials(!0),o.listenOnce(jt.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case At.NO_ERROR:const t=o.getResponseJson();Bt(Za,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case At.TIMEOUT:Bt(Za,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Xt(Jt.DEADLINE_EXCEEDED,"Request time out"));break;case At.HTTP_ERROR:const n=o.getStatus();if(Bt(Za,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jt).indexOf(t)>=0?t:Jt.UNKNOWN}(t.status);a(new Xt(e,t.message))}else a(new Xt(Jt.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Xt(Jt.UNAVAILABLE,"Connection failed."));break;default:Kt()}}finally{Bt(Za,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Bt(Za,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Ja(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ot(),a=Dt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Bt(Za,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new $a({Io:t=>{h?Bt(Za,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Bt(Za,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Bt(Za,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),g=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(u,Ct.EventType.OPEN,()=>{h||(Bt(Za,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),g(u,Ct.EventType.CLOSE,()=>{h||(h=!0,Bt(Za,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),g(u,Ct.EventType.ERROR,t=>{h||(h=!0,Wt(Za,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Xt(Jt.UNAVAILABLE,"The operation could not be completed")))}),g(u,Ct.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Qt(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Bt(Za,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=ds[e];if(void 0!==t)return gs(t)}(t),i=a.message;void 0===n&&(n=Jt.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Xt(n,i)),u.close()}else Bt(Za,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.bo(i)}}),g(a,Rt.STAT_EVENT,t=>{t.stat===Pt.PROXY?Bt(Za,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Pt.NOPROXY&&Bt(Za,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function to(){return"undefined"!=typeof document?document:null}function no(e){return new Ds(e,!0)}class ro{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Bt("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class io{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ro(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Jt.RESOURCE_EXHAUSTED?(Gt(t.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Jt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Xt(Jt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Bt("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class so extends io{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Kt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Qt(void 0===t||"string"==typeof t),Qn.fromBase64String(t||"")):(Qt(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Qn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Jt.UNKNOWN:gs(e.code);return new Xt(t,e.message||"")}(a);n=new _s(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gs(e,r.document.name),s=Us(r.document.updateTime),a=r.document.createTime?Us(r.document.createTime):fn.min(),o=new Nr({mapValue:{fields:r.document.fields}}),l=Er.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Es(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Gs(e,r.document),s=r.readTime?Us(r.readTime):fn.min(),a=Er.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Es([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Gs(e,r.document),s=r.removedTargetIds||[];n=new Es([],s,i,null)}else{if(!("filter"in t))return Kt();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new us(r,i),a=e.targetId;n=new ks(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return fn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?fn.min():t.readTime?Us(t.readTime):fn.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Ks(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Xr(r)?{documents:Xs(e,r)}:{query:$s(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ms(e,t.resumeToken);const r=Os(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(fn.min())>0){n.readTime=Ls(e,t.snapshotVersion.toTimestamp());const r=Os(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kt()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Ks(this.serializer),t.removeTarget=e,this.a_(t)}}class ao extends io{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Qt(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Us(e.updateTime):Us(t);return n.isEqual(fn.min())&&(n=Us(t)),new Wi(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Us(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Ks(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Js(this.serializer,e))};this.a_(t)}}class oo extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Xt(Jt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Mo(e,zs(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xt(Jt.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Lo(e,zs(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xt(Jt.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class lo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Gt(t),this.D_=!1):Bt("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class co{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{bo(this)&&(Bt("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Yt(e);t.L_.add(4),await ho(t),t.q_.set("Unknown"),t.L_.delete(4),await uo(t)}(this))})}),this.q_=new lo(n,r)}}async function uo(e){if(bo(e))for(const t of e.B_)await t(!0)}async function ho(e){for(const t of e.B_)await t(!1)}function fo(e,t){const n=Yt(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),yo(n)?vo(n):Fo(n).r_()&&po(n,t))}function go(e,t){const n=Yt(e),r=Fo(n);n.N_.delete(t),r.r_()&&mo(n,t),0===n.N_.size&&(r.r_()?r.o_():bo(n)&&n.q_.set("Unknown"))}function po(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fo(e).A_(t)}function mo(e,t){e.Q_.xe(t),Fo(e).R_(t)}function vo(e){e.Q_=new Is({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Fo(e).start(),e.q_.v_()}function yo(e){return bo(e)&&!Fo(e).n_()&&e.N_.size>0}function bo(e){return 0===Yt(e).L_.size}function wo(e){e.Q_=void 0}async function xo(e){e.q_.set("Online")}async function No(e){e.N_.forEach((t,n)=>{po(e,t)})}async function So(e,t){wo(e),yo(e)?(e.q_.M_(t),vo(e)):e.q_.set("Unknown")}async function Eo(e,t,n){if(e.q_.set("Online"),t instanceof _s&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Bt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ko(e,n)}else if(t instanceof Es?e.Q_.Ke(t):t instanceof ks?e.Q_.He(t):e.Q_.We(t),!n.isEqual(fn.min()))try{const t=await Fa(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Qn.EMPTY_BYTE_STRING,r.snapshotVersion)),mo(e,t);const i=new ca(r.target,t,n,r.sequenceNumber);po(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Bt("RemoteStore","Failed to raise snapshot:",t),await ko(e,t)}}async function ko(e,t,n){if(!Cn(t))throw t;e.L_.add(1),await ho(e),e.q_.set("Offline"),n||(n=()=>Fa(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Bt("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await uo(e)})}function _o(e,t){return t().catch(n=>ko(e,n,t))}async function To(e){const t=Yt(e),n=Uo(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Io(t);)try{const e=await Va(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Co(t,e)}catch(e){await ko(t,e)}jo(t)&&Ao(t)}function Io(e){return bo(e)&&e.O_.length<10}function Co(e,t){e.O_.push(t);const n=Uo(e);n.r_()&&n.V_&&n.m_(t.mutations)}function jo(e){return bo(e)&&!Uo(e).n_()&&e.O_.length>0}function Ao(e){Uo(e).start()}async function Po(e){Uo(e).p_()}async function Ro(e){const t=Uo(e);for(const n of e.O_)t.m_(n.mutations)}async function Do(e,t,n){const r=e.O_.shift(),i=ls.from(r,t,n);await _o(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await To(e)}async function Oo(e,t){t&&Uo(e).V_&&await async function(e,t){if(function(e){return fs(e)&&e!==Jt.ABORTED}(t.code)){const n=e.O_.shift();Uo(e).s_(),await _o(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await To(e)}}(e,t),jo(e)&&Ao(e)}async function Lo(e,t){const n=Yt(e);n.asyncQueue.verifyOperationInProgress(),Bt("RemoteStore","RemoteStore received new credentials");const r=bo(n);n.L_.add(3),await ho(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await uo(n)}async function Mo(e,t){const n=Yt(e);t?(n.L_.delete(2),await uo(n)):t||(n.L_.add(2),await ho(n),n.q_.set("Unknown"))}function Fo(e){return e.K_||(e.K_=function(e,t,n){const r=Yt(e);return r.w_(),new so(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:xo.bind(null,e),Ro:No.bind(null,e),mo:So.bind(null,e),d_:Eo.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),yo(e)?vo(e):e.q_.set("Unknown")):(await e.K_.stop(),wo(e))})),e.K_}function Uo(e){return e.U_||(e.U_=function(e,t,n){const r=Yt(e);return r.w_(),new ao(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Po.bind(null,e),mo:Oo.bind(null,e),f_:Ro.bind(null,e),g_:Do.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await To(e)):(await e.U_.stop(),e.O_.length>0&&(Bt("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class Vo{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Vo(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xt(Jt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zo(e,t){if(Gt("AsyncQueue","".concat(t,": ").concat(e)),Cn(e))return new Xt(Jt.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class qo{constructor(e){this.comparator=e?(t,n)=>e(t,n)||yn.comparator(t.key,n.key):(e,t)=>yn.comparator(e.key,t.key),this.keyedMap=bi(),this.sortedSet=new zn(this.comparator)}static emptySet(e){return new qo(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qo))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Bo{constructor(){this.W_=new zn(yn.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Kt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Go{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Go(e,t,qo.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&li(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Wo{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ho{constructor(){this.queries=Ko(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Yt(e),r=n.queries;n.queries=Ko(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Xt(Jt.ABORTED,"Firestore shutting down"))}}function Ko(){return new pi(e=>ci(e),li)}async function Qo(e,t){const n=Yt(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Wo,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=zo(e,"Initialization of query '".concat(ui(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&$o(n)}async function Yo(e,t){const n=Yt(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Jo(e,t){const n=Yt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&$o(n)}function Xo(e,t,n){const r=Yt(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function $o(e){e.Y_.forEach(e=>{e.next()})}var Zo,el;(el=Zo||(Zo={})).ea="default",el.Cache="cache";class tl{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Go(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zo.Cache}}class nl{constructor(e){this.key=e}}class rl{constructor(e){this.key=e}}class il{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_i(),this.mutatedKeys=_i(),this.Aa=fi(e),this.Ra=new qo(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Bo,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=di(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kt()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new Go(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Bo,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=_i(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new rl(e))}),this.da.forEach(n=>{e.has(n)||t.push(new nl(n))}),t}ba(e){this.Ta=e.Ts,this.da=_i();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class sl{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class al{constructor(e){this.key=e,this.va=!1}}class ol{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new pi(e=>ci(e),li),this.Ma=new Map,this.xa=new Set,this.Oa=new zn(yn.comparator),this.Na=new Map,this.La=new Sa,this.Ba={},this.ka=new Map,this.qa=ma.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function ll(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Cl(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await ul(r,t,n,!0),i}async function cl(e,t){const n=Cl(e);await ul(n,t,!0,!1)}async function ul(e,t,n,r){const i=await za(e.localStore,ii(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await dl(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&fo(e.remoteStore,i),o}async function dl(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Ba(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Sl(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await Ba(e.localStore,t,!0),a=new il(t,s.Ts),o=a.ma(s.documents),l=Ss.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Sl(e,n,c.wa);const u=new sl(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function hl(e,t,n){const r=Yt(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!li(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&go(r.remoteStore,i.targetId),xl(r,i.targetId)}).catch(_n)):(xl(r,i.targetId),await qa(r.localStore,i.targetId,!0))}async function fl(e,t){const n=Yt(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),go(n.remoteStore,r.targetId))}async function gl(e,t){const n=Yt(e);try{const e=await function(e,t){const n=Yt(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Qn.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(e,c))});let o=vi(),l=_i();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Ua(e,s,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(fn.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Tn.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Qt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Qt(r.va):e.removedDocuments.size>0&&(Qt(r.va),r.va=!1))}),await _l(n,e,t)}catch(e){await _n(e)}}function pl(e,t,n){const r=Yt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Yt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&$o(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ml(e,t,n){const r=Yt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new zn(yn.comparator);e=e.insert(s,Er.newNoDocument(s,fn.min()));const n=_i().add(s),i=new Ns(fn.min(),new Map,new zn(un),e,n);await gl(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),kl(r)}else await qa(r.localStore,t,!1).then(()=>xl(r,t,n)).catch(_n)}async function vl(e,t){const n=Yt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Tn.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Qt(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=_i();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);wl(n,r,null),bl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _l(n,e)}catch(e){await _n(e)}}async function yl(e,t,n){const r=Yt(e);try{const e=await function(e,t){const n=Yt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Qt(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);wl(r,t,n),bl(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _l(r,e)}catch(n){await _n(n)}}function bl(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function wl(e,t,n){const r=Yt(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function xl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Nl(e,t)})}function Nl(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(go(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),kl(e))}function Sl(e,t,n){for(const r of n)r instanceof nl?(e.La.addReference(r.key,t),El(e,r)):r instanceof rl?(Bt("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Nl(e,r.key)):Kt()}function El(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Bt("SyncEngine","New document in limbo: "+n),e.xa.add(r),kl(e))}function kl(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new yn(pn.fromString(t)),r=e.qa.next();e.Na.set(r,new al(n)),e.Oa=e.Oa.insert(n,r),fo(e.remoteStore,new ca(ii(ei(n.path)),r,"TargetPurposeLimboResolution",jn.oe))}}async function _l(e,t,n){const r=Yt(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Pa.Wi(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Yt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Tn.forEach(t,t=>Tn.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Tn.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Cn(e))throw e;Bt("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Tl(e,t){const n=Yt(e);if(!n.currentUser.isEqual(t)){Bt("SyncEngine","User change. New user:",t.toKey());const e=await Ma(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Xt(Jt.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await _l(n,e.hs)}}function Il(e,t){const n=Yt(e),r=n.Na.get(t);if(r&&r.va)return _i().add(r.key);{let e=_i();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Cl(e){const t=Yt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Il.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ml.bind(null,t),t.Ca.d_=Jo.bind(null,t.eventManager),t.Ca.$a=Xo.bind(null,t.eventManager),t}function jl(e){const t=Yt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yl.bind(null,t),t}class Al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=no(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return La(this.persistence,new Da,e.initialUser,this.serializer)}Ga(e){return new Ca(Aa.Zr,this.serializer)}Wa(e){return new Ha}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Al.provider={build:()=>new Al};class Pl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tl.bind(null,this.syncEngine),await Mo(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ho}createDatastore(e){const t=no(e.databaseInfo.databaseId),n=function(e){return new eo(e)}(e.databaseInfo);return function(e,t,n,r){return new oo(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new co(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>pl(this.syncEngine,e,0),Qa.D()?new Qa:new Ka)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new ol(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Yt(e);Bt("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await ho(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Pl.provider={build:()=>new Pl};class Rl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Dl{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ut.UNAUTHENTICATED,this.clientId=cn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Bt("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Bt("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=zo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ol(e,t){e.asyncQueue.verifyOperationInProgress(),Bt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ma(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ll(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ml(e);Bt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Lo(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Lo(t.remoteStore,n)),e._onlineComponents=t}async function Ml(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Bt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ol(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Jt.FAILED_PRECONDITION||e.code===Jt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Wt("Error using user provided cache. Falling back to memory cache: "+n),await Ol(e,new Al)}}else Bt("FirestoreClient","Using default OfflineComponentProvider"),await Ol(e,new Al);return e._offlineComponents}async function Fl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Bt("FirestoreClient","Using user provided OnlineComponentProvider"),await Ll(e,e._uninitializedComponentsProvider._online)):(Bt("FirestoreClient","Using default OnlineComponentProvider"),await Ll(e,new Pl))),e._onlineComponents}function Ul(e){return Fl(e).then(e=>e.syncEngine)}async function Vl(e){const t=await Fl(e),n=t.eventManager;return n.onListen=ll.bind(null,t.syncEngine),n.onUnlisten=hl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fl.bind(null,t.syncEngine),n}function zl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new $t;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Rl({next:o=>{s.Za(),t.enqueueAndForget(()=>Yo(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Xt(Jt.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Xt(Jt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new tl(ei(n.path),s,{includeMetadataChanges:!0,_a:!0});return Qo(e,a)}(await Vl(e),e.asyncQueue,t,n,r)),r.promise}function ql(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new $t;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Rl({next:n=>{s.Za(),t.enqueueAndForget(()=>Yo(e,a)),n.fromCache&&"server"===r.source?i.reject(new Xt(Jt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new tl(n,s,{includeMetadataChanges:!0,_a:!0});return Qo(e,a)}(await Vl(e),e.asyncQueue,t,n,r)),r.promise}function Bl(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Gl=new Map;function Wl(e,t,n){if(!n)throw new Xt(Jt.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Hl(e){if(!yn.isDocumentKey(e))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Kl(e){if(yn.isDocumentKey(e))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ql(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Kt()}function Yl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(Jt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ql(e);throw new Xt(Jt.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Jl{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xt(Jt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xt(Jt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Xt(Jt.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bl(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xt(Jt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xt(Jt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xt(Jt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xl{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jl({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(Jt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xt(Jt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jl(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new en;switch(e.type){case"firstParty":return new sn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xt(Jt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gl.get(e);t&&(Bt("ComponentProvider","Removing Datastore"),Gl.delete(e),t.terminate())}(this),Promise.resolve()}}function $l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Yl(e,Xl))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&Wt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ut.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[I(JSON.stringify({alg:"none",type:"JWT"})),I(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xt(Jt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ut(s)}e._authCredentials=new tn(new Zt(t,n))}}class Zl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zl(this.firestore,e,this._query)}}class ec{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ec(this.firestore,e,this._key)}}class tc extends Zl{constructor(e,t,n){super(e,t,ei(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ec(this.firestore,null,new yn(e))}withConverter(e){return new tc(this.firestore,e,this._path)}}function nc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),Wl("collection","path",t),e instanceof Xl){const n=pn.fromString(t,...r);return Kl(n),new tc(e,null,n)}{if(!(e instanceof ec||e instanceof tc))throw new Xt(Jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(pn.fromString(t,...r));return Kl(n),new tc(e.firestore,null,n)}}function rc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),1===arguments.length&&(t=cn.newId()),Wl("doc","path",t),e instanceof Xl){const n=pn.fromString(t,...r);return Hl(n),new ec(e,null,new yn(n))}{if(!(e instanceof ec||e instanceof tc))throw new Xt(Jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(pn.fromString(t,...r));return Hl(n),new ec(e.firestore,e instanceof tc?e.converter:null,new yn(n))}}class ic{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ro(this,"async_queue_retry"),this.Vu=()=>{const e=to();e&&Bt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=to();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=to();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new $t;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cn(e))throw e;Bt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Gt("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Vo.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Kt()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function sc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ac extends Xl{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ic,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ic(e),this._firestoreClient=void 0,await e}}}function oc(e){if(e._terminated)throw new Xt(Jt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||lc(e),e._firestoreClient}function lc(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new nr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Bl(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Dl(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cc(Qn.fromBase64String(e))}catch(e){throw new Xt(Jt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new cc(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uc{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dc{constructor(e){this._methodName=e}}class hc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xt(Jt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xt(Jt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}}class fc{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const gc=/^__.*__$/;class pc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new es(e,this.data,t,this.fieldTransforms)}}class mc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kt()}}class yc{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(vc(this.Cu)&&gc.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||no(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yc({Cu:e,methodName:t,qu:n,path:vn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wc(e){const t=e._freezeSettings(),n=no(e._databaseId);return new bc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xc(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);Pc("Data must be an object, but it was:",a,r);const o=jc(r,a);let l,c;if(s.merge)l=new Hn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Rc(t,r,n);if(!a.contains(i))throw new Xt(Jt.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Mc(e,i)||e.push(i)}l=new Hn(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new pc(new Nr(o),l,c)}class Nc extends dc{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nc}}function Sc(e,t,n){return new yc({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Ec extends dc{_toFieldTransform(e){return new Gi(e.path,new Li)}isEqual(e){return e instanceof Ec}}class kc extends dc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Sc(this,e,!0),n=this.Ku.map(e=>Cc(e,t)),r=new Mi(n);return new Gi(e.path,r)}isEqual(e){return e instanceof kc&&q(this.Ku,e.Ku)}}function _c(e,t,n,r){const i=e.Qu(1,t,n);Pc("Data must be an object, but it was:",i,r);const s=[],a=Nr.empty();Un(r,(e,r)=>{const o=Oc(t,e,n);r=Y(r);const l=i.Nu(o);if(r instanceof Nc)s.push(o);else{const e=Cc(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Hn(s);return new mc(a,o,i.fieldTransforms)}function Tc(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[Rc(t,r,n)],l=[i];if(s.length%2!=0)throw new Xt(Jt.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(Rc(t,s[h])),l.push(s[h+1]);const c=[],u=Nr.empty();for(let h=o.length-1;h>=0;--h)if(!Mc(c,o[h])){const e=o[h];let t=l[h];t=Y(t);const n=a.Nu(e);if(t instanceof Nc)c.push(e);else{const r=Cc(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Hn(c);return new mc(u,d,a.fieldTransforms)}function Ic(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cc(n,e.Qu(r?4:3,t))}function Cc(e,t){if(Ac(e=Y(e)))return Pc("Unsupported field value:",t,e),jc(e,t);if(e instanceof dc)return function(e,t){if(!vc(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Cc(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Y(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ai(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=hn.fromDate(e);return{timestampValue:Ls(t.serializer,n)}}if(e instanceof hn){const n=new hn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ls(t.serializer,n)}}if(e instanceof hc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cc)return{bytesValue:Ms(t.serializer,e._byteString)};if(e instanceof ec){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Vs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof fc)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Ci(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Ql(e)))}(e,t)}function jc(e,t){const n={};return Vn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Un(e,(e,r)=>{const i=Cc(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ac(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof hn||e instanceof hc||e instanceof cc||e instanceof ec||e instanceof dc||e instanceof fc)}function Pc(e,t,n){if(!Ac(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ql(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Rc(e,t,n){if((t=Y(t))instanceof uc)return t._internalPath;if("string"==typeof t)return Oc(e,t);throw Lc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Dc=new RegExp("[~\\*/\\[\\]]");function Oc(e,t,n){if(t.search(Dc)>=0)throw Lc("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new uc(...t.split("."))._internalPath}catch(r){throw Lc("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Lc(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Xt(Jt.INVALID_ARGUMENT,o+e+l)}function Mc(e,t){return e.some(e=>e.isEqual(t))}class Fc{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ec(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uc extends Fc{data(){return super.data()}}function Vc(e,t){return"string"==typeof t?Oc(e,t):t instanceof uc?t._internalPath:t._delegate._internalPath}function zc(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xt(Jt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qc{}class Bc extends qc{}function Gc(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof qc&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Kc).length,n=e.filter(e=>e instanceof Wc).length;if(t>1||t>0&&n>0)throw new Xt(Jt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Wc extends Bc{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Wc(e,t,n)}_apply(e){const t=this._parse(e);return Jc(e._query,t),new Zl(e.firestore,e.converter,ai(e._query,t))}_parse(e){const t=wc(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Yc(a,s);const t=[];for(const n of a)t.push(Qc(r,e,n));o={arrayValue:{values:t}}}else o=Qc(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Yc(a,s),o=Ic(n,t,a,"in"===s||"not-in"===s);return Ar.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Hc(e,t,n){const r=t,i=Vc("where",e);return Wc._create(i,r,n)}class Kc extends qc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kc(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Jc(n,i),n=ai(n,i)}(e._query,t),new Zl(e.firestore,e.converter,ai(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Qc(e,t,n){if("string"==typeof(n=Y(n))){if(""===n)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ni(t)&&-1!==n.indexOf("/"))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(pn.fromString(n));if(!yn.isDocumentKey(r))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return fr(e,new yn(r))}if(n instanceof ec)return fr(e,n._key);throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ql(n),"."))}function Yc(e,t){if(!Array.isArray(e)||0===e.length)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Jc(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xt(Jt.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xt(Jt.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Xc{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Kt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Un(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Xn(e.doubleValue));return new fc(i)}convertGeoPoint(e){return new hc(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=er(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(tr(e));default:return null}}convertTimestamp(e){const t=Jn(e);return new hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=pn.fromString(e);Qt(la(n));const r=new rr(n.get(1),n.get(3)),i=new yn(n.popFirst(5));return r.isEqual(t)||Gt("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function $c(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eu extends Fc{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Vc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class tu extends eu{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class nu{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new tu(this._firestore,this._userDataWriter,n.key,n,new Zc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xt(Jt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new tu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Zc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new tu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Zc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ru(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ru(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kt()}}function iu(e){e=Yl(e,ec);const t=Yl(e.firestore,ac);return zl(oc(t),e._key).then(n=>hu(t,e,n))}class su extends Xc{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ec(this.firestore,null,t)}}function au(e){e=Yl(e,Zl);const t=Yl(e.firestore,ac),n=oc(t),r=new su(t);return zc(e._query),ql(n,e._query).then(n=>new nu(t,r,e,n))}function ou(e,t,n){e=Yl(e,ec);const r=Yl(e.firestore,ac),i=$c(e.converter,t,n);return du(r,[xc(wc(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Hi.none())])}function lu(e,t,n){e=Yl(e,ec);const r=Yl(e.firestore,ac),i=wc(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=Y(t))||t instanceof uc?Tc(i,"updateDoc",e._key,t,n,o):_c(i,"updateDoc",e._key,t),du(r,[s.toMutation(e._key,Hi.exists(!0))])}function cu(e){return du(Yl(e.firestore,ac),[new ss(e._key,Hi.none())])}function uu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=Y(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||sc(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(sc(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof ec)d=Yl(e.firestore,ac),h=ei(e._key.path),u={next:t=>{n[l]&&n[l](hu(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Yl(e,Zl);d=Yl(t.firestore,ac),h=t._query;const r=new su(d);u={next:e=>{n[l]&&n[l](new nu(d,r,t,e))},error:n[l+1],complete:n[l+2]},zc(e._query)}return function(e,t,n,r){const i=new Rl(r),s=new tl(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Qo(await Vl(e),s)),()=>{i.Za(),e.asyncQueue.enqueueAndForget(async()=>Yo(await Vl(e),s))}}(oc(d),h,c,u)}function du(e,t){return function(e,t){const n=new $t;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=jl(e);try{const e=await function(e,t){const n=Yt(e),r=hn.now(),i=t.reduce((e,t)=>e.add(t.key),_i());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=vi(),l=_i();return n.cs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=$i(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new ts(e.key,t,Sr(t.value.mapValue),Hi.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:wi(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new zn(un)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await _l(r,e.changes),await To(r.remoteStore)}catch(e){const t=zo(e,"Failed to persist write");n.reject(t)}}(await Ul(e),t,n)),n.promise}(oc(e),t)}function hu(e,t,n){const r=n.docs.get(t._key),i=new su(e);return new eu(e,i,t._key,r,new Zc(n.hasPendingWrites,n.fromCache),t.converter)}function fu(){return new Ec("serverTimestamp")}function gu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kc("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Vt=e}(ut),st(new J("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new ac(new nn(e.getProvider("auth-internal")),new on(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xt(Jt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rr(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ft(Ft,"4.7.3",e),ft(Ft,"4.7.3","esm2017")}();function pu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function mu(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vu=mu,yu=new V("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bu=new ae("@firebase/auth");function wu(e){if(bu.logLevel<=te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bu.error("Auth (".concat(ut,"): ").concat(e),...n)}}function xu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw _u(e,...n)}function Nu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _u(e,...n)}function Su(e,t,n){const r=Object.assign(Object.assign({},vu()),{[t]:n});return new V("auth","Firebase",r).create(t,{appName:e.name})}function Eu(e){return Su(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ku(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&xu(e,"argument-error"),Su(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function _u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return yu.create(e,...n)}function Tu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw _u(t,...r)}}function Iu(e){const t="INTERNAL ASSERTION FAILED: "+e;throw wu(t),new Error(t)}function Cu(e,t){e||Iu(t)}function ju(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Au(){return"http:"===Pu()||"https:"===Pu()}function Pu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ru(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Au()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Du{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cu(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(L())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Ru()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ou(e,t){Cu(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Lu{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Iu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Iu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Iu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fu=new Du(3e4,6e4);function Uu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Vu(e,t,n,r){return zu(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=G(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Lu.fetch()(Bu(e,e.config.apiHost,n,a),l)})}async function zu(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mu),t);try{const t=new Wu(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Hu(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Hu(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Hu(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Hu(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Su(e,o,a);xu(e,o)}}catch(i){if(i instanceof U)throw i;xu(e,"network-request-failed",{message:String(i)})}}async function qu(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Vu(e,t,n,r,i);return"mfaPendingCredential"in s&&xu(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Bu(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ou(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Gu(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wu{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Nu(this.auth,"network-request-failed")),Fu.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hu(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nu(e,t,r);return i.customData._tokenResponse=n,i}function Ku(e){return void 0!==e&&void 0!==e.enterprise}class Qu{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Gu(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Yu(e,t){return Vu(e,"GET","/v2/recaptchaConfig",Uu(e,t))}async function Ju(e,t){return Vu(e,"POST","/v1/accounts:lookup",t)}function Xu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function $u(e){return 1e3*Number(e)}function Zu(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return wu("JWT malformed, contained fewer than 3 sections"),null;try{const e=C(n);return e?JSON.parse(e):(wu("Failed to decode base64 JWT payload"),null)}catch(i){return wu("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function ed(e){const t=Zu(e);return Tu(t,"internal-error"),Tu("undefined"!==typeof t.exp,"internal-error"),Tu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function td(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof U&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class nd{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class rd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function id(e){var t;const n=e.auth,r=await e.getIdToken(),i=await td(e,Ju(n,{idToken:r}));Tu(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ad(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new rd(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}async function sd(e){const t=Y(e);await id(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ad(e){return e.map(e=>{var{providerId:t}=e,n=pu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class od{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tu(e.idToken,"internal-error"),Tu("undefined"!==typeof e.idToken,"internal-error"),Tu("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ed(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Tu(0!==e.length,"internal-error");const t=ed(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Tu(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await zu(e,{},async()=>{const n=G({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Bu(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Lu.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new od;return n&&(Tu("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Tu("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Tu("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new od,this.toJSON())}_performRefresh(){return Iu("not implemented")}}function ld(e,t){Tu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class cd{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=pu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await td(this,this.stsTokenManager.getToken(this.auth,e));return Tu(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Y(e),r=await n.getIdToken(t),i=Zu(r);Tu(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xu($u(i.auth_time)),issuedAtTime:Xu($u(i.iat)),expirationTime:Xu($u(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return sd(this)}_assign(e){this!==e&&(Tu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Tu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await id(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ot(this.auth.app))return Promise.reject(Eu(this.auth));const e=await this.getIdToken();return await td(this,async function(e,t){return Vu(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:N}=t;Tu(y&&N,e,"internal-error");const S=od.fromJSON(this.name,N);Tu("string"===typeof y,e,"internal-error"),ld(u,e.name),ld(d,e.name),Tu("boolean"===typeof b,e,"internal-error"),Tu("boolean"===typeof w,e,"internal-error"),ld(h,e.name),ld(f,e.name),ld(g,e.name),ld(p,e.name),ld(m,e.name),ld(v,e.name);const E=new cd({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:g,stsTokenManager:S,createdAt:m,lastLoginAt:v});return x&&Array.isArray(x)&&(E.providerData=x.map(e=>Object.assign({},e))),p&&(E._redirectEventId=p),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new od;r.updateFromServerResponse(t);const i=new cd({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await id(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Tu(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ad(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new od;a.updateFromIdToken(n);const o=new cd({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new rd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const ud=new Map;function dd(e){Cu(e instanceof Function,"Expected a class definition");let t=ud.get(e);return t?(Cu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ud.set(e,t),t)}class hd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hd.type="NONE";const fd=hd;function gd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class pd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=gd(this.userKey,r.apiKey,i),this.fullPersistenceKey=gd("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?cd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new pd(dd(fd),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||dd(fd);const s=gd(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=cd._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new pd(i,e,n)):new pd(i,e,n)}}function md(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Nd(t))return"Blackberry";if(Sd(t))return"Webos";if(yd(t))return"Safari";if((t.includes("chrome/")||bd(t))&&!t.includes("edge/"))return"Chrome";if(xd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function vd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/firefox\//i.test(e)}function yd(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/crios\//i.test(e)}function wd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iemobile/i.test(e)}function xd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/android/i.test(e)}function Nd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/blackberry/i.test(e)}function Sd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/webos/i.test(e)}function Ed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function kd(){return function(){const e=L();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function _d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return Ed(e)||xd(e)||Sd(e)||Nd(e)||/windows phone/i.test(e)||wd(e)}function Td(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=md(L());break;case"Worker":t="".concat(md(L()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ut,"/").concat(r)}class Id{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Cd{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class jd{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pd(this),this.idTokenSubscription=new Pd(this),this.beforeStateQueue=new Id(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=dd(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await pd.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ju(this,{idToken:e}),n=await cd._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ot(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tu(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await id(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ot(this.app))return Promise.reject(Eu(this));const t=e?Y(e):null;return t&&Tu(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Tu(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ot(this.app)?Promise.reject(Eu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ot(this.app)?Promise.reject(Eu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dd(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Vu(e,"GET","/v2/passwordPolicy",Uu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Cd(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new V("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Vu(e,"POST","/v2/accounts:revokeToken",Uu(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&dd(e)||this._popupRedirectResolver;Tu(t,this,"argument-error"),this.redirectPersistenceManager=await pd.create(this,[dd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tu(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tu(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Td(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(bu.logLevel<=te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bu.warn("Auth (".concat(ut,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ad(e){return Y(e)}class Pd{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new K(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Tu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dd(e){return Rd.loadJS(e)}function Od(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ld{constructor(e){this.type="recaptcha-enterprise",this.auth=Ad(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ku(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Yu(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Qu(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Ku(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Rd.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Dd(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Md(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Ld(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Fd(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Md(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Md(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function Ud(e,t,n){const r=Ad(e);Tu(r._canInitEmulator,r,"emulator-config-failed"),Tu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Vd(t),{host:a,port:o}=function(e){const t=Vd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:zd(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:zd(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Vd(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function zd(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class qd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Iu("not implemented")}_getIdTokenResponse(e){return Iu("not implemented")}_linkToIdToken(e,t){return Iu("not implemented")}_getReauthenticationResolver(e){return Iu("not implemented")}}async function Bd(e,t){return Vu(e,"POST","/v1/accounts:signUp",t)}async function Gd(e,t){return qu(e,"POST","/v1/accounts:signInWithPassword",Uu(e,t))}async function Wd(e,t){return Vu(e,"POST","/v1/accounts:sendOobCode",Uu(e,t))}class Hd extends qd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Hd(e,t,"password")}static _fromEmailAndCode(e,t){return new Hd(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Fd(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Gd);case"emailLink":return async function(e,t){return qu(e,"POST","/v1/accounts:signInWithEmailLink",Uu(e,t))}(e,{email:this._email,oobCode:this._password});default:xu(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Fd(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bd);case"emailLink":return async function(e,t){return qu(e,"POST","/v1/accounts:signInWithEmailLink",Uu(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:xu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Kd(e,t){return qu(e,"POST","/v1/accounts:signInWithIdp",Uu(e,t))}class Qd extends qd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=pu(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Qd(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Kd(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Kd(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kd(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=G(t)}return e}}const Yd={USER_NOT_FOUND:"user-not-found"};class Jd extends qd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Jd({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Jd({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return qu(e,"POST","/v1/accounts:signInWithPhoneNumber",Uu(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await qu(e,"POST","/v1/accounts:signInWithPhoneNumber",Uu(e,t));if(n.temporaryProof)throw Hu(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return qu(e,"POST","/v1/accounts:signInWithPhoneNumber",Uu(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Yd)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Jd({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Xd{constructor(e){var t,n,r,i,s,a;const o=W(H(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Tu(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=W(H(e)).link,n=t?W(H(t)).deep_link_id:null,r=W(H(e)).deep_link_id;return(r?W(H(r)).link:null)||r||n||t||e}(e);try{return new Xd(t)}catch(n){return null}}}class $d{constructor(){this.providerId=$d.PROVIDER_ID}static credential(e,t){return Hd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Xd.parseLink(t);return Tu(n,"argument-error"),Hd._fromEmailAndCode(e,n.code,n.tenantId)}}$d.PROVIDER_ID="password",$d.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$d.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Zd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class eh extends Zd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class th extends eh{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Tu("providerId"in t&&"signInMethod"in t,"argument-error"),Qd._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Tu(e.idToken||e.accessToken,"argument-error"),Qd._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return th.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return th.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new th(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(l){return null}}}class nh extends eh{constructor(){super("facebook.com")}static credential(e){return Qd._fromParams({providerId:nh.PROVIDER_ID,signInMethod:nh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nh.credentialFromTaggedObject(e)}static credentialFromError(e){return nh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nh.credential(t.oauthAccessToken)}catch(n){return null}}}nh.FACEBOOK_SIGN_IN_METHOD="facebook.com",nh.PROVIDER_ID="facebook.com";class rh extends eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qd._fromParams({providerId:rh.PROVIDER_ID,signInMethod:rh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rh.credentialFromTaggedObject(e)}static credentialFromError(e){return rh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return rh.credential(n,r)}catch(i){return null}}}rh.GOOGLE_SIGN_IN_METHOD="google.com",rh.PROVIDER_ID="google.com";class ih extends eh{constructor(){super("github.com")}static credential(e){return Qd._fromParams({providerId:ih.PROVIDER_ID,signInMethod:ih.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ih.credentialFromTaggedObject(e)}static credentialFromError(e){return ih.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ih.credential(t.oauthAccessToken)}catch(n){return null}}}ih.GITHUB_SIGN_IN_METHOD="github.com",ih.PROVIDER_ID="github.com";class sh extends eh{constructor(){super("twitter.com")}static credential(e,t){return Qd._fromParams({providerId:sh.PROVIDER_ID,signInMethod:sh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return sh.credentialFromTaggedObject(e)}static credentialFromError(e){return sh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return sh.credential(n,r)}catch(i){return null}}}async function ah(e,t){return qu(e,"POST","/v1/accounts:signUp",Uu(e,t))}sh.TWITTER_SIGN_IN_METHOD="twitter.com",sh.PROVIDER_ID="twitter.com";class oh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await cd._fromIdTokenResponse(e,n,r),s=lh(n);return new oh({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=lh(n);return new oh({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function lh(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ch extends U{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ch(e,t,n,r)}}function uh(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ch._fromErrorAndOperation(e,n,t,r);throw n})}async function dh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await td(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return oh._forOperation(e,"link",r)}async function hh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ot(r.app))return Promise.reject(Eu(r));const i="reauthenticate";try{const s=await td(e,uh(r,i,t,e),n);Tu(s.idToken,r,"internal-error");const a=Zu(s.idToken);Tu(a,r,"internal-error");const{sub:o}=a;return Tu(e.uid===o,r,"user-mismatch"),oh._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&xu(r,"user-mismatch"),s}}async function fh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ot(e.app))return Promise.reject(Eu(e));const r="signIn",i=await uh(e,r,t),s=await oh._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function gh(e,t){return fh(Ad(e),t)}function ph(e,t,n){var r;Tu((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Tu("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Tu(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Tu(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function mh(e){const t=Ad(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function vh(e,t){const n=Y(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ph(n.auth,r,t);const{email:i}=await async function(e,t){return Wd(e,t)}(n.auth,r);i!==e.email&&await e.reload()}new WeakMap;const yh="__sak";class bh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class wh extends bh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_d(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);kd()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wh.type="LOCAL";const xh=wh;class Nh extends bh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Nh.type="SESSION";const Sh=Nh;class Eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Eh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function kh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Eh.receivers=[];class _h{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=kh("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Th(){return window}function Ih(){return"undefined"!==typeof Th().WorkerGlobalScope&&"function"===typeof Th().importScripts}const Ch="firebaseLocalStorageDb",jh="firebaseLocalStorage",Ah="fbase_key";class Ph{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rh(e,t){return e.transaction([jh],t?"readwrite":"readonly").objectStore(jh)}function Dh(){const e=indexedDB.open(Ch,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(jh,{keyPath:Ah})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(jh)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ch);return new Ph(e).toPromise()}(),t(await Dh()))})})}async function Oh(e,t,n){const r=Rh(e,!0).put({[Ah]:t,value:n});return new Ph(r).toPromise()}function Lh(e,t){const n=Rh(e,!0).delete(t);return new Ph(n).toPromise()}class Mh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Dh()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ih()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(Ih()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new _h(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dh();return await Oh(e,yh,"1"),await Lh(e,yh),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Oh(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Rh(e,!1).get(t),r=await new Ph(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Rh(e,!1).getAll();return new Ph(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Mh.type="LOCAL";const Fh=Mh;Od("rcb"),new Du(3e4,6e4);const Uh="recaptcha";async function Vh(e,t,n){var r;const i=await n.verify();try{let s;if(Tu("string"===typeof i,e,"argument-error"),Tu(n.type===Uh,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Tu("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Vu(e,"POST","/v2/accounts/mfaEnrollment:start",Uu(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Tu("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Tu(n,e,"missing-multi-factor-info");const a=await function(e,t){return Vu(e,"POST","/v2/accounts/mfaSignIn:start",Uu(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Vu(e,"POST","/v1/accounts:sendVerificationCode",Uu(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class zh{constructor(e){this.providerId=zh.PROVIDER_ID,this.auth=Ad(e)}verifyPhoneNumber(e,t){return Vh(this.auth,e,Y(t))}static credential(e,t){return Jd._fromVerification(e,t)}static credentialFromResult(e){const t=e;return zh.credentialFromTaggedObject(t)}static credentialFromError(e){return zh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Jd._fromTokenResponse(n,r):null}}function qh(e,t){return t?dd(t):(Tu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}zh.PROVIDER_ID="phone",zh.PHONE_SIGN_IN_METHOD="phone";class Bh extends qd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gh(e){return fh(e.auth,new Bh(e),e.bypassAuthState)}function Wh(e){const{auth:t,user:n}=e;return Tu(n,t,"internal-error"),hh(n,new Bh(e),e.bypassAuthState)}async function Hh(e){const{auth:t,user:n}=e;return Tu(n,t,"internal-error"),dh(n,new Bh(e),e.bypassAuthState)}class Kh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gh;case"linkViaPopup":case"linkViaRedirect":return Hh;case"reauthViaPopup":case"reauthViaRedirect":return Wh;default:xu(this.auth,"internal-error")}}resolve(e){Cu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qh=new Du(2e3,1e4);async function Yh(e,t,n){if(ot(e.app))return Promise.reject(Nu(e,"operation-not-supported-in-this-environment"));const r=Ad(e);ku(e,t,Zd);const i=qh(r,n);return new Jh(r,"signInViaPopup",t,i).executeNotNull()}class Jh extends Kh{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Jh.currentPopupAction&&Jh.currentPopupAction.cancel(),Jh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tu(e,this.auth,"internal-error"),e}async onExecution(){Cu(1===this.filter.length,"Popup operations only handle one event");const e=kh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Nu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Nu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nu(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Qh.get())};e()}}Jh.currentPopupAction=null;const Xh=new Map;class $h extends Kh{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=tf(t),r=ef(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Zh(e,t){Xh.set(e._key(),t)}function ef(e){return dd(e._redirectPersistence)}function tf(e){return gd("pendingRedirect",e.config.apiKey,e.name)}async function nf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ot(e.app))return Promise.reject(Eu(e));const r=Ad(e),i=qh(r,t),s=new $h(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class rf{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return af(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!af(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Nu(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sf(e))}saveEventToCache(e){this.cachedEventUids.add(sf(e)),this.lastProcessedEventTime=Date.now()}}function sf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function af(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const of=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lf=/^https?/;async function cf(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Vu(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(uf(r))return}catch(n){}xu(e,"unauthorized-domain")}function uf(e){const t=ju(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!lf.test(n))return!1;if(of.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const df=new Du(3e4,6e4);function hf(){const e=Th().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ff(e){return new Promise((t,n)=>{var r,i,s;function a(){hf(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hf(),n(Nu(e,"network-request-failed"))},timeout:df.get()})}if(null===(i=null===(r=Th().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Th().gapi)||void 0===s?void 0:s.load)){const t=Od("iframefcb");return Th()[t]=()=>{gapi.load?a():n(Nu(e,"network-request-failed"))},Dd("".concat(Rd.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw gf=null,e})}let gf=null;const pf=new Du(5e3,15e3),mf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yf(e){const t=e.config;Tu(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ou(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ut},i=vf.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(G(r).slice(1))}async function bf(e){const t=await function(e){return gf=gf||ff(e),gf}(e),n=Th().gapi;return Tu(n,e,"internal-error"),t.open({where:document.body,url:yf(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mf,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Nu(e,"network-request-failed"),s=Th().setTimeout(()=>{r(i)},pf.get());function a(){Th().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const wf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Nf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},wf),{width:r.toString(),height:i.toString(),top:s,left:a}),c=L().toLowerCase();n&&(o=bd(c)?"_blank":n),vd(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Ed(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new xf(null);const d=window.open(t||"",o,u);Tu(d,e,"popup-blocked");try{d.focus()}catch(h){}return new xf(d)}const Sf="__/auth/handler",Ef="emulator/auth/handler",kf=encodeURIComponent("fac");async function _f(e,t,n,r,i,s){Tu(e.config.authDomain,e,"auth-domain-config-required"),Tu(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ut,eventId:i};if(t instanceof Zd){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof eh){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(kf,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Sf);return Ou(t,Ef)}(e),"?").concat(G(o).slice(1)).concat(c)}const Tf="webStorageSupport";const If=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sh,this._completeRedirectFn=nf,this._overrideRedirectResult=Zh}async _openPopup(e,t,n,r){var i;Cu(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Nf(e,await _f(e,t,n,ju(),r),kh())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Th().location.href=e}(await _f(e,t,n,ju(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Cu(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await bf(e),n=new rf(e);return t.register("authEvent",t=>{Tu(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tf,{type:Tf},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Tf];void 0!==i&&t(!!i),xu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cf(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _d()||yd()||Ed()}};var Cf="@firebase/auth",jf="1.7.9";class Af{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Tu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Pf=D("authIdTokenMaxAge")||300;let Rf=null;var Df;Rd={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Nu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Df="Browser",st(new J("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Tu(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Df,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Td(Df)},c=new jd(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dd);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),st(new J("auth-internal",e=>(e=>new Af(e))(Ad(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ft(Cf,jf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Df)),ft(Cf,jf,"esm2017");var Of=n(151);const Lf=dt({apiKey:"AIzaSyC3kQTbaNNYojEIx1jaU9p0C8K4ue7NFIs",authDomain:"gigwave-397a4.firebaseapp.com",projectId:"gigwave-397a4",storageBucket:"gigwave-397a4.firebasestorage.app",messagingSenderId:"253503195277",appId:"1:253503195277:web:c6c109ccee6fdbd9c57ac4"}),Mf=function(e,t){const n="string"==typeof e?e:t||"(default)",r=at("object"==typeof e?e:ht(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=P(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&$l(r,...e)}return r}(Lf),Ff=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht();const t=at(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=at(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(q(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;xu(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:If,persistence:[Fh,xh,Sh]}),r=D("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Pf)return;const r=null===t||void 0===t?void 0:t.token;Rf!==r&&(Rf=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Y(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Y(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=P("auth");return s&&Ud(n,"http://".concat(s)),n}(Lf),Uf=(e,t)=>1e3*(0,Of.distanceBetween)([e.lat,e.lng],[t.lat,t.lng]),Vf=()=>new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},e=>t(e),{enableHighAccuracy:!0,timeout:1e4}):t(new Error("Geolocation not supported"))}),zf=async()=>{try{await function(e){return Y(e).signOut()}(Ff)}catch(e){throw console.error("Sign-out error:",e),e}},qf=async(e,t)=>{try{console.log("\ud83c\udfb8 Creating live gig..."),console.log("\ud83d\udccd Location:",e.location);const n=rc(nc(Mf,"liveGigs")),r=(0,Of.geohashForLocation)([e.location.lat,e.location.lng]);console.log("\ud83d\uddfa\ufe0f Generated geohash:",r);const i=new Date,s=new Date(i.getTime()+18e6),a=o(o({},e),{},{artistId:t,geohash:r,location:new hc(e.location.lat,e.location.lng),status:e.status||"live",startTime:i,scheduledEndTime:s,votes:{},voteTimestamps:{},comments:[],donations:[],playedSongs:[]});return console.log("\ud83d\udcbe Saving gig to Firebase:",a),console.log("\u23f0 Scheduled end time:",s),await ou(n,a),console.log("\u2705 Gig created with ID:",n.id),n.id}catch(n){throw console.error("\u274c Error creating gig:",n),n}},Bf=async e=>{console.log("\u23f9\ufe0f Ending gig:",e);const t=rc(Mf,"liveGigs",e);await lu(t,{status:"ended",endTime:fu()}),console.log("\u2705 Gig ended")},Gf=async(e,t)=>{try{const n=await function(e,t,n){return ot(e.app)?Promise.reject(Eu(e)):gh(Y(e),$d.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&mh(e),t})}(Ff,e,t);return console.log("\u2705 Signed in with email:",n.user.email),n.user}catch(n){throw console.error("\u274c Email sign-in error:",n),n}},Wf=async(e,t)=>{try{const n=await async function(e,t,n){if(ot(e.app))return Promise.reject(Eu(e));const r=Ad(e),i=Fd(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ah),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&mh(e),t}),a=await oh._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(Ff,e,t);return await(async e=>{const t=rc(Mf,"users",e.uid);(await iu(t)).exists()||await ou(t,{uid:e.uid,email:e.email,displayName:e.displayName||"Anonymous",photoURL:e.photoURL||null,type:"audience",createdAt:fu()})})(n.user),console.log("\u2705 Signed up with email:",n.user.email),n.user}catch(n){throw console.error("\u274c Email sign-up error:",n),n}},Hf=async e=>{try{console.log("\ud83d\udd0d Checking for active live gigs for artist:",e);const t=Gc(nc(Mf,"liveGigs"),Hc("artistId","==",e),Hc("status","==","live")),n=await au(t);if(!n.empty){const e=n.docs[0],t=o({id:e.id},e.data());return console.log("\u2705 Active live gig found:",t.venueName),t}return console.log("\u2705 No active live gigs found"),null}catch(t){return console.error("\u274c Error checking active gigs:",t),null}},Kf=async e=>{try{const t=rc(Mf,"userProfiles",e),n=await iu(t);return n.exists()?o({id:n.id},n.data()):null}catch(t){throw console.error("\u274c Error getting profile:",t),t}},Qf=async()=>{try{const e=Ff.currentUser;return e?(await sd(e),console.log("\ud83d\udd04 Email verification status:",e.emailVerified),e.emailVerified):(console.log("\u26a0\ufe0f No user logged in"),!1)}catch(e){return console.error("\u274c Error checking verification:",e),("auth/user-token-expired"===e.code||"auth/invalid-user-token"===e.code)&&(console.log("\u26a0\ufe0f User session expired"),!1)}},Yf=async(e,t)=>{try{const n=rc(Mf,"artistData",e);await ou(n,{masterSongs:t,updatedAt:fu()},{merge:!0}),console.log("\u2705 Master playlist saved to Firebase:",t.length,"songs")}catch(n){throw console.error("\u274c Error saving master playlist:",n),n}},Jf=async(e,t)=>{try{const n=rc(Mf,"artistData",e);await ou(n,{gigPlaylists:t,updatedAt:fu()},{merge:!0}),console.log("\u2705 Gig playlists saved to Firebase:",t.length,"playlists")}catch(n){throw console.error("\u274c Error saving gig playlists:",n),n}},Xf=e=>{let{socialMedia:t,artistName:n}=e;if(!t||!Object.values(t).some(e=>e))return null;return(0,S.jsxs)("div",{className:"space-y-3",children:[(0,S.jsxs)("p",{className:"text-electric font-bold text-sm uppercase tracking-wider",children:["\ud83d\udd17 Follow ",n]}),(0,S.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"instagram",icon:"\ud83d\udcf7",name:"Instagram",color:"from-purple-500 to-pink-500"},{key:"facebook",icon:"\ud83d\udc4d",name:"Facebook",color:"from-blue-600 to-blue-500"},{key:"spotify",icon:"\ud83c\udfb5",name:"Spotify",color:"from-green-600 to-green-500"},{key:"youtube",icon:"\ud83d\udcfa",name:"YouTube",color:"from-red-600 to-red-500"},{key:"twitter",icon:"\ud83d\udc26",name:"Twitter",color:"from-sky-500 to-blue-500"},{key:"tiktok",icon:"\ud83c\udfac",name:"TikTok",color:"from-black to-pink-500"},{key:"soundcloud",icon:"\ud83c\udfa7",name:"SoundCloud",color:"from-orange-600 to-orange-500"}].map(e=>{const n=((e,t)=>{if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))return t;switch(e){case"instagram":return"https://instagram.com/".concat(t.replace("@",""));case"facebook":return t.includes("facebook.com")?t:"https://facebook.com/".concat(t);case"twitter":return"https://twitter.com/".concat(t.replace("@",""));case"youtube":return t.includes("youtube.com")?t:"https://youtube.com/".concat(t);case"spotify":return t.includes("spotify.com")?t:"https://open.spotify.com/artist/".concat(t);case"tiktok":return"https://tiktok.com/@".concat(t.replace("@",""));case"soundcloud":return"https://soundcloud.com/".concat(t);default:return t}})(e.key,t[e.key]);return n?(0,S.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gradient-to-r ".concat(e.color," hover:opacity-80 text-white rounded-lg font-bold text-sm transition-all hover:scale-105 flex items-center gap-2"),children:[(0,S.jsx)("span",{children:e.icon}),(0,S.jsx)("span",{children:e.name})]},e.key):null})})]})};function $f(){const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(!1),[c,u]=(0,e.useState)(""),[d,k]=(0,e.useState)("default"),[_,T]=(0,e.useState)(!1),[I,C]=(0,e.useState)("signin"),[j,A]=(0,e.useState)(""),[P,R]=(0,e.useState)(""),[D,O]=(0,e.useState)(""),[L,M]=(0,e.useState)("audience"),[F,U]=(0,e.useState)("discover"),[V,z]=(0,e.useState)("master"),[q,B]=(0,e.useState)(null),[G,W]=(0,e.useState)([]),[H,K]=(0,e.useState)(!1),[Q,J]=(0,e.useState)("all"),[X,$]=(0,e.useState)(""),[Z,ee]=(0,e.useState)([]),[te,ne]=(0,e.useState)([]),[re,ie]=(0,e.useState)([]),[se,ae]=(0,e.useState)([]),[oe,le]=(0,e.useState)(!1),[ce,ue]=(0,e.useState)(null),[de,he]=(0,e.useState)(!1),[fe,ge]=(0,e.useState)(null),[pe,me]=(0,e.useState)(""),[ve,ye]=(0,e.useState)([]),[be,we]=(0,e.useState)(!1),[xe,Ne]=(0,e.useState)(!1),[Se,Ee]=(0,e.useState)(0),[ke,_e]=(0,e.useState)(!1),[Te,Ie]=(0,e.useState)(!1),[Ce,je]=(0,e.useState)(!1),[Ae,Pe]=(0,e.useState)(null),[Re,De]=(0,e.useState)({votes:{},comments:[],donations:[],queuedSongs:[],currentSong:null,playedSongs:[]}),[Oe,Le]=(0,e.useState)(null),[Me,Fe]=(0,e.useState)(!1),[Ue,Ve]=(0,e.useState)("queue"),[ze,qe]=(0,e.useState)(null),[Be,Ge]=(0,e.useState)(!1),[We,He]=(0,e.useState)([]),[Ke,Qe]=(0,e.useState)(!1),[Ye,Je]=(0,e.useState)(!1),[Xe,$e]=(0,e.useState)(!1),[Ze,et]=(0,e.useState)(!1),[tt,nt]=(0,e.useState)(!1),[rt,it]=(0,e.useState)(!1),[st,at]=(0,e.useState)(null),[ot,lt]=(0,e.useState)(""),[ct,ut]=(0,e.useState)(!0),[dt,ht]=(0,e.useState)(!1),[ft,gt]=(0,e.useState)(0),[pt,mt]=(0,e.useState)(null),[vt,yt]=(0,e.useState)(null),[bt,wt]=(0,e.useState)([]),[xt,Nt]=(0,e.useState)(null),[St,Et]=(0,e.useState)(!1),[kt,_t]=(0,e.useState)(1),[Tt,It]=(0,e.useState)({artistName:"",fullName:"",bio:"",profilePhoto:"",genre:"",location:"",socialMedia:{instagram:"",facebook:"",youtube:"",spotify:"",twitter:"",tiktok:"",soundcloud:""}}),[Ct,jt]=(0,e.useState)(!1),[At,Pt]=(0,e.useState)(!1),Rt=e=>{if("ended"===e.status)return"ended";if(e.manuallyEnded)return"ended";const t=new Date,n=e.gigDate||e.date,r=e.gigTime||e.time;if(!n||!r)return e.status||"upcoming";const i=new Date("".concat(n,"T").concat(r)),s=(t-i)/36e5;return"live"===e.status?s>5&&!e.timeExtended?"ended":"live":t<i?"upcoming":s>=0&&s<=5?"checkVenue":s>5?"cancelled":"upcoming"};(0,e.useEffect)(()=>{document.body.style.backgroundImage="url(".concat(l,")"),document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundRepeat="no-repeat";const e=document.createElement("div");return e.id="bg-overlay",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.01);\n      z-index: -1;\n      pointer-events: none;\n    ",document.body.appendChild(e),()=>{document.body.style.backgroundImage="";const e=document.getElementById("bg-overlay");e&&e.remove()}},[]),(0,e.useEffect)(()=>{console.log("\ud83d\udd04 useEffect RUNNING - mode:",F);const e=localStorage.getItem("GigWave_mode");e&&!F&&(console.log("\ud83d\udce5 Restoring saved mode:",e),U(e));const t=function(e,t,n,r){return Y(e).onAuthStateChanged(t,n,r)}(Ff,async e=>{if(console.log("\ud83d\udc64 Auth state changed:",e?e.email:"No user"),n(e),e){jt(e.emailVerified),console.log("\ud83d\udce7 Email verified:",e.emailVerified);try{console.log("\ud83d\udce5 Loading profile for UID:",e.uid);const t=await Kf(e.uid);console.log("\ud83d\udce6 Profile loaded:",t),Nt(t),console.log("\ud83d\udd0d Checking for active live gig...");const n=await Hf(e.uid);if(n)console.log("\ud83c\udfb8 ACTIVE LIVE GIG FOUND:",n.venueName),Pe(n),U("live"),localStorage.setItem("GigWave_live_".concat(e.uid),JSON.stringify(n)),localStorage.setItem("GigWave_mode","live"),console.log("\u2705 Artist locked into live mode");else{console.log("\u2705 No active live gig found"),console.log("\ud83d\udd0d Checking if profile is complete...");const t=await(async e=>{try{const t=await Kf(e);if(console.log("\ud83d\udd0d isProfileComplete - profile:",t),!t)return console.log("\ud83d\udd0d isProfileComplete - No profile, returning false"),!1;const n={artistName:!!t.artistName,fullName:!!t.fullName,bio:!!t.bio,bioLength:t.bio&&t.bio.length>=50,genre:!!t.genre,location:!!t.location};console.log("\ud83d\udd0d isProfileComplete - checks:",n);const r=!!(t.artistName&&t.fullName&&t.bio&&t.bio.length>=50&&t.genre&&t.location);return console.log("\ud83d\udd0d isProfileComplete - result:",r),r}catch(t){return console.error("\u274c Error checking profile:",t),!1}})(e.uid);console.log("\u2705 Profile complete?",t),console.log("\ud83c\udfaf Condition check:"),console.log("   - !complete:",!t),console.log('   - mode === "artist":',"artist"===F),console.log("   - Result:",!t&&"artist"===F),t||"artist"!==F?console.log("\u274c NOT showing profile setup modal"):(console.log("\ud83c\udfb8 \u2705 SHOWING PROFILE SETUP MODAL"),Et(!0))}}catch(t){console.error("\u274c Error loading profile:",t)}}else console.log("\ud83d\udc64 No user - clearing profile"),Nt(null),Pe(null),U("discover");i(!1),console.log("\u2705 Auth loading complete")});return()=>{console.log("\ud83e\uddf9 Cleaning up auth listener"),t()}},[F]),(0,e.useEffect)(()=>{if(St&&t&&!Ct){const e=setInterval(async()=>{console.log("\ud83d\udd04 Checking email verification status...");await Qf()&&(jt(!0),console.log("\u2705 Email verified!"),alert("\u2705 Email verified! You can now complete your profile."),clearInterval(e))},5e3);return()=>clearInterval(e)}},[St,t,Ct]),(0,e.useEffect)(()=>{F&&(localStorage.setItem("GigWave_mode",F),console.log("\ud83d\udcbe Saved mode to localStorage:",F))},[F]),(0,e.useEffect)(()=>{if(null===Ae||void 0===Ae||!Ae.id)return;const e=((e,t)=>uu(rc(Mf,"liveGigs",e),e=>{if(e.exists()){const n=e.data(),r=e=>{if(!e)return e;if(null!==e&&void 0!==e&&e.toDate&&"function"===typeof e.toDate)return e.toDate();if(Array.isArray(e))return e.map(e=>r(e));if("object"===typeof e){const t={};for(const[n,i]of Object.entries(e))t[n]=r(i);return t}return e},i=r(n);console.log("\ud83d\udce1 Live gig data updated safely"),t(o({id:e.id},i))}},e=>{console.error("\u274c Error listening to live gig:",e)}))(Ae.id,async e=>{console.log("\ud83c\udfb5 Live gig update received"),console.log("\ud83d\udc64 Current User:",null===t||void 0===t?void 0:t.uid),console.log("\ud83c\udfb8 Artist ID:",e.artistId),De({votes:e.votes||{},comments:e.comments||[],donations:e.donations||[],queuedSongs:e.queuedSongs||[],masterPlaylist:e.masterPlaylist||[],currentSong:e.currentSong||null,playedSongs:e.playedSongs||[],scheduledEndTime:e.scheduledEndTime||null,songRequests:e.songRequests||[],requestsEnabled:!1!==e.requestsEnabled,jukeboxMode:e.jukeboxMode||!1,jukeboxPrice:e.jukeboxPrice||0,maxQueueSize:e.maxQueueSize||20,lastVoteTime:e.lastVoteTime||{},audienceTracking:e.audienceTracking||{totalJoins:0,currentlyActive:0,joinedUsers:{}}}),(null===t||void 0===t?void 0:t.uid)===e.artistId?(console.log("\u2705 Artist viewing - triggering swap check"),await(async(e,t)=>{try{console.log("\ud83d\udd04 Checking for song swaps...");const n=t.queuedSongs||[],r=t.masterPlaylist||[],i=t.votes||{},s=t.playedSongs||[],a=n.filter(e=>!s.includes(e.id));if(0===a.length)return void console.log("\u26a0\ufe0f No unplayed gig songs to swap");const o=n.map(e=>e.id),l=r.filter(e=>!o.includes(e.id));if(0===l.length)return void console.log("\u26a0\ufe0f No master songs available for swap");const c=a.reduce((e,t)=>{const n=i[Math.floor(e.id)]||0;return(i[Math.floor(t.id)]||0)<n?t:e}),u=i[Math.floor(c.id)]||0;console.log("\ud83d\udcca Lowest gig song: ".concat(c.title," with ").concat(u," votes"));const d=l.reduce((e,t)=>{const n=i[Math.floor(null===e||void 0===e?void 0:e.id)]||0;return(i[Math.floor(t.id)]||0)>n?t:e},l[0]),h=i[Math.floor(d.id)]||0;if(console.log("\ud83d\udcca Highest master song: ".concat(d.title," with ").concat(h," votes")),h>u){console.log("\ud83d\udd04 SWAPPING: ".concat(d.title," (").concat(h,") replaces ").concat(c.title," (").concat(u,")"));const t=n.filter(e=>e.id!==c.id).concat([d]).sort((e,t)=>{const n=i[Math.floor(e.id)]||0;return(i[Math.floor(t.id)]||0)-n}),r=rc(Mf,"liveGigs",e);return await lu(r,{queuedSongs:t}),console.log("\u2705 Swap completed!"),!0}return console.log("\u2705 No swap needed"),!1}catch(n){return console.error("\u274c Error in checkAndSwapSongs:",n),!1}})(Ae.id,e)):console.log("\u274c Not artist - skipping swap")});return()=>e()},[null===Ae||void 0===Ae?void 0:Ae.id,t]),(0,e.useEffect)(()=>{if(null===Ae||void 0===Ae||!Ae.id||"live"!==F||Ke)return;const e=async()=>{var e,t;if(!Re.scheduledEndTime)return;const n=Re.scheduledEndTime instanceof Date?Re.scheduledEndTime:null===(e=Re.scheduledEndTime)||void 0===e||null===(t=e.toDate)||void 0===t?void 0:t.call(e);if(!n)return;const r=n-new Date,i=Math.floor(r/6e4);if(Le(i),i<=10&&i>0&&!Me&&(Fe(!0),alert("\u26a0\ufe0f Your gig will auto-end in ".concat(i,' minutes!\n\nClick "Add 1 Hour" to extend.'))),i<=0&&"live"===F&&!Ke)try{await Kt("\u23f0 Time limit reached! Your gig has been automatically ended.",!0)}catch(s){console.error("Error auto-ending gig:",s)}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[null===Ae||void 0===Ae?void 0:Ae.id,Re.scheduledEndTime,F,Me,Ke]),(0,e.useEffect)(()=>{Vf().then(e=>B(e)).catch(e=>console.log("Location not available:",e))},[]),(0,e.useEffect)(()=>{if(!t)return;(async()=>{try{console.log("\ud83d\udce5 Loading playlists from Firebase...");const e=await(async e=>{try{const t=rc(Mf,"artistData",e),n=await iu(t);return n.exists()&&n.data().masterSongs||[]}catch(t){return console.error("\u274c Error getting master playlist:",t),[]}})(t.uid),n=await(async e=>{try{const t=rc(Mf,"artistData",e),n=await iu(t);return n.exists()&&n.data().gigPlaylists||[]}catch(t){return console.error("\u274c Error getting gig playlists:",t),[]}})(t.uid);console.log("\ud83d\udce6 From Firebase:",e.length,"songs,",n.length,"playlists");const r=localStorage.getItem("GigWave_songs_".concat(t.uid)),i=localStorage.getItem("GigWave_playlists_".concat(t.uid));console.log("\ud83d\udce6 From localStorage:",r?JSON.parse(r).length:0,"songs,",i?JSON.parse(i).length:0,"playlists");let s=e,a=n,o=!1;if(0===e.length&&r){const e=JSON.parse(r);e.length>0&&(console.log("\ud83d\udd04 Migrating master songs from localStorage to Firebase..."),s=e,o=!0)}if(0===n.length&&i){const e=JSON.parse(i);e.length>0&&(console.log("\ud83d\udd04 Migrating gig playlists from localStorage to Firebase..."),a=e,o=!0)}ne(s),ie(a),o&&(console.log("\ud83d\udcbe Saving migrated data to Firebase..."),s.length>0&&(await Yf(t.uid,s),console.log("\u2705 Master songs migrated:",s.length)),a.length>0&&(await Jf(t.uid,a),console.log("\u2705 Gig playlists migrated:",a.length)),alert("\u2705 Playlists migrated to cloud!\n\n".concat(s.length," songs\n").concat(a.length," playlists\n\nYour data will now sync across all devices."))),console.log("\u2705 Playlists loaded successfully"),_e(!0)}catch(e){console.error("\u274c Error loading playlists:",e),alert("Error loading playlists: "+e.message),_e(!0)}})()},[t]),(0,e.useEffect)(()=>{if(!t)return;console.log("\ud83d\udce1 Starting real-time playlist sync");const e=((e,t)=>uu(rc(Mf,"artistData",e),e=>{if(e.exists()){const n=e.data();t({masterSongs:n.masterSongs||[],gigPlaylists:n.gigPlaylists||[]}),console.log("\ud83d\udce1 Playlists updated from Firebase")}},e=>{console.error("\u274c Error listening to playlists:",e)}))(t.uid,e=>{console.log("\ud83d\udd04 Playlists updated from another device"),$e(!0),ne(e.masterSongs),ie(e.gigPlaylists),setTimeout(()=>$e(!1),3e3)});return()=>{console.log("\ud83d\uded1 Stopping playlist sync"),e()}},[t]),(0,e.useEffect)(()=>{if(t){const e=localStorage.getItem("GigWave_live_".concat(t.uid));if(e){const t=JSON.parse(e),n=o(o({},t),{},{startTime:t.startTime?new Date(t.startTime):null,endTime:t.endTime?new Date(t.endTime):null,voteTimestamps:void 0,comments:(t.comments||[]).map(e=>o(o({},e),{},{timestamp:e.timestamp?new Date(e.timestamp):null})),donations:(t.donations||[]).map(e=>o(o({},e),{},{timestamp:e.timestamp?new Date(e.timestamp):null}))});Pe(n),U("live"),console.log("\ud83d\udd34 Resumed live gig from localStorage (cleaned)")}}},[t]),(0,e.useEffect)(()=>{if(t){const e=localStorage.getItem("GigWave_interested_".concat(t.uid));e&&(He(JSON.parse(e)),console.log("\u2705 Loaded interested gigs from localStorage"))}},[t]),(0,e.useEffect)(()=>{t&&localStorage.setItem("GigWave_interested_".concat(t.uid),JSON.stringify(We))},[We,t]),(0,e.useEffect)(()=>{if("audience"!==F||null===Ae||void 0===Ae||!Ae.id)return;console.log("\ud83d\udd04 Starting audience auto-refresh (every 5 seconds)");const e=setInterval(async()=>{console.log("\ud83d\udd04 Auto-refreshing audience data...");try{const e=rc(Mf,"liveGigs",String(Ae.id)),t=await iu(e);if(t.exists()){const e=t.data();console.log("\u2705 Audience data refreshed"),De({votes:e.votes||{},comments:e.comments||[],donations:e.donations||[],queuedSongs:e.queuedSongs||[],masterPlaylist:e.masterPlaylist||[],currentSong:e.currentSong||null,playedSongs:e.playedSongs||[],scheduledEndTime:e.scheduledEndTime||null,songRequests:e.songRequests||[],requestsEnabled:!1!==e.requestsEnabled,jukeboxMode:e.jukeboxMode||!1,jukeboxPrice:e.jukeboxPrice||0,maxQueueSize:e.maxQueueSize||20})}}catch(e){console.error("\u274c Error refreshing audience data:",e)}},5e3);return()=>{console.log("\u23f9\ufe0f Stopping audience auto-refresh"),clearInterval(e)}},[F,null===Ae||void 0===Ae?void 0:Ae.id]),(0,e.useEffect)(()=>{if("audience"!==F||null===Ae||void 0===Ae||!Ae.id||!t)return;console.log("\ud83d\udc93 Starting audience heartbeat...");const e=async()=>{try{const e=rc(Mf,"liveGigs",String(Ae.id)),n=await iu(e);if(!n.exists())return;const r=n.data().audienceTracking||{totalJoins:0,currentlyActive:0,joinedUsers:{}},i=t.uid;if(r.joinedUsers[i]){r.joinedUsers[i].lastActive=(new Date).toISOString(),r.joinedUsers[i].isActive=!0;const t=new Date;let n=0;Object.entries(r.joinedUsers).forEach(e=>{let[i,s]=e;const a=new Date(s.lastActive);(t-a)/1e3<=60?(n++,r.joinedUsers[i].isActive=!0):r.joinedUsers[i].isActive=!1}),r.currentlyActive=n,await lu(e,{audienceTracking:r}),console.log("\ud83d\udc93 Heartbeat sent - Active:",n)}}catch(e){console.error("\u274c Heartbeat error:",e)}};e();const n=setInterval(e,3e4);return()=>{console.log("\ud83d\udc94 Stopping heartbeat"),clearInterval(n);(async()=>{try{const e=rc(Mf,"liveGigs",String(Ae.id)),n=await iu(e);if(!n.exists())return;const r=n.data().audienceTracking||{joinedUsers:{}};r.joinedUsers[t.uid]&&(r.joinedUsers[t.uid].isActive=!1,r.currentlyActive=Object.values(r.joinedUsers).filter(e=>e.isActive).length,await lu(e,{audienceTracking:r}),console.log("\ud83d\udc4b Marked as inactive"))}catch(e){console.error("\u274c Error marking inactive:",e)}})()}},[F,null===Ae||void 0===Ae?void 0:Ae.id,t]),(0,e.useEffect)(()=>{if(!t||!ke)return;if(document.hidden)return;if(Xe)return;const e=setTimeout(()=>{te.length>=0&&(console.log("\ud83d\udcbe Master songs saved to Firebase:",te.length,"songs"),Yf(t.uid,te).then(()=>console.log("\u2705 Master playlist saved to Firebase:",te.length,"songs")).catch(e=>console.error("\u274c Error saving songs:",e)))},2e3);return()=>clearTimeout(e)},[te,t,ke,Xe]),(0,e.useEffect)(()=>{if(!t||!ke)return;if(document.hidden)return;if(Xe)return;const e=setTimeout(()=>{re.length>=0&&(console.log("\ud83d\udcbe Playlists saved to Firebase:",re.length,"playlists"),Jf(t.uid,re).then(()=>console.log("\u2705 Gig playlists saved to Firebase:",re.length,"playlists")).catch(e=>console.error("\u274c Error saving playlists:",e)))},2e3);return()=>clearTimeout(e)},[re,t,ke,Xe]),(0,e.useEffect)(()=>{t&&se.length>=0&&(localStorage.setItem("GigWave_gigs_".concat(t.uid),JSON.stringify(se)),console.log("\ud83d\udcbe Gigs saved:",se.length))},[se,t]),(0,e.useEffect)(()=>{"gigs"===V&&t&&(async e=>{try{console.log("\ud83d\udd0d Checking for expired gigs...");const t=new Date,n=[],r=Gc(nc(Mf,"gigs"),Hc("artistId","==",e),Hc("status","in",["upcoming","confirmed"])),i=await au(r);for(const e of i.docs){const r=o({id:e.id},e.data());if(r.date&&r.time){const e=new Date("".concat(r.date,"T").concat(r.time));if(t>new Date(e.getTime()+18e6)){console.log("\u23f0 Auto-cancelling expired gig: ".concat(r.venueName));const e=rc(Mf,"gigs",r.id);await lu(e,{status:"cancelled",cancelReason:"Auto-cancelled: Not started within 5 hours of scheduled time",cancelledAt:t}),n.push(r.venueName)}}}return n.length>0?(console.log("\u2705 Auto-cancelled ".concat(n.length," expired gig(s):"),n),n):(console.log("\u2705 No expired gigs found"),[])}catch(t){return console.error("\u274c Error checking expired gigs:",t),[]}})(t.uid).then(e=>{e.length>0&&console.log("\u2705 Expired gigs cancelled:",e)}).catch(e=>console.error("Error checking expired gigs:",e))},[V,t]),(0,e.useEffect)(()=>{if(!t)return;console.log("\ud83d\udd04 Starting live gig polling for:",t.email);const e=async()=>{try{console.log("\ud83d\udd0d Polling Firebase for live gigs...");const e=Gc(nc(Mf,"liveGigs"),Hc("artistId","==",t.uid),Hc("status","==","live")),n=await au(e);if(console.log("\ud83d\udcca Poll result:",n.size,"live gigs found"),n.empty){console.log("\u2705 No live gigs found");localStorage.getItem("GigWave_lastLiveAlert")?(console.log("\ud83d\udd13 UNLOCKING - no live gig in Firebase"),Pe(null),U("artist"),localStorage.removeItem("GigWave_live_".concat(t.uid)),localStorage.removeItem("GigWave_lastLiveAlert"),localStorage.setItem("GigWave_mode","artist"),alert("\u2705 Live gig ended. Returning to artist dashboard.")):console.log("\u2705 Already in artist mode")}else{const e=n.docs[0],r=o({id:e.id},e.data());console.log("\ud83d\udd34 ACTIVE LIVE GIG DETECTED:",r.venueName);const i="".concat(r.id,"_").concat(r.venueName);localStorage.getItem("GigWave_lastLiveAlert")!==i?(console.log("\ud83d\udd12 LOCKING INTO LIVE MODE (first time for this gig)"),Pe(r),U("live"),localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(r)),localStorage.setItem("GigWave_mode","live"),localStorage.setItem("GigWave_lastLiveAlert",i),alert("\ud83d\udd34 LIVE GIG DETECTED\n\n".concat(r.venueName,"\n\nYou are now locked in live mode."))):(null===Ae||void 0===Ae?void 0:Ae.id)!==r.id?(console.log("\ud83d\udd04 Updating to different live gig"),Pe(r),localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(r))):console.log("\u2705 Already locked in live mode")}}catch(e){console.error("\u274c Error polling for live gigs:",e)}};e();const n=setInterval(e,5e3);return()=>{console.log("\ud83d\uded1 Stopping live gig polling"),clearInterval(n)}},[t]);const Dt=async e=>{try{"google"===e?await(async()=>{try{const e=new rh;return(await Yh(Ff,e)).user}catch(e){throw console.error("Google sign-in error:",e),e}})():"facebook"===e?await(async()=>{try{const e=new nh;return(await Yh(Ff,e)).user}catch(e){throw console.error("Facebook sign-in error:",e),e}})():"apple"===e&&await(async()=>{try{console.log("\ud83c\udf4e Initiating Apple Sign-In...");const e=new th("apple.com");e.addScope("email"),e.addScope("name");const t=await Yh(Ff,e);return console.log("\u2705 Apple Sign-In successful"),console.log("\ud83d\udc64 User:",t.user.email),t.user}catch(e){throw console.error("\u274c Apple Sign-In error:",e),e}})(),T(!1)}catch(t){console.error("Sign-in error:",t),"auth/popup-closed-by-user"===t.code?alert("\u274c Sign-in cancelled. Please try again."):"auth/popup-blocked"===t.code?alert("\u274c Popup was blocked by your browser.\n\nPlease allow popups for this site and try again."):"auth/cancelled-popup-request"===t.code?console.log("User cancelled sign-in"):"auth/network-request-failed"===t.code?alert("\u274c Network error. Please check your internet connection."):alert("\u274c Sign-in failed: "+(t.message||"Unknown error"))}};(0,e.useEffect)(()=>{if(!t)return void console.log("\u274c No user - skipping gigs sync");console.log("\ud83d\udd04 Setting up real-time gigs listener for:",t.email),console.log("\ud83d\udcf1 Current mode:",F),console.log("\ud83d\udc64 User ID:",t.uid);const e=uu(Gc(nc(Mf,"liveGigs"),Hc("artistId","==",t.uid)),{includeMetadataChanges:!1},e=>{console.log("\ud83d\udcca Real-time update received from Firebase"),console.log("\ud83d\udcf1 Device:",navigator.userAgent.substring(0,50));const n=e.docs.map(e=>o({id:e.id},e.data()));if(n.sort((e,t)=>e.gigDate!==t.gigDate?(t.gigDate||"").localeCompare(e.gigDate||""):(t.gigTime||"").localeCompare(e.gigTime||"")),console.log("\ud83d\udce6 Total gigs loaded:",n.length),n.forEach((e,t)=>{console.log("  ".concat(t+1,". ").concat(e.venueName," - ").concat(e.gigDate," at ").concat(e.gigTime," (Status: ").concat(e.status,")"))}),ae(n),t){const e={lastSync:(new Date).toISOString(),count:n.length,gigs:n};localStorage.setItem("GigWave_gigs_".concat(t.uid),JSON.stringify(e)),console.log("\ud83d\udcbe Cached to localStorage")}console.log("\u2705 Gigs state updated successfully")},e=>{console.error("\u274c Firebase listener error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),"permission-denied"===e.code?alert("Session expired. Please sign in again."):"failed-precondition"===e.code&&console.error("Index not created. Check Firebase console.")});return()=>{console.log("\ud83d\uded1 Cleaning up gigs listener"),e()}},[t]),(0,e.useEffect)(()=>{if("audience"!==F||!t||!Ae)return;(async()=>{try{const e=rc(Mf,"liveGigs",String(Ae.id)),n=await iu(e);if(n.exists()){const e=(n.data().ratings||[]).find(e=>e.userId===t.uid);e?(Ne(!0),Ee(e.artistRating),console.log("\u2705 User has already rated:",e.artistRating)):(Ne(!1),Ee(0))}}catch(e){console.error("Error checking rating:",e)}})()},[F,t,Ae]),(0,e.useEffect)(()=>{r||(t?Hf(t.uid).then(e=>{if(e)return console.log("\ud83d\udd12 ACTIVE LIVE GIG - Locking into live mode:",e.venueName),Pe(e),U("live"),localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(e)),void localStorage.setItem("GigWave_mode","live");const n=localStorage.getItem("GigWave_live_".concat(t.uid));if(n)try{const e=JSON.parse(n);Pe(e),e.artistId===t.uid?U("live"):U("audience")}catch(r){console.error("Error parsing saved live gig:",r),localStorage.removeItem("GigWave_live_".concat(t.uid))}else{const e=localStorage.getItem("GigWave_mode");U("artist"===e?"artist":"discover")}}).catch(e=>{console.error("\u274c Error checking active live gig:",e);const n=localStorage.getItem("GigWave_live_".concat(t.uid));if(n)try{const e=JSON.parse(n);Pe(e),U(e.artistId===t.uid?"live":"audience")}catch(r){localStorage.removeItem("GigWave_live_".concat(t.uid))}}):U("discover"))},[r,t]);const Ot=async()=>{try{K(!0);let t=q;if(!t)try{t=await Vf(),B(t)}catch(e){return K(!1),void(1===e.code?alert('\ud83d\udccd Location Access Required\n\nPlease enable location access to find nearby gigs:\n\n1. Click the location icon \ud83d\udd12 in your browser address bar\n2. Change "Location" to "Allow"\n3. Refresh the page and try again'):2===e.code?alert("\ud83d\udccd Location Unavailable\n\nCould not determine your location.\n\nPlease check that location services are enabled on your device."):3===e.code?alert("\ud83d\udccd Location request timed out. Please try again."):alert("\ud83d\udccd Could not get your location. Please enable location services and try again."))}const n=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.log("\ud83d\udd0d SEARCH DEBUG: Starting search..."),console.log("\ud83d\udccd User Location:",e),console.log("\ud83d\udccf Search Radius:",t,"km"),console.log("\ud83c\udfaf Status Filter:",n||"all");const r=[e.lat,e.lng],i=(0,Of.geohashQueryBounds)(r,1e3*t);console.log("\ud83d\uddfa\ufe0f Geohash bounds:",i);const s=[];for(const e of i){let t;t=n?Gc(nc(Mf,"liveGigs"),Hc("geohash",">=",e[0]),Hc("geohash","<=",e[1]),Hc("status","==",n)):Gc(nc(Mf,"liveGigs"),Hc("geohash",">=",e[0]),Hc("geohash","<=",e[1])),s.push(au(t))}console.log("\u23f3 Querying Firebase...");const a=await Promise.all(s);console.log("\ud83d\udce6 Query results:",a.map(e=>e.size));const l=[];let c=0;for(const n of a)c+=n.size,n.forEach(n=>{const r=n.data();console.log("\ud83d\udcc4 Found gig:",n.id,r);const i={lat:r.location.latitude,lng:r.location.longitude},s=Uf(e,i);console.log("\ud83d\udccf Distance:",s,"meters"),s<=1e3*t&&"ended"!==r.status&&"cancelled"!==r.status?(console.log("\u2705 Gig within range!"),l.push(o(o({id:n.id},r),{},{distance:Math.round(s)}))):console.log("\u274c Gig filtered out")});return console.log("\ud83c\udfaf Total docs found:",c),console.log("\u2705 Gigs within range:",l.length),l.sort((e,t)=>"live"===e.status&&"live"!==t.status?-1:"live"!==e.status&&"live"===t.status?1:e.distance-t.distance)}catch(r){return console.error("\u274c Error searching gigs:",r),[]}}(t,50),r=n.filter(e=>{const t=Rt(e);return["live","checkVenue","upcoming"].includes(t)});W(n),ee(n),0===r.length?alert("No active gigs found within 50km. Try again later!"):alert("\u2705 Found ".concat(r.length," active gig").concat(r.length>1?"s":""," nearby!"))}catch(t){console.error("Error searching gigs:",t),alert("Error finding gigs: "+t.message)}finally{K(!1)}},Lt=e=>{if(J(e),"all"===e)return void ee(G);const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=G.filter(t=>{if(!t.gigDate)return!0;const r=new Date(t.gigDate),i=new Date(r.getFullYear(),r.getMonth(),r.getDate());if("today"===e)return i.getTime()===n.getTime();if("tomorrow"===e){const e=new Date(n);return e.setDate(e.getDate()+1),i.getTime()===e.getTime()}if("week"===e){const e=new Date(n);return e.setDate(e.getDate()+7),i>=n&&i<=e}return!0});ee(r)},Mt=()=>{const e=prompt("Song title:");if(!e)return;const t=prompt("Artist name:"),n={id:Date.now(),title:e||"Untitled",artist:t||"Unknown",duration:"",key:""};ne([...te,n])},Ft=async()=>{if(pe.trim())try{we(!0),console.log("\ud83d\udd0d Searching iTunes for:",pe);const e=await fetch("https://itunes.apple.com/search?term=".concat(encodeURIComponent(pe),"&entity=song&limit=20"));if(!e.ok)throw new Error("iTunes search failed");const t=await e.json();if(console.log("\ud83d\udce6 iTunes results:",t.resultCount),0===t.resultCount)return alert("No songs found. Try a different search term!"),void ye([]);const n=t.results.map((e,t)=>({id:Date.now()+t,title:e.trackName,artist:e.artistName,album:e.collectionName,duration:e.trackTimeMillis?"".concat(Math.floor(e.trackTimeMillis/6e4),":").concat(String(Math.floor(e.trackTimeMillis%6e4/1e3)).padStart(2,"0")):"",artwork:e.artworkUrl100,previewUrl:e.previewUrl,itunesId:e.trackId}));ye(n),console.log("\u2705 Processed songs:",n.length)}catch(e){console.error("\u274c iTunes search error:",e),alert("Error searching iTunes: "+e.message)}finally{we(!1)}else alert("Please enter a song or artist name!")},Ut=()=>{const e={id:Date.now(),name:"New Playlist",description:"",songs:[],createdAt:new Date};ge(e),he(!0)},Vt=()=>{if(!fe.name.trim())return void alert("Please enter a playlist name!");const e=re.find(e=>e.id===fe.id);ie(e?re.map(e=>e.id===fe.id?fe:e):[...re,fe]),he(!1),ge(null)},zt=async()=>{try{je(!0);const t=await Vf();try{const e=await fetch("https://nominatim.openstreetmap.org/reverse?lat=".concat(t.lat,"&lon=").concat(t.lng,"&format=json")),n=(await e.json()).display_name||"";ue(o(o({},ce),{},{location:t,address:n})),alert("\u2705 Location captured!\n".concat(t.lat.toFixed(4),"\xb0, ").concat(t.lng.toFixed(4),"\xb0"))}catch(e){ue(o(o({},ce),{},{location:t})),alert("\u2705 Location captured!\n".concat(t.lat.toFixed(4),"\xb0, ").concat(t.lng.toFixed(4),"\xb0"))}}catch(t){alert("Error capturing location: "+t.message)}finally{je(!1)}},qt=()=>{ue({id:Date.now(),venueName:"",address:"",location:null,date:"",time:"",playlistId:null,queueSize:20,status:"upcoming"}),le(!0)},Bt=async()=>{if(!Ye)if(console.log("\ud83d\udd25 SAVE GIG CLICKED!"),console.log("\ud83d\udcdd editingGig state:",ce),console.log("\ud83c\udfe0 venueName:",ce.venueName),console.log("\ud83d\udcc5 date:",ce.date),console.log("\u23f0 time:",ce.time),console.log("\ud83d\udccd location:",ce.location),console.log("\ud83c\udfe2 address:",ce.address),ce.venueName&&ce.date&&ce.time){Je(!0);try{let e=ce.location;if(!e){if(!window.confirm("No venue location set. Use your current location?"))return void alert("Please set a venue location to save the gig!");e=await Vf()}const n=new Date("".concat(ce.date,"T").concat(ce.time)),r=216e5,i=se.some(e=>{if(e.id===ce.id)return!1;const t=new Date("".concat(e.date,"T").concat(e.time));return Math.abs(n-t)<r});if(i)return void alert("\u26a0\ufe0f You already have a gig scheduled within 6 hours of this time!\n\nPlease choose a different date or time.");let s=[],a=te;if(ce.playlistId){const e=re.find(e=>e.id===ce.playlistId);s=e&&e.songs.length>0?e.songs.map(e=>te.find(t=>t.id===e)).filter(Boolean):te}else s=te;const l={artistId:t.uid,artistName:t.displayName||"Artist",artistProfile:xt,venueName:ce.venueName,venueAddress:ce.address||"",location:e,status:"upcoming",gigDate:ce.date,gigTime:ce.time,playlistId:ce.playlistId||null,queueSize:ce.queueSize||20,queuedSongs:s.slice(0,ce.queueSize||20),masterPlaylist:a,notes:ce.notes||""};let c,u=!1;if(se.find(e=>e.id===ce.id)&&"string"===typeof ce.id&&ce.id.length>10){console.log("\ud83d\udcdd Updating existing gig:",ce.id),u=!0,c=ce.id;const e=rc(Mf,"liveGigs",c);await lu(e,l)}else console.log("\ud83c\udd95 Creating new gig"),c=await qf(l,t.uid);const d=o(o({},ce),{},{id:c,location:e,status:"upcoming",date:ce.date,time:ce.time});u?(ae(se.map(e=>e.id===ce.id?d:e)),console.log("\u2705 Gig updated in local state")):(ae([...se,d]),console.log("\u2705 New gig added to local state")),le(!1),ue(null),alert("\u2705 Gig saved successfully!")}catch(e){console.error("Error saving gig:",e),alert("Error saving gig: "+e.message)}finally{Je(!1)}}else alert("Please fill in venue name, date, and time!")},Gt=async e=>{if(window.confirm("Delete this gig permanently?"))try{const t=String(e),n=rc(Mf,"liveGigs",t);await cu(n),ae(t=>t.filter(t=>t.id!==e)),ce&&ce.id===e&&(ue(null),le(!1)),alert("\u2705 Gig deleted successfully!")}catch(t){console.error("Error deleting gig:",t),alert("\u274c Error deleting gig: "+t.message)}},Wt=async e=>{if(Ae)return alert("\u26a0\ufe0f You are already live! End your current gig first."),void U("live");if("ended"===e.status)return void alert("\u274c This gig has ended! You cannot go live with an ended gig.");const n=await Hf(t.uid);if(n&&n.id!==e.id){if(!window.confirm('\u26a0\ufe0f You already have a live gig at "'.concat(n.venueName,'".\n\n')+"You can only have one live gig at a time.\n\nWould you like to end that gig and start this one?"))return;try{await Bf(n.id),Pe(null)}catch(r){return void alert("Error ending previous gig: "+r.message)}}try{if(Ae&&Ae.gigId===e.id)return alert("\u26a0\ufe0f You are already live with this gig!"),void U("live");let n=e.location;if(!n){if(!window.confirm("No venue location set. Use your current location?"))return void alert("Please set a venue location first!");n=await Vf()}const i=e.queueSize||20;let s=[];if(e.playlistId){const t=re.find(t=>t.id===e.playlistId);t&&t.songs.length>0&&(s=t.songs.map(e=>te.find(t=>t.id===e)).filter(Boolean),console.log("\ud83d\udccb Loaded gig playlist:",s.length,"songs"))}if(0===s.length&&(s=[...te],console.log("\ud83d\udccb Using master playlist:",s.length,"songs")),s.length<i){const e=s.map(e=>e.id),t=i-s.length,n=te.filter(t=>!e.includes(t.id)).slice(0,t);s=[...s,...n],console.log("\u2705 Added",n.length,"songs from master playlist"),console.log("\u2705 Total queue size:",s.length)}s=s.slice(0,i),console.log("\ud83c\udfb5 Final queue:",s.length,"songs (limit:",i,")");const a="".concat(e.venueName,"_").concat(e.date,"_").concat(e.time).replace(/\s/g,"_"),l={artistId:t.uid,artistName:t.displayName||"Artist",artistProfile:xt,venueName:e.venueName,venueAddress:e.address||"",location:n,queuedSongs:s,maxQueueSize:i,masterPlaylist:te,status:"live",gigDate:e.date,gigTime:e.time,gigId:e.id,uniqueKey:a};let c;e.id&&"string"===typeof e.id&&e.id.length>10?(console.log("\ud83d\udcdd Updating existing gig to live:",e.id),c=await(async(e,t,n)=>{try{console.log("\ud83d\udd04 Updating gig to live:",e);const r=rc(Mf,"liveGigs",e),i=new Date,s=new Date(i.getTime()+18e6);return await lu(r,{status:"live",startTime:i,scheduledEndTime:s,queuedSongs:t,masterPlaylist:n,votes:{},voteTimestamps:{},comments:[],donations:[],playedSongs:[]}),console.log("\u2705 Gig updated to live"),console.log("\u23f0 Scheduled end time:",s),e}catch(r){throw console.error("\u274c Error updating gig:",r),r}})(e.id,s,te)):(console.log("\ud83c\udd95 Creating new live gig"),c=await qf(l,t.uid)),Pe(o(o({},l),{},{id:c})),U("live"),t&&localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(o(o({},l),{},{id:c}))),alert("\u2705 You're live at ".concat(e.venueName,"!\n\nAudience can find you by searching nearby!"))}catch(r){alert("Error: "+r.message)}},Ht=async()=>{try{await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{var n;console.log("\u23f1\ufe0f Extending gig time by ".concat(t," hour(s)"));const r=rc(Mf,"liveGigs",e),i=await iu(r);if(!i.exists())throw new Error("Gig not found");const s=(null===(n=i.data().scheduledEndTime)||void 0===n?void 0:n.toDate())||new Date(Date.now()+18e6),a=new Date(s.getTime()+60*t*60*1e3);return await lu(r,{scheduledEndTime:a}),console.log("\u2705 Gig time extended to:",a),a}catch(r){throw console.error("\u274c Error extending gig time:",r),r}}(Ae.id,1),Fe(!1),alert("\u2705 Added 1 hour to your gig!")}catch(e){alert("Error extending time: "+e.message)}},Kt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ke)console.log("\u26a0\ufe0f Already ending gig, ignoring duplicate call");else if(n||window.confirm("End this gig?")){Qe(!0);try{await Bf(Ae.id);const n=se.map(e=>e.id===Ae.gigId||e.venueName===Ae.venueName&&e.date===Ae.date?o(o({},e),{},{status:"ended"}):e);ae(n),t&&(localStorage.setItem("GigWave_gigs_".concat(t.uid),JSON.stringify(n)),console.log("\ud83d\udcbe Gig status updated to ended in localStorage")),Pe(null),U("artist"),t&&localStorage.removeItem("GigWave_live_".concat(t.uid)),alert(e||"\u2705 Gig ended! Status updated to ended.")}catch(r){alert("Error: "+r.message)}finally{Qe(!1)}}},Qt=async()=>{try{if(!Ct)return alert("\u26a0\ufe0f Please verify your email before completing your profile!\n\nCheck your inbox for the verification link."),void Pt(!0);if(!Tt.artistName||!Tt.fullName||!Tt.bio||!Tt.genre||!Tt.location)return void alert("\u26a0\ufe0f Please fill in all required fields!");if(Tt.bio.length<50)return void alert("\u26a0\ufe0f Bio must be at least 50 characters long!");await(async(e,t)=>{try{const n=rc(Mf,"userProfiles",e),r=o(o({},t),{},{updatedAt:fu(),profileComplete:!!(t.artistName&&t.fullName&&t.bio&&t.genre&&t.location)});return(await iu(n)).exists()||(r.createdAt=fu()),await ou(n,r,{merge:!0}),console.log("\u2705 Artist profile saved"),r}catch(n){throw console.error("\u274c Error saving profile:",n),n}})(t.uid,o(o({},Tt),{},{email:t.email,emailVerified:t.emailVerified}));const e=await Kf(t.uid);Nt(e),Et(!1),alert("\u2705 Profile saved successfully!")}catch(e){alert("Error saving profile: "+e.message)}},Yt=async()=>{try{if(console.log("\ud83d\udce7 Attempting to send verification email..."),!t)return void alert("\u274c No user logged in!");if(console.log("\ud83d\udc64 Current user:",t.email),console.log("\u2705 Email verified?",t.emailVerified),t.emailVerified)return alert("\u2705 Your email is already verified!"),jt(!0),void Pt(!1);const e=await(async()=>{try{const e=Ff.currentUser;if(!e)throw new Error("No user logged in. Please sign in first.");return e.emailVerified?(console.log("\u2705 Email already verified"),{success:!0,message:"Email already verified"}):(await vh(e),console.log("\ud83d\udce7 Verification email sent to:",e.email),{success:!0,message:"Verification email sent! Check your inbox."})}catch(e){if(console.error("\u274c Error sending verification:",e),"auth/too-many-requests"===e.code)throw new Error("Too many requests. Please wait a few minutes and try again.");throw new Error(e.message||"Failed to send verification email")}})();console.log("\ud83d\udce7 Send result:",e),alert(e.message||"Verification email sent! Check your inbox.")}catch(e){console.error("\u274c Error sending verification:",e),alert("Error: "+e.message)}},Jt=async()=>{try{const e=await Qf();jt(e),e?(alert("\u2705 Email verified successfully!"),Pt(!1)):alert("\u26a0\ufe0f Email not verified yet. Please check your inbox and click the verification link.")}catch(e){alert("Error: "+e.message)}},Xt=async e=>{var n;if(!t)return alert("Please sign in to vote!"),void T(!0);if(null!==(n=Re.playedSongs)&&void 0!==n&&n.includes(e))alert("\u26a0\ufe0f This song has already been played!\n\nYou can only vote for upcoming songs.");else if(Ae)try{const n=await(async(e,t,n)=>{try{const r=rc(Mf,"liveGigs",String(e),"votes","".concat(n,"_").concat(t));return(await iu(r)).exists()}catch(r){return console.error("Error checking vote:",r),!1}})(Ae.id,e,t.uid);if(n)return void alert("\u26a0\ufe0f You already voted for this song!");await(async(e,t,n)=>{try{const r=rc(Mf,"liveGigs",String(e),"votes","".concat(n,"_").concat(t));await ou(r,{userId:n,songId:t,gigId:String(e),timestamp:fu()});const i=rc(Mf,"liveGigs",String(e)),s=(await iu(i)).data(),a=(null===s||void 0===s?void 0:s.votes)||{},o=(null===s||void 0===s?void 0:s.lastVoteTime)||{},l=String(t);return o[l]=(new Date).toISOString(),await lu(i,{["votes.".concat(l)]:(a[l]||0)+1,lastVoteTime:o}),console.log("\u2705 Vote recorded with timestamp"),!0}catch(r){throw console.error("Error recording vote:",r),r}})(Ae.id,e,t.uid),alert("\u2705 Vote recorded!"),xe||ht(!0);const r=rc(Mf,"liveGigs",String(Ae.id)),i=await iu(r);i.exists()&&De(e=>o(o({},e),{},{votes:i.data().votes||{}}))}catch(r){console.error("Error voting:",r),alert("\u274c Error recording vote: "+r.message)}else alert("\u26a0\ufe0f No active live gig!")},$t=async()=>{var e;if(st){if(!t)return alert("Please log in to request a song"),void T(!0);if(null!==(e=Re.playedSongs)&&void 0!==e&&e.includes(st.id))alert("\u26a0\ufe0f This song has already been played!\n\nYou can only request upcoming songs.");else if(ot.length>200)alert("Message must be 200 characters or less");else try{await(async(e,t,n,r,i,s,a)=>{try{const o=rc(Mf,"liveGigs",String(e)),l={id:"request_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),songId:t.id,songTitle:t.title,songArtist:t.artist,requesterId:n,requesterName:r,message:i||"",amount:s||0,isPaid:a||!1,status:"pending",timestamp:(new Date).toISOString(),createdAt:new Date},c=await iu(o);if(!c.exists())throw new Error("Gig not found");const u=[...c.data().songRequests||[],l];return await lu(o,{songRequests:u}),console.log("\u2705 Song request submitted:",l),l}catch(o){throw console.error("\u274c Error submitting song request:",o),o}})(Ae.id,st,t.uid,t.displayName||"Anonymous",ot,0,!1),alert("\u2705 Song requested!\n\n"+'"'.concat(st.title,'" by ').concat(st.artist,"\n\n")+"The artist will review your request.\n\n\ud83d\udca1 Tip: If the queue is full, the artist can still accept your request by removing a lower-priority song."),it(!1),at(null),lt(""),xe||ht(!0)}catch(n){console.error("Error submitting song request:",n),alert("\u274c Error: "+n.message)}}else alert("Please select a song first!")},Zt=async()=>{if(t&&Ae&&0!==ft)try{const e=rc(Mf,"liveGigs",String(Ae.id)),n=await iu(e);if(n.exists()){const r=n.data().ratings||[],i=r.findIndex(e=>e.userId===t.uid),s={userId:t.uid,userName:t.displayName||"Anonymous",gigId:Ae.id,artistRating:ft,timestamp:(new Date).toISOString()};let a;i>=0?(a=[...r],a[i]=s,console.log("\u2705 Updated existing rating")):(a=[...r,s],console.log("\u2705 Added new rating")),await lu(e,{ratings:a}),Ne(!0),Ee(ft),alert(i>=0?"\u2705 Rating updated!":"\u2705 Thanks for rating the artist!")}ht(!1),gt(0)}catch(e){console.error("Error submitting rating:",e),alert("\u274c Error submitting rating")}},en=()=>{ht(!1),gt(0)},tn=e=>{if(!X.trim())return e;const t=X.toLowerCase().trim();return e.filter(e=>{const n=(e.venueName||"").toLowerCase(),r=(e.artistName||"").toLowerCase(),i=(e.venueAddress||"").toLowerCase();return n.includes(t)||r.includes(t)||i.includes(t)})};if(r)return(0,S.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 flex items-center justify-center",children:(0,S.jsx)("div",{className:"text-center text-white",children:(0,S.jsx)("h1",{className:"text-4xl font-bold",children:"Loading GigWave..."})})});const nn=()=>{mt(null),yt(null),wt([]),U("discover")};if(_){const e=async()=>{if(O(""),j&&P)if(P.length<6)O("Password must be at least 6 characters");else try{"signup"===I?(console.log("\ud83d\udcdd Attempting sign-up..."),await Wf(j,P),alert("\u2705 Account created successfully!\n\nPlease check your email to verify your account.")):(console.log("\ud83d\udd10 Attempting sign-in..."),await Gf(j,P),alert("\u2705 Signed in successfully!")),T(!1)}catch(e){console.error("\u274c Auth error:",e);let t="";switch(e.code){case"auth/email-already-in-use":t="\u274c This email is already registered!\n\nPlease sign in instead, or use a different email.",C("signin");break;case"auth/invalid-email":t="\u274c Invalid email address format";break;case"auth/weak-password":t="\u274c Password is too weak. Use at least 6 characters.";break;case"auth/user-not-found":t="\u274c No account found with this email.\n\nPlease sign up first!",C("signup");break;case"auth/wrong-password":t="\u274c Incorrect password. Please try again.";break;case"auth/too-many-requests":t="\u274c Too many failed attempts.\n\nPlease try again later or reset your password.";break;case"auth/network-request-failed":t="\u274c Network error. Please check your internet connection.";break;default:t=e.message||"Authentication failed"}O(t),alert(t)}else O("Please enter both email and password")};return(0,S.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,S.jsxs)("div",{className:"rock-background gig-card border-2 border-electric max-w-md w-full",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,S.jsx)("h2",{className:"concert-heading text-3xl text-electric",children:"signup"===I?"\ud83c\udfb8 JOIN US":"\ud83c\udfa4 SIGN IN"}),(0,S.jsx)("button",{onClick:()=>T(!1),className:"text-white hover:text-red-400 p-2 touch-target",children:(0,S.jsx)(h,{size:32})})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,S.jsx)("button",{onClick:()=>C("signin"),className:"btn ".concat("signin"===I?"btn-electric":"btn-ghost"),children:"Sign In"}),(0,S.jsx)("button",{onClick:()=>C("signup"),className:"btn ".concat("signup"===I?"btn-electric":"btn-ghost"),children:"Sign Up"})]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("button",{onClick:()=>Dt("apple"),className:"w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-purple-800 hover:from-purple-500 hover:to-purple-700 text-white rounded-lg font-bold flex items-center justify-center gap-2 border-2 border-magenta transition-all hover:scale-[1.02]",children:[(0,S.jsx)("span",{children:"\ud83c\udf4e"}),(0,S.jsx)("span",{children:"Continue with Apple"})]}),(0,S.jsxs)("button",{onClick:()=>Dt("google"),className:"w-full px-6 py-4 bg-white hover:bg-gray-100 rounded-lg font-bold flex items-center justify-center gap-2 border-2 border-gray-400 transition-all hover:scale-[1.02]",style:{color:"#000000 !important"},children:[(0,S.jsx)("span",{style:{color:"#000000"},children:"\ud83d\udd10"}),(0,S.jsx)("span",{style:{color:"#000000",fontWeight:"bold"},children:"Continue with Google"})]}),(0,S.jsxs)("button",{onClick:()=>Dt("facebook"),className:"w-full px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold flex items-center justify-center gap-2",children:[(0,S.jsx)("span",{children:"\ud83d\udcd8"}),(0,S.jsx)("span",{children:"Continue with Facebook"})]}),(0,S.jsxs)("div",{className:"relative my-6",children:[(0,S.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,S.jsx)("div",{className:"w-full border-t border-electric/30"})}),(0,S.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,S.jsx)("span",{className:"px-3 bg-dark text-electric font-bold uppercase tracking-wider",children:"Or use email"})})]}),D&&(0,S.jsxs)("div",{className:"bg-red-500/20 border border-red-400 rounded-lg p-4 text-red-200 text-sm",children:[(0,S.jsx)("p",{className:"font-bold mb-1",children:"\u26a0\ufe0f Error"}),(0,S.jsx)("p",{children:D})]}),(0,S.jsx)("input",{type:"email",placeholder:"Email",value:j,onChange:e=>A(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"}),(0,S.jsx)("input",{type:"password",placeholder:"Password",value:P,onChange:e=>R(e.target.value),onKeyPress:t=>"Enter"===t.key&&e(),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"}),(0,S.jsx)("button",{onClick:e,className:"btn btn-neon w-full text-lg",children:"signup"===I?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:"\u26a1"}),(0,S.jsx)("span",{children:"Create Account"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:"\u26a1"}),(0,S.jsx)("span",{children:"Sign In"})]})})]})]})})}if(St)return(0,S.jsx)("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,S.jsxs)("div",{className:"rock-background gig-card border-2 border-electric max-w-3xl w-full my-8",children:[(0,S.jsxs)("div",{className:"mb-6",children:[(0,S.jsx)("h2",{className:"concert-heading text-4xl text-electric mb-2",children:"\ud83c\udfb8 COMPLETE YOUR ARTIST PROFILE"}),(0,S.jsx)("p",{className:"text-gray-light",children:"Fill out your profile to start creating gigs and going live!"}),(0,S.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,S.jsx)("div",{className:"flex-1 h-2 rounded-full ".concat(kt>=1?"bg-electric":"bg-white/20")}),(0,S.jsx)("div",{className:"flex-1 h-2 rounded-full ".concat(kt>=2?"bg-electric":"bg-white/20")}),(0,S.jsx)("div",{className:"flex-1 h-2 rounded-full ".concat(kt>=3?"bg-electric":"bg-white/20")})]}),(0,S.jsxs)("p",{className:"text-electric text-sm mt-2 font-bold",children:["Step ",kt," of 3"]})]}),!Ct&&(0,S.jsxs)("div",{className:"bg-red-500/20 border-2 border-red-400 rounded-lg p-6 mb-6",children:[(0,S.jsx)("p",{className:"text-red-300 font-bold text-lg mb-2",children:"\u26a0\ufe0f EMAIL NOT VERIFIED"}),(0,S.jsx)("p",{className:"text-white mb-4",children:"You must verify your email before completing your profile."}),(0,S.jsxs)("p",{className:"text-red-200 text-sm mb-4",children:["Check your inbox: ",(0,S.jsx)("span",{className:"font-bold",children:null===t||void 0===t?void 0:t.email})]}),(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsx)("button",{onClick:Yt,className:"flex-1 btn btn-neon text-sm",children:"\ud83d\udce7 Send Verification Email"}),(0,S.jsx)("button",{onClick:Jt,className:"flex-1 btn btn-electric text-sm",children:"\ud83d\udd04 Check Status"})]})]}),(0,S.jsx)("div",{className:"bg-green-500/20 border border-neon rounded-lg p-4 mb-6",children:(0,S.jsxs)("p",{className:"text-neon font-bold text-sm",children:["\ud83d\udd12 Your email (",null===t||void 0===t?void 0:t.email,") will NOT be displayed publicly and remains confidential."]})}),(0,S.jsxs)("div",{className:"space-y-6",children:[1===kt&&(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\ud83d\udcdd BASIC INFORMATION"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Artist/Band Name *"}),(0,S.jsx)("input",{type:"text",value:Tt.artistName,onChange:e=>It(o(o({},Tt),{},{artistName:e.target.value})),placeholder:"e.g. The Electric Waves",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Your Full Name *"}),(0,S.jsx)("input",{type:"text",value:Tt.fullName,onChange:e=>It(o(o({},Tt),{},{fullName:e.target.value})),placeholder:"e.g. John Smith",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Bio * (minimum 50 characters)"}),(0,S.jsx)("textarea",{value:Tt.bio,onChange:e=>It(o(o({},Tt),{},{bio:e.target.value})),placeholder:"Tell your audience about your music, style, and story...",rows:5,className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"}),(0,S.jsxs)("p",{className:"text-sm mt-1 ".concat(Tt.bio.length>=50?"text-neon":"text-gray"),children:[Tt.bio.length,"/50 characters"]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Genre/Style *"}),(0,S.jsx)("input",{type:"text",value:Tt.genre,onChange:e=>It(o(o({},Tt),{},{genre:e.target.value})),placeholder:"e.g. Rock, Jazz, Electronic",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Location/City *"}),(0,S.jsx)("input",{type:"text",value:Tt.location,onChange:e=>It(o(o({},Tt),{},{location:e.target.value})),placeholder:"e.g. New York, NY",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]})]}),(0,S.jsx)("button",{onClick:()=>{Tt.artistName&&Tt.fullName&&Tt.bio&&!(Tt.bio.length<50)&&Tt.genre&&Tt.location?_t(2):alert("\u26a0\ufe0f Please fill in all required fields!")},className:"btn btn-neon w-full text-lg",children:"Next: Social Media \u2192"})]}),2===kt&&(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\ud83d\udd17 SOCIAL MEDIA (Optional)"}),(0,S.jsx)("p",{className:"text-gray-light text-sm mb-4",children:"Add your social media links so fans can follow you!"}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\ud83d\udcf7"})," Instagram"]}),(0,S.jsx)("input",{type:"text",value:Tt.socialMedia.instagram,onChange:e=>It(o(o({},Tt),{},{socialMedia:o(o({},Tt.socialMedia),{},{instagram:e.target.value})})),placeholder:"@username or full URL",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\ud83d\udc4d"})," Facebook"]}),(0,S.jsx)("input",{type:"text",value:Tt.socialMedia.facebook,onChange:e=>It(o(o({},Tt),{},{socialMedia:o(o({},Tt.socialMedia),{},{facebook:e.target.value})})),placeholder:"Page URL",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\ud83c\udfb5"})," Spotify"]}),(0,S.jsx)("input",{type:"text",value:Tt.socialMedia.spotify,onChange:e=>It(o(o({},Tt),{},{socialMedia:o(o({},Tt.socialMedia),{},{spotify:e.target.value})})),placeholder:"Artist URL",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\ud83d\udcfa"})," YouTube"]}),(0,S.jsx)("input",{type:"text",value:Tt.socialMedia.youtube,onChange:e=>It(o(o({},Tt),{},{socialMedia:o(o({},Tt.socialMedia),{},{youtube:e.target.value})})),placeholder:"Channel URL",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsx)("button",{onClick:()=>_t(1),className:"btn btn-ghost",children:"\u2190 Back"}),(0,S.jsx)("button",{onClick:()=>_t(3),className:"flex-1 btn btn-neon text-lg",children:"Next: Review \u2192"})]})]}),3===kt&&(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\u2705 REVIEW & SAVE"}),(0,S.jsxs)("div",{className:"bg-white/5 rounded-lg p-6 space-y-3",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray text-sm",children:"Artist Name"}),(0,S.jsx)("p",{className:"text-white font-bold text-lg",children:Tt.artistName})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray text-sm",children:"Full Name"}),(0,S.jsx)("p",{className:"text-white font-bold",children:Tt.fullName})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray text-sm",children:"Bio"}),(0,S.jsx)("p",{className:"text-white",children:Tt.bio})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray text-sm",children:"Genre"}),(0,S.jsx)("p",{className:"text-electric font-bold",children:Tt.genre})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray text-sm",children:"Location"}),(0,S.jsx)("p",{className:"text-electric font-bold",children:Tt.location})]})]}),Object.values(Tt.socialMedia).some(e=>e)&&(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray text-sm mb-2",children:"Social Media"}),(0,S.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Tt.socialMedia.instagram&&(0,S.jsx)("span",{className:"px-3 py-1 bg-magenta/20 text-magenta rounded-full text-sm",children:"\ud83d\udcf7 Instagram"}),Tt.socialMedia.facebook&&(0,S.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-full text-sm",children:"\ud83d\udc4d Facebook"}),Tt.socialMedia.spotify&&(0,S.jsx)("span",{className:"px-3 py-1 bg-green-500/20 text-neon rounded-full text-sm",children:"\ud83c\udfb5 Spotify"}),Tt.socialMedia.youtube&&(0,S.jsx)("span",{className:"px-3 py-1 bg-red-500/20 text-red-300 rounded-full text-sm",children:"\ud83d\udcfa YouTube"})]})]})]}),(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsx)("button",{onClick:()=>_t(2),className:"btn btn-ghost",children:"\u2190 Back"}),(0,S.jsxs)("button",{onClick:Qt,className:"flex-1 btn btn-neon text-lg",children:[(0,S.jsx)(f,{size:20}),(0,S.jsx)("span",{children:"Save Profile & Continue"})]})]})]})]})]})});if(At)return(0,S.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,S.jsxs)("div",{className:"rock-background gig-card border-2 border-orange max-w-md w-full",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,S.jsx)("h2",{className:"concert-heading text-3xl text-orange",children:"\ud83d\udce7 VERIFY EMAIL"}),(0,S.jsx)("button",{onClick:()=>Pt(!1),className:"text-white hover:text-red-400 p-2",children:(0,S.jsx)(h,{size:32})})]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("p",{className:"text-white",children:"Verify your email address to unlock all features."}),(0,S.jsxs)("p",{className:"text-gray-light text-sm",children:["We'll send a verification link to: ",(0,S.jsx)("span",{className:"text-electric font-bold",children:null===t||void 0===t?void 0:t.email})]}),(0,S.jsx)("button",{onClick:Yt,className:"btn btn-neon w-full",children:"\ud83d\udce7 Send Verification Email"}),(0,S.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,S.jsx)("p",{className:"text-gray-light text-sm mb-3",children:"Already verified? Click below to refresh."}),(0,S.jsx)("button",{onClick:Jt,className:"btn btn-electric w-full",children:"\ud83d\udd04 Check Verification Status"})]})]})]})});if(de&&fe){const e=te.filter(e=>!fe.songs.includes(e.id)&&(e.title.toLowerCase().includes(c.toLowerCase())||e.artist.toLowerCase().includes(c.toLowerCase()))),t=e=>{if(0===e)return;const t=[...fe.songs];[t[e-1],t[e]]=[t[e],t[e-1]],ge(o(o({},fe),{},{songs:t}))},n=e=>{if(e===fe.songs.length-1)return;const t=[...fe.songs];[t[e],t[e+1]]=[t[e+1],t[e]],ge(o(o({},fe),{},{songs:t}))};return(0,S.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:(0,S.jsxs)("div",{className:"rock-background gig-card border-2 border-magenta max-w-4xl w-full h-[90vh] flex flex-col",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-white/10 flex-shrink-0",children:[(0,S.jsx)("h2",{className:"concert-heading text-3xl md:text-4xl text-magenta",children:"\ud83c\udfb8 SETLIST BUILDER"}),(0,S.jsx)("button",{onClick:()=>{he(!1),ge(null),u("")},className:"text-white hover:text-red-400 p-2 touch-target",children:(0,S.jsx)(h,{size:32})})]}),(0,S.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,S.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Playlist Name *"}),(0,S.jsx)("input",{type:"text",value:fe.name,onChange:e=>ge(o(o({},fe),{},{name:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none",placeholder:"e.g., Friday Night Rock"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Description"}),(0,S.jsx)("textarea",{value:fe.description,onChange:e=>ge(o(o({},fe),{},{description:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none",rows:2,placeholder:"Optional description..."})]})]}),(0,S.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 mb-6",children:[(0,S.jsxs)("h3",{className:"concert-heading text-2xl text-neon mb-4",children:["\ud83c\udfb5 SONGS IN SETLIST (",fe.songs.length,")"]}),0===fe.songs.length?(0,S.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,S.jsx)("p",{className:"text-gray-light",children:"No songs yet. Add from master playlist below. \ud83c\udfb8"})}):(0,S.jsx)("div",{className:"space-y-2",children:fe.songs.map((e,r)=>{const i=te.find(t=>t.id===e);return i?(0,S.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg flex items-center gap-3 border border-white/10 hover:border-electric/50 transition",children:[(0,S.jsx)("span",{className:"concert-heading text-electric text-xl min-w-[40px]",children:r+1}),(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("div",{className:"text-white font-bold truncate",children:i.title}),(0,S.jsx)("div",{className:"text-gray-light text-sm truncate",children:i.artist})]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsx)("button",{onClick:()=>t(r),disabled:0===r,className:"text-neon hover:text-electric p-2 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:"\u25b2"}),(0,S.jsx)("button",{onClick:()=>n(r),disabled:r===fe.songs.length-1,className:"text-neon hover:text-electric p-2 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:"\u25bc"}),(0,S.jsx)("button",{onClick:()=>(e=>{ge(o(o({},fe),{},{songs:fe.songs.filter(t=>t!==e)}))})(e),className:"text-red-400 hover:text-red-300 p-2",title:"Remove",children:(0,S.jsx)(g,{size:20})})]})]},e):null})})]}),(0,S.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 mb-6",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-electric mb-4",children:"\ud83d\udcda ADD FROM MASTER PLAYLIST"}),(0,S.jsx)("div",{className:"mb-4",children:(0,S.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"\ud83d\udd0d Search by song or artist name...",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})}),0===te.length?(0,S.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,S.jsx)("p",{className:"text-gray-light",children:"No songs in master playlist. Add songs in the Master Playlist tab first! \ud83c\udfb5"})}):0===e.length?(0,S.jsx)("div",{className:"bg-white/5 rounded-lg p-6 text-center border border-neon/30",children:(0,S.jsx)("p",{className:"text-neon font-bold",children:c?'No songs found for "'.concat(c,'"'):"\u2705 All master songs added to setlist!"})}):(0,S.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,S.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg flex items-center gap-3 border border-white/10 hover:bg-white/10 transition",children:[(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("div",{className:"text-white font-bold truncate",children:e.title}),(0,S.jsx)("div",{className:"text-gray-light text-sm truncate",children:e.artist})]}),(0,S.jsxs)("button",{onClick:()=>{return t=e.id,void(fe.songs.includes(t)||ge(o(o({},fe),{},{songs:[...fe.songs,t]})));var t},className:"btn btn-neon text-sm",children:[(0,S.jsx)(p,{size:18}),(0,S.jsx)("span",{children:"Add"})]})]},e.id))})]})]}),(0,S.jsx)("div",{className:"p-6 pt-4 border-t border-white/10 flex-shrink-0",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,S.jsxs)("button",{onClick:Vt,className:"flex-1 btn btn-neon text-lg",children:[(0,S.jsx)(f,{size:20}),(0,S.jsx)("span",{children:"Save Setlist"})]}),(0,S.jsx)("button",{onClick:()=>{he(!1),ge(null),u("")},className:"btn btn-ghost",children:"Cancel"})]})})]})})}if(oe&&ce)return(0,S.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",style:{pointerEvents:"none"},children:(0,S.jsxs)("div",{className:"rock-background gig-card border-2 border-orange max-w-2xl w-full h-[90vh] flex flex-col",style:{pointerEvents:"auto"},children:[(0,S.jsxs)("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-white/10 flex-shrink-0",children:[(0,S.jsx)("h2",{className:"concert-heading text-3xl md:text-4xl text-orange",children:se.find(e=>e.id===ce.id)?"\ud83c\udfb8 EDIT SHOW":"\u26a1 CREATE SHOW"}),(0,S.jsx)("button",{onClick:()=>{le(!1),ue(null)},className:"text-white hover:text-red-400 p-2 touch-target",children:(0,S.jsx)(h,{size:32})})]}),(0,S.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Venue Name *"}),(0,S.jsx)("input",{type:"text",value:ce.venueName,onChange:e=>ue(o(o({},ce),{},{venueName:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none",placeholder:"e.g. The Blue Note Jazz Club"})]}),(0,S.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[(0,S.jsxs)("h3",{className:"concert-heading text-xl text-neon flex items-center mb-4",children:[(0,S.jsx)(m,{className:"mr-2",size:24}),"VENUE LOCATION"]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("button",{onClick:zt,disabled:Ce,className:"btn btn-electric w-full disabled:opacity-50 disabled:cursor-not-allowed",children:Ce?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{className:"loading-pulse",children:"\ud83d\udccd"}),(0,S.jsx)("span",{children:"Capturing..."})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:"\ud83d\udccd"}),(0,S.jsx)("span",{children:"Use My Current Location"})]})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-bold text-neon mb-2",children:"OR SEARCH ADDRESS:"}),oe&&ce&&(0,S.jsx)(E,{onSelect:e=>{console.log("\u2705 Address captured in App.jsx:",e),ue(o(o({},ce),{},{address:e.address,location:e.location,venueName:ce.venueName||e.name}))},placeholder:"Type venue address..."},ce.id),ce.address&&(0,S.jsxs)("div",{className:"mt-2 p-2 bg-green-500/20 border border-green-400 rounded text-xs",children:[(0,S.jsxs)("p",{className:"text-green-300",children:["\u2705 Address captured: ",ce.address]}),ce.location&&(0,S.jsxs)("p",{className:"text-green-300",children:["\ud83d\udccd Location: ",ce.location.lat,", ",ce.location.lng]})]})]}),ce.location&&(0,S.jsxs)("div",{className:"bg-neon/20 border border-neon rounded-lg p-4",children:[(0,S.jsxs)("p",{className:"text-neon font-bold mb-2 flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\u2705"}),(0,S.jsx)("span",{children:"Location Captured:"})]}),(0,S.jsxs)("p",{className:"text-white text-sm font-mono",children:["\ud83d\udccd ",ce.location.lat.toFixed(6),"\xb0N, ",ce.location.lng.toFixed(6),"\xb0W"]}),ce.address&&(0,S.jsxs)("p",{className:"text-gray-light text-sm mt-2",children:["\ud83d\udccc ",ce.address]})]})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Date *"}),(0,S.jsx)("input",{type:"date",value:ce.date,onChange:e=>{console.log("\ud83d\udcc5 Date selected:",e.target.value),ue(o(o({},ce),{},{date:e.target.value}))},className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-white/30 focus:border-electric focus:outline-none [color-scheme:dark]",required:!0})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Time *"}),(0,S.jsx)("input",{type:"time",value:ce.time,onChange:e=>{console.log("\u23f0 Time selected:",e.target.value),ue(o(o({},ce),{},{time:e.target.value}))},className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-white/30 focus:border-electric focus:outline-none [color-scheme:dark]",required:!0})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Assign Setlist (Optional)"}),(0,S.jsxs)("select",{value:ce.playlistId||"",onChange:e=>ue(o(o({},ce),{},{playlistId:e.target.value?parseInt(e.target.value):null})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-electric/30 focus:border-electric focus:outline-none",children:[(0,S.jsx)("option",{value:"",className:"bg-gray-900 text-white",children:"No setlist (use master playlist)"}),re.map(e=>(0,S.jsxs)("option",{value:e.id,className:"bg-gray-900 text-white",children:[e.name," (",e.songs.length," songs)"]},e.id))]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Maximum Queue Size"}),(0,S.jsx)("input",{type:"number",value:ce.queueSize||20,onChange:e=>ue(o(o({},ce),{},{queueSize:parseInt(e.target.value)||20})),min:"10",max:"50",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-electric/30 focus:border-electric focus:outline-none"}),(0,S.jsx)("p",{className:"text-gray-light text-sm mt-2",children:"Maximum number of songs in the live queue (10-50 songs)"})]})]})}),(0,S.jsx)("div",{className:"p-6 pt-4 border-t border-white/10 flex-shrink-0",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,S.jsxs)("button",{onClick:Bt,disabled:Ye,className:"flex-1 btn text-lg ".concat(Ye?"btn-ghost opacity-50 cursor-not-allowed":"btn-neon"),children:[(0,S.jsx)(f,{size:20}),(0,S.jsx)("span",{children:Ye?"Saving...":"Save Show"})]}),(0,S.jsx)("button",{onClick:()=>{le(!1),ue(null)},className:"btn btn-ghost",children:"Cancel"})]})})]})});var rn;if(Be&&ze)return(0,S.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,S.jsxs)("div",{className:"rock-background gig-card border-2 border-electric max-w-3xl w-full h-[90vh] flex flex-col",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-white/10 flex-shrink-0",children:[(0,S.jsx)("h2",{className:"concert-heading text-3xl md:text-4xl text-electric",children:"\ud83c\udfb8 BACKSTAGE PASS"}),(0,S.jsx)("button",{onClick:()=>{Ge(!1),qe(null)},className:"text-white hover:text-red-400 p-2 touch-target",children:(0,S.jsx)(h,{size:32})})]}),(0,S.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,S.jsxs)("div",{className:"bg-gradient-to-r from-magenta/20 to-electric/20 border border-electric/50 rounded-xl p-6 mb-6",children:[(0,S.jsx)("h3",{className:"concert-heading text-3xl md:text-4xl text-white mb-4",children:ze.artistName}),(0,S.jsxs)("div",{className:"space-y-3",children:[(0,S.jsxs)("div",{className:"flex items-start gap-3 text-gray-light",children:[(0,S.jsx)("span",{className:"text-electric text-xl",children:"\ud83d\udccd"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"font-bold text-white",children:ze.venueName}),ze.venueAddress&&(0,S.jsx)("p",{className:"text-sm text-gray",children:ze.venueAddress})]})]}),null!=ze.distance&&!isNaN(ze.distance)&&(0,S.jsxs)("p",{className:"flex items-center gap-3",children:[(0,S.jsx)("span",{className:"text-electric text-xl",children:"\ud83d\udccf"}),(0,S.jsx)("span",{className:"font-bold text-electric",children:ze.distance<1e3?"".concat(Math.round(ze.distance),"m away"):"".concat((ze.distance/1e3).toFixed(1),"km away")})]}),ze.gigTime&&(0,S.jsxs)("p",{className:"flex items-center gap-3",children:[(0,S.jsx)("span",{className:"text-neon text-xl",children:"\ud83d\udd50"}),(0,S.jsx)("span",{className:"font-bold text-white",children:ze.gigTime})]}),void 0!==ze.distance&&null!==ze.distance&&(0,S.jsxs)("p",{className:"flex items-center gap-3",children:[(0,S.jsx)("span",{className:"text-electric text-xl",children:"\ud83d\udccf"}),(0,S.jsx)("span",{className:"font-bold text-electric",children:ze.distance<1e3?"".concat(ze.distance,"m away"):"".concat((ze.distance/1e3).toFixed(1),"km away")})]}),(null===(rn=ze.artistProfile)||void 0===rn?void 0:rn.socialMedia)&&(0,S.jsx)("div",{className:"mt-6 pt-4 border-t border-electric/30",children:(0,S.jsx)(Xf,{socialMedia:ze.artistProfile.socialMedia,artistName:ze.artistName})})]})]}),(0,S.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 mb-6",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\ud83c\udfb5 EXPECTED SETLIST"}),(()=>{let e=[];const t=ze.maxQueueSize||ze.queueSize||20,n=ze.queuedSongs||[],r=ze.masterPlaylist||[];if(n.length>t){e=[...n].sort(()=>Math.random()-.5).slice(0,t)}else if(n.length>0&&n.length<t){e=[...n];const i=t-n.length,s=[...r.filter(e=>!n.find(t=>t.id===e.id))].sort(()=>Math.random()-.5);e=[...e,...s.slice(0,i)]}else if(0===n.length){e=[...r].sort(()=>Math.random()-.5).slice(0,t)}else e=n;const i=n.length>0?"Curated Queue":"Master Playlist";return e.length>0?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("p",{className:"text-electric text-sm mb-4 font-semibold",children:["Showing: ",i," (",e.length,"/",t," songs)"]}),(0,S.jsx)("div",{className:"space-y-2",children:e.map((e,t)=>e&&e.title?(0,S.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg flex items-center gap-3 hover:bg-white/10 transition border border-white/10",children:[(0,S.jsx)("span",{className:"concert-heading text-electric text-xl min-w-[40px]",children:t+1}),(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("div",{className:"text-white font-bold truncate",children:e.title}),(0,S.jsx)("div",{className:"text-gray-light text-sm truncate",children:e.artist||"Unknown Artist"})]})]},e.id||t):null)}),(0,S.jsxs)("p",{className:"text-gray text-sm mt-4 italic text-center",children:[e.length," song",1!==e.length?"s":""," \u2022 Final setlist may vary"]})]}):(0,S.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,S.jsx)("p",{className:"text-gray-light",children:"Setlist not available yet. Check back closer to showtime! \ud83c\udfb8"})})})()]})]}),(0,S.jsx)("div",{className:"p-6 pt-4 border-t border-white/10 flex-shrink-0",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,S.jsx)("button",{onClick:async()=>{if(!t)return void T(!0);const e=We.includes(ze.id);try{e?(await(async(e,t)=>{try{const n=rc(Mf,"liveGigs",e,"interestedUsers",t);await cu(n),console.log("\u2705 Unmarked as interested")}catch(n){throw console.error("\u274c Error unmarking interested:",n),n}})(ze.id,t.uid),He(We.filter(e=>e!==ze.id))):(await(async(e,t)=>{try{const n=rc(Mf,"liveGigs",e,"interestedUsers",t);await ou(n,{userId:t,timestamp:fu()}),console.log("\u2705 Marked as interested")}catch(n){throw console.error("\u274c Error marking interested:",n),n}})(ze.id,t.uid),He([...We,ze.id]))}catch(n){alert("Error updating interest: "+n.message)}},className:"flex-1 btn text-lg ".concat(We.includes(ze.id)?"btn-neon":"btn-electric"),children:We.includes(ze.id)?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:"\u2b50"}),(0,S.jsx)("span",{children:"Interested!"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:"\u2b50"}),(0,S.jsx)("span",{children:"Mark as Interested"})]})}),(0,S.jsx)("button",{onClick:()=>{Ge(!1),qe(null)},className:"btn btn-ghost",children:"Close"})]})})]})});if("discover"===F)return(0,S.jsx)("div",{className:"rock-background min-h-screen p-4 pb-24 md:pb-4",children:(0,S.jsxs)("div",{className:"max-w-4xl mx-auto pt-8 md:pt-20",children:[(0,S.jsxs)("div",{className:"text-center mb-8 md:mb-12",children:[(0,S.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,S.jsx)("div",{className:"relative logo-icon",children:(0,S.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 100 100",children:[(0,S.jsxs)("rect",{x:"10",y:"30",width:"8",height:"40",fill:"#00FFD4",rx:"4",children:[(0,S.jsx)("animate",{attributeName:"height",values:"40;60;40",dur:"1s",repeatCount:"indefinite"}),(0,S.jsx)("animate",{attributeName:"y",values:"30;20;30",dur:"1s",repeatCount:"indefinite"})]}),(0,S.jsxs)("rect",{x:"25",y:"20",width:"8",height:"60",fill:"#00D4FF",rx:"4",children:[(0,S.jsx)("animate",{attributeName:"height",values:"60;80;60",dur:"1.2s",repeatCount:"indefinite"}),(0,S.jsx)("animate",{attributeName:"y",values:"20;10;20",dur:"1.2s",repeatCount:"indefinite"})]}),(0,S.jsxs)("rect",{x:"40",y:"15",width:"8",height:"70",fill:"#FF1B6D",rx:"4",children:[(0,S.jsx)("animate",{attributeName:"height",values:"70;90;70",dur:"0.8s",repeatCount:"indefinite"}),(0,S.jsx)("animate",{attributeName:"y",values:"15;5;15",dur:"0.8s",repeatCount:"indefinite"})]}),(0,S.jsxs)("rect",{x:"55",y:"20",width:"8",height:"60",fill:"#9D00FF",rx:"4",children:[(0,S.jsx)("animate",{attributeName:"height",values:"60;80;60",dur:"1.2s",repeatCount:"indefinite"}),(0,S.jsx)("animate",{attributeName:"y",values:"20;10;20",dur:"1.2s",repeatCount:"indefinite"})]}),(0,S.jsxs)("rect",{x:"70",y:"30",width:"8",height:"40",fill:"#00FFD4",rx:"4",children:[(0,S.jsx)("animate",{attributeName:"height",values:"40;60;40",dur:"1s",repeatCount:"indefinite"}),(0,S.jsx)("animate",{attributeName:"y",values:"30;20;30",dur:"1s",repeatCount:"indefinite"})]})]})}),(0,S.jsx)("h1",{className:"gigwave-logo","data-text":"GigWave",children:"GigWave"})]}),(0,S.jsx)("p",{className:"hero-tagline",children:["Ride","The","Wave","Of","Live","Music"].map((e,t)=>(0,S.jsx)("span",{style:{marginRight:"0.3em"},children:e},t))}),(0,S.jsxs)("div",{className:"lightning-container",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",flexWrap:"wrap"},children:[(0,S.jsx)("svg",{className:"lightning-bolt left",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M13 2L3 14h8l-1 8 10-12h-8l1-8z"})}),(0,S.jsx)("h2",{className:"discover-text",children:"Discover Live Music Near You"}),(0,S.jsx)("svg",{className:"lightning-bolt right",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M13 2L3 14h8l-1 8 10-12h-8l1-8z"})})]})]}),(0,S.jsx)("div",{className:"gig-card mb-8 hover:scale-105 transition-transform",children:(0,S.jsx)("button",{onClick:Ot,disabled:H,className:"btn btn-electric w-full text-xl md:text-2xl py-6 md:py-8",children:H?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{className:"loading-pulse",children:"\ud83d\udd0d"}),(0,S.jsx)("span",{children:"Searching..."})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:"\ud83d\udccd"}),(0,S.jsx)("span",{children:"Find Live Gigs"})]})})}),G.length>0&&(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"gig-card mb-6",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-electric mb-4",children:"\ud83d\udd0d SEARCH GIGS"}),(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsx)("input",{type:"text",placeholder:"Search by venue, artist, or location...",value:X,onChange:e=>$(e.target.value),style:{width:"100%",padding:"14px 50px 14px 16px",background:"rgba(0, 0, 0, 0.9)",border:"2px solid rgba(0, 212, 255, 0.3)",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",transition:"all 0.3s ease",outline:"none"},onFocus:e=>{e.target.style.borderColor="rgba(0, 212, 255, 0.6)",e.target.style.boxShadow="0 0 12px rgba(0, 212, 255, 0.25)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 212, 255, 0.3)",e.target.style.boxShadow="none"}}),(0,S.jsx)("span",{style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",color:"#00d4ff",fontSize:"20px",pointerEvents:"none"},children:"\ud83d\udd0d"}),X&&(0,S.jsx)("button",{onClick:()=>$(""),style:{position:"absolute",right:"50px",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 107, 53, 0.2)",border:"2px solid rgba(255, 107, 53, 0.5)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:"#ff6b35",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",padding:"0"},onMouseEnter:e=>{e.target.style.background="rgba(255, 107, 53, 0.4)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 107, 53, 0.2)"},children:"\u2715"})]}),X&&(0,S.jsxs)("div",{style:{marginTop:"12px",color:"#00d4ff",fontSize:"14px",fontWeight:"600"},children:["\ud83d\udcca Found ",tn(Z).length,' gigs matching "',X,'"']})]}),(0,S.jsxs)("div",{className:"gig-card",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-electric mb-4",children:"\ud83d\udcc5 FILTER BY DATE"}),(0,S.jsxs)("div",{className:"grid grid-cols-2 md:flex gap-3",children:[(0,S.jsx)("button",{onClick:()=>Lt("all"),className:"btn ".concat("all"===Q?"btn-electric":"btn-ghost"," flex-1"),children:"All Dates"}),(0,S.jsx)("button",{onClick:()=>Lt("today"),className:"btn ".concat("today"===Q?"btn-electric":"btn-ghost"," flex-1"),children:"Today"}),(0,S.jsx)("button",{onClick:()=>Lt("tomorrow"),className:"btn ".concat("tomorrow"===Q?"btn-electric":"btn-ghost"," flex-1"),children:"Tomorrow"}),(0,S.jsx)("button",{onClick:()=>Lt("week"),className:"btn ".concat("week"===Q?"btn-electric":"btn-ghost"," flex-1"),children:"This Week"})]}),(0,S.jsxs)("p",{className:"text-gray-light text-sm mt-4 text-center",children:["\ud83c\udfb5 Showing ",(0,S.jsx)("span",{className:"text-electric font-bold",children:Z.filter(e=>{const t=Rt(e);return["live","checkVenue","upcoming"].includes(t)}).length})," of ",(0,S.jsx)("span",{className:"text-electric font-bold",children:G.filter(e=>{const t=Rt(e);return["live","checkVenue","upcoming"].includes(t)}).length})," active gigs"]})]}),(0,S.jsx)("div",{className:"space-y-4",children:(()=>{const e=tn(Z).map(e=>o(o({},e),{},{calculatedStatus:Rt(e)})).filter(e=>["live","checkVenue","upcoming"].includes(e.calculatedStatus)).sort((e,t)=>{const n={live:0,checkVenue:1,upcoming:2};if(e.calculatedStatus!==t.calculatedStatus)return n[e.calculatedStatus]-n[t.calculatedStatus];return new Date("".concat(e.gigDate,"T").concat(e.gigTime))-new Date("".concat(t.gigDate,"T").concat(t.gigTime))});if(0===e.length)return(0,S.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-400 rounded-xl p-6 text-center",children:[(0,S.jsx)("p",{className:"text-yellow-200 text-lg",children:X?'No gigs found matching "'.concat(X,'"'):"No active gigs found for selected date filter."}),X&&(0,S.jsx)("button",{onClick:()=>$(""),className:"btn btn-electric mt-4",children:"Clear Search"})]});const n=e.filter(e=>"live"===e.calculatedStatus),r=e.filter(e=>"upcoming"===e.calculatedStatus||"checkVenue"===e.calculatedStatus);return(0,S.jsxs)(S.Fragment,{children:[n.length>0&&(0,S.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,S.jsx)("h2",{className:"concert-heading text-4xl text-neon mb-6",children:"\ud83d\udd34 LIVE NOW"}),n.map(e=>{var n;return(0,S.jsx)("div",{className:"gig-card gig-card-live hover:scale-[1.02] transition-all cursor-pointer",onClick:()=>{Pe(e),U("audience")},children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)("div",{className:"w-4 h-4 bg-neon rounded-full animate-pulse"}),(0,S.jsx)("div",{className:"absolute inset-0 w-4 h-4 bg-neon rounded-full animate-ping"})]}),(0,S.jsx)("span",{className:"concert-heading text-neon text-xl tracking-wider",children:"\ud83d\udd34 LIVE NOW"})]}),(0,S.jsx)("h3",{className:"concert-heading text-3xl text-white mb-2",children:e.artistName}),(0,S.jsxs)("div",{className:"space-y-2 text-gray-light",children:[(0,S.jsxs)("p",{className:"flex items-center gap-2 text-lg",children:[(0,S.jsx)("span",{className:"text-electric",children:"\ud83d\udccd"}),(0,S.jsx)("span",{className:"font-semibold",children:e.venueName})]}),null!=e.distance&&!isNaN(e.distance)&&(0,S.jsxs)("p",{className:"flex items-center gap-2 text-electric font-bold",children:[(0,S.jsx)("span",{children:"\ud83d\udccf"}),(0,S.jsx)("span",{children:e.distance<1e3?"".concat(Math.round(e.distance),"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")})]}),null!=e.distance&&!isNaN(e.distance)&&(0,S.jsxs)("p",{className:"flex items-center gap-2 text-electric font-bold",children:[(0,S.jsx)("span",{children:"\ud83d\udccf"}),(0,S.jsx)("span",{children:e.distance<1e3?"".concat(e.distance,"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")})]})]})]}),(null===(n=e.artistProfile)||void 0===n?void 0:n.socialMedia)&&(0,S.jsx)("div",{className:"mt-4 pt-4 border-t border-white/20",children:(0,S.jsx)(Xf,{socialMedia:e.artistProfile.socialMedia,artistName:e.artistName})}),(0,S.jsxs)("button",{onClick:n=>{if(n.stopPropagation(),!t)return alert("\ud83d\udd10 Please sign in to join this live gig!"),void T(!0);(async e=>{console.log("\ud83c\udfb5 JOIN LIVE CLICKED"),console.log("\ud83d\udc64 Current User:",(null===t||void 0===t?void 0:t.email)||"NOT LOGGED IN"),console.log("\ud83c\udfb8 Gig:",e.venueName);try{if(!t)return console.log("\u274c No user - showing auth modal"),alert("\ud83d\udd10 Please sign in to join this live gig!"),void T(!0);console.log("\u2705 User authenticated, getting location...");let s=q;if(!s){console.log("\ud83d\udccd Requesting location permission..."),alert("\ud83d\udccd Getting your location...\n\nPlease allow location access when prompted.");try{s=await Vf(),B(s),console.log("\u2705 Location obtained:",s)}catch(r){return console.error("\u274c Location error:",r),void alert("\u274c Could not get your location.\n\nPlease enable location services in your browser settings.\n\nError: "+r.message)}}if(console.log("\ud83d\udccd User location:",s),!e.location||!e.location.latitude||!e.location.longitude)return console.error("\u274c Gig missing location data"),void alert("\u26a0\ufe0f This gig does not have a valid location.\n\nPlease contact the artist.");const a={lat:e.location.latitude,lng:e.location.longitude};console.log("\ud83d\udccd Venue location:",a);const o=Uf(s,a),l=1e4;if(console.log("\ud83d\udccf Distance calculated:",o,"meters"),console.log("\ud83d\udccf Max allowed distance:",l,"meters"),o>l){const t=(o/1e3).toFixed(1);return console.log("\u274c Too far away:",t,"km"),void alert("\u26a0\ufe0f You're too far away!\n\nYou must be within 10km of the venue to join.\n\nYou are currently ".concat(t,"km away from ").concat(e.venueName,".\n\n\ud83d\udccd Venue: ").concat(e.venueAddress||e.venueName))}console.log("\u2705 Within range! Distance:",(o/1e3).toFixed(2),"km"),console.log("\ud83c\udf89 Joining gig..."),Pe(e),U("audience"),t&&(localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(e)),console.log("\ud83d\udcbe Saved to localStorage"));try{const r=rc(Mf,"liveGigs",String(e.id)),i=await iu(r);if(i.exists()){var n;const e=i.data().audienceTracking||{totalJoins:0,currentlyActive:0,joinedUsers:{}},s=t.uid,a=!e.joinedUsers[s];e.joinedUsers[s]={firstJoin:(null===(n=e.joinedUsers[s])||void 0===n?void 0:n.firstJoin)||(new Date).toISOString(),lastActive:(new Date).toISOString(),isActive:!0,userName:t.displayName||"Anonymous"},a&&(e.totalJoins=(e.totalJoins||0)+1),e.currentlyActive=Object.values(e.joinedUsers).filter(e=>e.isActive).length,await lu(r,{audienceTracking:e}),console.log("\u2705 Audience tracking updated:",{total:e.totalJoins,active:e.currentlyActive,isFirstJoin:a})}}catch(i){console.error("\u274c Error tracking audience join:",i)}console.log("\u2705 Successfully joined gig!"),alert("\u2705 Joined ".concat(e.artistName,"'s live gig at ").concat(e.venueName,"!"))}catch(s){console.error("\u274c ERROR in handleJoinGig:",s),alert("\u274c Error joining gig: "+s.message)}})(e)},className:"btn btn-neon text-lg md:text-xl whitespace-nowrap self-start md:self-center touch-target",children:[(0,S.jsx)("span",{children:"\ud83c\udfb5"}),(0,S.jsx)("span",{children:"JOIN LIVE"})]})]})},e.id)})]}),r.length>0&&(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsx)("h2",{className:"concert-heading text-4xl text-electric mb-6",children:"\ud83d\udcc5 UPCOMING GIGS"}),r.map(e=>{const t=e.gigDate&&e.gigTime?"".concat(new Date(e.gigDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ").concat(e.gigTime):"Time TBD";return(0,S.jsx)("div",{className:"gig-card hover:scale-[1.02] transition-all",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,S.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("checkVenue"===e.calculatedStatus?"bg-orange-500":"bg-electric")}),(0,S.jsx)("span",{className:"font-bold text-sm uppercase tracking-wider ".concat("checkVenue"===e.calculatedStatus?"text-orange-400":"text-electric"),children:"checkVenue"===e.calculatedStatus?"Check With Venue":"Upcoming"})]}),(0,S.jsx)("h3",{className:"concert-heading text-2xl md:text-3xl text-white mb-2",children:e.artistName}),(0,S.jsxs)("p",{className:"text-magenta font-bold text-lg mb-4",children:["\ud83c\udfb8 ",t]}),(0,S.jsxs)("div",{className:"space-y-2 text-gray-light",children:[(0,S.jsxs)("p",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-electric",children:"\ud83d\udccd"}),(0,S.jsx)("span",{className:"font-semibold",children:e.venueName})]}),null!=e.distance&&!isNaN(e.distance)&&(0,S.jsxs)("p",{className:"flex items-center gap-2 text-electric font-bold",children:[(0,S.jsx)("span",{children:"\ud83d\udccf"}),(0,S.jsx)("span",{children:e.distance<1e3?"".concat(Math.round(e.distance),"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")})]}),null!=e.distance&&!isNaN(e.distance)&&(0,S.jsxs)("p",{className:"flex items-center gap-2 text-electric font-bold",children:[(0,S.jsx)("span",{children:"\ud83d\udccf"}),(0,S.jsx)("span",{children:e.distance<1e3?"".concat(e.distance,"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")})]}),We.includes(e.id)&&(0,S.jsxs)("p",{className:"flex items-center gap-2 text-neon font-semibold mt-3",children:[(0,S.jsx)("span",{children:"\u2b50"}),(0,S.jsx)("span",{children:"You're interested!"})]}),e.interestedCount>0&&(0,S.jsxs)("p",{className:"flex items-center gap-2 text-magenta font-semibold",children:[(0,S.jsx)("span",{children:"\ud83d\udc65"}),(0,S.jsxs)("span",{children:[e.interestedCount," ",1===e.interestedCount?"person":"people"," interested"]})]})]})]}),(0,S.jsxs)("button",{onClick:async()=>{try{const t=rc(Mf,"liveGigs",e.id),n=await iu(t);if(n.exists()){const t=o(o({id:n.id},n.data()),{},{distance:e.distance});qe(t)}else qe(e);Ge(!0)}catch(t){console.error("Error fetching gig details:",t),qe(e),Ge(!0)}},className:"btn btn-electric text-lg md:text-xl whitespace-nowrap self-start md:self-center touch-target",children:[(0,S.jsx)("span",{children:"\ud83c\udfab"}),(0,S.jsx)("span",{children:"VIEW DETAILS"})]})]})},e.id)})]})]})})()})]}),(0,S.jsx)("div",{className:"mt-8 text-center space-y-4",children:t?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("p",{className:"text-white mb-4",children:["Signed in as: ",t.email]}),(0,S.jsx)("button",{onClick:()=>U("artist"),className:"px-8 py-4 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl font-bold text-xl",children:"\ud83c\udfa4 Go to Artist Mode"}),(0,S.jsx)("button",{onClick:async()=>{await zf(),U("discover")},className:"block mx-auto px-6 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg font-semibold",children:"Sign Out"})]}):(0,S.jsx)("div",{className:"space-y-4",children:(0,S.jsx)("button",{onClick:()=>{M("artist"),T(!0)},className:"w-full px-8 py-4 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl font-bold text-xl",children:"\ud83c\udfa4 Artist Sign In"})})})]})});if("artist"===F)return(0,S.jsx)("div",{className:"artist-dashboard rock-background min-h-screen p-4 pb-24 md:pb-4",children:(0,S.jsxs)("div",{className:"max-w-6xl mx-auto pt-6",children:[(0,S.jsx)("div",{className:"artist-header-card gig-card mb-8",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h1",{className:"artist-dashboard-title mb-3",children:"\ud83c\udfb8 ARTIST DASHBOARD"}),(0,S.jsxs)("p",{className:"artist-welcome",children:["Welcome, ",(null===t||void 0===t?void 0:t.displayName)||(null===t||void 0===t?void 0:t.email)]})]}),(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsx)("button",{onClick:()=>U("discover"),className:"btn btn-ghost",children:"\u2190 Back"}),(0,S.jsx)("button",{onClick:async()=>{await zf(),U("discover")},className:"btn btn-fire",children:"Sign Out"})]})]})}),(0,S.jsxs)("div",{className:"artist-nav-tabs",children:[(0,S.jsxs)("button",{onClick:()=>z("master"),className:"artist-nav-tab ".concat("master"===V?"active":""),children:[(0,S.jsx)(v,{className:"inline mr-2",size:24}),(0,S.jsx)("span",{children:"Master Playlist"})]}),(0,S.jsxs)("button",{onClick:()=>z("playlists"),className:"artist-nav-tab ".concat("playlists"===V?"active":""),children:[(0,S.jsx)(v,{className:"inline mr-2",size:24}),(0,S.jsx)("span",{children:"Gig Playlists"})]}),(0,S.jsxs)("button",{onClick:()=>z("gigs"),className:"artist-nav-tab ".concat("gigs"===V?"active":""),children:[(0,S.jsx)(y,{className:"inline mr-2",size:24}),(0,S.jsx)("span",{children:"My Gigs"})]})]}),"master"===V&&(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"artist-search-section",children:[(0,S.jsxs)("h3",{className:"artist-section-header",children:[(0,S.jsx)("span",{className:"emoji-icon",children:"\ud83c\udfb5"}),(0,S.jsx)("span",{children:"SEARCH ITUNES MUSIC"})]}),(0,S.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[(0,S.jsx)("input",{type:"text",value:pe,onChange:e=>me(e.target.value),onKeyPress:e=>"Enter"===e.key&&Ft(),placeholder:"Search for songs, artists, albums...",className:"artist-search-input flex-1",disabled:be}),(0,S.jsxs)("button",{onClick:Ft,disabled:be,className:"btn btn-neon",children:[(0,S.jsx)("span",{children:be?"\u23f3":"\ud83d\udd0d"}),(0,S.jsx)("span",{children:"Search"})]})]}),ve.length>0&&(0,S.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(0,S.jsxs)("p",{className:"text-white font-bold text-lg mb-3",children:["\ud83c\udfbc Found ",(0,S.jsx)("span",{className:"text-neon",children:ve.length})," songs"]}),ve.map(e=>(0,S.jsxs)("div",{className:"artist-itunes-result flex flex-col md:flex-row md:items-center gap-4",children:[e.artwork&&(0,S.jsx)("img",{src:e.artwork,alt:e.title,className:"w-16 h-16 rounded object-cover border-2 border-electric"}),(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("div",{className:"text-white font-bold text-lg truncate",children:e.title}),(0,S.jsx)("div",{className:"text-electric text-sm font-semibold",children:e.artist}),e.album&&(0,S.jsx)("div",{className:"text-gray-light text-xs truncate",children:e.album}),e.duration&&(0,S.jsxs)("div",{className:"text-neon text-xs font-semibold",children:["\u23f1\ufe0f ",e.duration]})]}),(0,S.jsxs)("button",{onClick:()=>(e=>{if(te.find(t=>t.title===e.title&&t.artist===e.artist))return void alert("\u26a0\ufe0f This song is already in your master playlist!");const t={id:Math.floor(e.id),title:e.title,artist:e.artist,duration:e.duration,album:e.album||"",key:""};ne([...te,t]),ye(ve.filter(t=>t.id!==e.id))})(e),className:"btn btn-neon text-sm md:text-base whitespace-nowrap",children:[(0,S.jsx)(p,{size:18}),(0,S.jsx)("span",{children:"Add to Master"})]})]},e.id))]}),be&&(0,S.jsx)("div",{className:"text-center py-8",children:(0,S.jsx)("div",{className:"text-electric text-lg loading-pulse font-bold",children:"\ud83d\udd0d Searching iTunes..."})})]}),(0,S.jsxs)("div",{className:"artist-playlist-section",children:[(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[(0,S.jsxs)("h2",{className:"artist-section-header mb-0",children:[(0,S.jsx)("span",{className:"emoji-icon",children:"\ud83c\udfb5"}),(0,S.jsx)("span",{children:"MASTER PLAYLIST"})]}),(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsxs)("select",{value:d,onChange:e=>k(e.target.value),className:"artist-dropdown",children:[(0,S.jsx)("option",{value:"default",children:"Default Order"}),(0,S.jsx)("option",{value:"song",children:"Sort by Song (A-Z)"}),(0,S.jsx)("option",{value:"artist",children:"Sort by Artist (A-Z)"})]}),(0,S.jsxs)("button",{onClick:Mt,className:"btn btn-electric",children:[(0,S.jsx)(p,{size:20}),(0,S.jsx)("span",{children:"Add Song"})]})]})]}),0===te.length?(0,S.jsx)("div",{className:"artist-empty-state",children:(0,S.jsx)("p",{className:"artist-empty-text",children:'No songs yet. Click "Add Song" to start building your library! \ud83c\udfb8'})}):(0,S.jsx)("div",{className:"space-y-3",children:te.slice().sort((e,t)=>"song"===d?e.title.localeCompare(t.title):"artist"===d?e.artist.localeCompare(t.artist):0).map(e=>(0,S.jsxs)("div",{className:"artist-song-card flex justify-between items-center",children:[(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("div",{className:"artist-song-title truncate",children:e.title}),(0,S.jsx)("div",{className:"artist-song-artist truncate",children:e.artist})]}),(0,S.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Remove this song?")&&ne(te.filter(e=>e.id!==t)));var t},className:"text-red-400 hover:text-red-300 p-2 touch-target ml-3",children:(0,S.jsx)(g,{size:20})})]},e.id))})]})]}),"playlists"===V&&(0,S.jsx)("div",{className:"space-y-6",children:(0,S.jsxs)("div",{className:"artist-section-card",children:[(0,S.jsxs)("h2",{className:"artist-section-header",children:[(0,S.jsx)("span",{className:"emoji-icon",children:"\ud83c\udfb8"}),(0,S.jsx)("span",{children:"GIG PLAYLISTS"})]}),(0,S.jsxs)("button",{onClick:Ut,className:"btn btn-electric mb-6",children:[(0,S.jsx)(p,{size:20}),(0,S.jsx)("span",{children:"Create Playlist"})]}),0===re.length?(0,S.jsx)("div",{className:"artist-empty-state",children:(0,S.jsx)("p",{className:"artist-empty-text",children:"No playlists yet. Create custom setlists for different gigs! \ud83c\udfb5"})}):(0,S.jsx)("div",{className:"space-y-4",children:re.map(e=>(0,S.jsxs)("div",{className:"artist-song-card p-6",children:[(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4 mb-4",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:e.name}),e.description&&(0,S.jsx)("p",{className:"text-gray-light text-sm mb-2",children:e.description}),(0,S.jsxs)("p",{className:"text-electric font-bold text-lg",children:["\ud83c\udfb5 ",e.songs.length," songs"]})]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsxs)("button",{onClick:()=>{ge(e),he(!0)},className:"btn btn-electric text-sm",children:[(0,S.jsx)(b,{size:16}),(0,S.jsx)("span",{children:"Edit"})]}),(0,S.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Delete this playlist?")&&ie(re.filter(e=>e.id!==t)));var t},className:"btn btn-fire text-sm",children:(0,S.jsx)(g,{size:16})})]})]}),e.songs.length>0&&(0,S.jsxs)("div",{className:"space-y-1 mt-4 pt-4 border-t border-white/20",children:[(0,S.jsx)("p",{className:"text-white font-bold mb-2",children:"Songs:"}),e.songs.slice(0,5).map((e,t)=>{const n=te.find(t=>t.id===e);return n?(0,S.jsxs)("div",{className:"text-gray-light text-sm flex items-center gap-2",children:[(0,S.jsxs)("span",{className:"text-electric font-bold",children:[t+1,"."]}),(0,S.jsx)("span",{className:"text-white font-semibold",children:n.title}),(0,S.jsx)("span",{className:"text-gray",children:"-"}),(0,S.jsx)("span",{className:"text-electric",children:n.artist})]},e):null}),e.songs.length>5&&(0,S.jsxs)("div",{className:"text-magenta text-sm font-bold mt-2",children:["+",e.songs.length-5," more..."]})]})]},e.id))})]})}),"gigs"===V&&(0,S.jsx)("div",{className:"space-y-6",children:(0,S.jsxs)("div",{className:"artist-section-card",children:[(0,S.jsxs)("h2",{className:"artist-section-header",children:[(0,S.jsx)("span",{className:"emoji-icon",children:"\u26a1"}),(0,S.jsx)("span",{children:"MY GIGS"})]}),(0,S.jsxs)("button",{onClick:qt,className:"btn btn-electric mb-6",children:[(0,S.jsx)(p,{size:20}),(0,S.jsx)("span",{children:"Create Gig"})]}),0===se.length?(0,S.jsx)("div",{className:"artist-empty-state",children:(0,S.jsx)("p",{className:"artist-empty-text",children:'No gigs yet. Click "Create Gig" to add one! \u26a1'})}):(0,S.jsx)("div",{className:"space-y-4",children:(()=>{const e={upcoming:"badge-upcoming",checkVenue:"badge-upcoming",live:"badge-live",ended:"badge-ended",cancelled:"badge-ended"},t={upcoming:"\ud83d\udd35 Upcoming",checkVenue:"\ud83d\udfe0 Check With Venue",live:"\ud83d\udfe2 Live",ended:"\u26ab Ended",cancelled:"\ud83d\udd34 Cancelled"};return se.map(n=>{var r;const i=re.find(e=>e.id===n.playlistId),s=Rt(n),a="ended"===s||"cancelled"===s,o="cancelled"===s;return(0,S.jsx)("div",{className:"artist-song-card p-6",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4 mb-4",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white",children:n.venueName}),(0,S.jsx)("span",{className:"status-badge ".concat(e[s]),children:t[s]})]}),(0,S.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,S.jsxs)("p",{className:"text-electric font-bold text-lg",children:["\ud83d\udcc5 ",n.date," at ",n.time]}),n.address&&(0,S.jsxs)("p",{className:"text-gray-light",children:["\ud83d\udccd ",n.address]}),n.location&&null!=n.location.lat&&null!=n.location.lng&&(0,S.jsxs)("p",{className:"text-neon text-xs font-semibold",children:["\u2705 Location: ",n.location.lat.toFixed(4),"\xb0, ",n.location.lng.toFixed(4),"\xb0"]}),i&&(0,S.jsxs)("p",{className:"text-magenta font-bold",children:["\ud83c\udfb5 Playlist: ",i.name," (",i.songs.length," songs)"]}),n.interestedCount>0&&(0,S.jsxs)("p",{className:"text-magenta font-bold",children:["\ud83d\udc65 ",n.interestedCount," ",1===n.interestedCount?"person":"people"," interested"]}),a&&(0,S.jsx)("p",{className:"text-red-400 font-bold mt-2",children:o?"\u26a0\ufe0f This gig was cancelled":"\u26a0\ufe0f This gig has ended"})]})]}),(null===(r=n.artistProfile)||void 0===r?void 0:r.socialMedia)&&(0,S.jsx)("div",{className:"mt-4 pt-4 border-t border-white/20",children:(0,S.jsx)(Xf,{socialMedia:n.artistProfile.socialMedia,artistName:n.artistName})}),(0,S.jsxs)("div",{className:"flex flex-wrap gap-2",children:[!a&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("button",{onClick:()=>{ue(n),le(!0)},className:"btn btn-electric text-sm",title:"Edit gig details",children:[(0,S.jsx)(b,{size:16}),(0,S.jsx)("span",{children:"Edit"})]}),(0,S.jsx)("button",{onClick:()=>Gt(n.id),className:"btn btn-fire text-sm",title:"Delete this gig",children:(0,S.jsx)(g,{size:16})})]}),a&&(0,S.jsxs)("button",{onClick:()=>Gt(n.id),className:"btn btn-fire text-sm",title:"Delete this gig",children:[(0,S.jsx)(g,{size:16}),(0,S.jsx)("span",{children:"Delete"})]}),(0,S.jsxs)("button",{onClick:()=>Wt(n),disabled:a||o,className:"btn ".concat(a?"bg-gray-500 cursor-not-allowed":"btn-neon"," text-sm md:text-base"),title:a?"Cannot go live - gig has ended":"Go live with this gig",children:[(0,S.jsx)(w,{size:18}),(0,S.jsx)("span",{children:a?"Ended":"Go Live"})]})]})]})},n.id)})})()})]})})]})});const sn=e=>{const t=[],n=[],r=[];e.forEach(e=>{var i;const s=null===(i=Re.songRequests)||void 0===i?void 0:i.some(t=>t.songId===e.id&&"accepted"===t.status),a=Re.votes[Math.floor(e.id)]||0;s?t.push(e):a>0?n.push(e):r.push(e)});const i=(e,t)=>{var n,r;const i=Re.votes[Math.floor(e.id)]||0,s=Re.votes[Math.floor(t.id)]||0;if(s!==i)return s-i;const a=null===(n=Re.lastVoteTime)||void 0===n?void 0:n[Math.floor(e.id)],o=null===(r=Re.lastVoteTime)||void 0===r?void 0:r[Math.floor(t.id)];return a||o?a?o?new Date(a)-new Date(o):-1:1:0};return t.sort(i),n.sort(i),[...t,...n,...r]};var an,on,ln,cn,un,dn,hn,fn;return"live"===F&&Ae?(0,S.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-teal-900 to-blue-900 p-4",children:(0,S.jsxs)("div",{className:"max-w-6xl mx-auto pt-6",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("h1",{className:"text-5xl font-bold text-white",children:["\ud83d\udd34 LIVE: ",Ae.venueName]}),(0,S.jsxs)("p",{className:"text-teal-200 text-lg",children:["Artist: ",Ae.artistName]}),null!==Oe&&(0,S.jsx)("div",{className:"mt-2",children:(0,S.jsxs)("p",{className:"text-lg font-bold ".concat(Oe<=10?"text-red-300 animate-pulse":"text-green-300"),children:["\u23f0 Time Remaining: ",Math.floor(Oe/60),"h ",Oe%60,"m"]})})]}),(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsx)("button",{onClick:Ht,className:"px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-bold",children:"\u23f1\ufe0f Add 1 Hour"}),(0,S.jsx)("button",{onClick:Kt,className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold",children:"\u23f9\ufe0f End Gig"})]})]}),(0,S.jsx)("div",{className:"bg-orange-500/20 border-2 border-orange-400 rounded-lg p-4 mb-6",children:(0,S.jsx)("p",{className:"text-orange-300 font-bold text-center",children:"\ud83d\udd12 You are locked in LIVE mode. You must end this gig to access other features."})}),(0,S.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,S.jsxs)("div",{className:"bg-pink-500/20 border border-pink-400 rounded-xl p-6 text-center",children:[(0,S.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:(null===(an=Re.audienceTracking)||void 0===an?void 0:an.currentlyActive)||0}),(0,S.jsx)("div",{className:"text-pink-200 font-semibold text-sm",children:"\ud83d\udc40 Live Now"})]}),(0,S.jsxs)("div",{className:"bg-magenta/20 border border-magenta rounded-xl p-6 text-center",children:[(0,S.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:(null===(on=Re.audienceTracking)||void 0===on?void 0:on.totalJoins)||0}),(0,S.jsx)("div",{className:"text-magenta font-semibold text-sm",children:"\ud83c\udfab Total Joins"})]}),(0,S.jsxs)("div",{className:"bg-green-500/20 border border-green-400 rounded-xl p-6 text-center",children:[(0,S.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:Object.values(Re.votes).reduce((e,t)=>e+t,0)}),(0,S.jsx)("div",{className:"text-green-200 font-semibold text-sm",children:"\u26a1 Total Votes"})]}),(0,S.jsxs)("div",{className:"bg-orange-500/20 border border-orange-400 rounded-xl p-6 text-center",children:[(0,S.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:(Re.songRequests||[]).filter(e=>"pending"===e.status).length}),(0,S.jsx)("div",{className:"text-orange-200 font-semibold text-sm",children:"\ud83c\udfa4 Pending Requests"})]})]}),(0,S.jsxs)("div",{className:"bg-white/10 rounded-xl p-6 mb-6",children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"\ud83c\udfb5 Song Queue with Votes"}),(0,S.jsxs)("div",{className:"mb-6",children:[(0,S.jsxs)("h4",{className:"text-lg font-semibold text-green-300 mb-3",children:["\u25b6\ufe0f Ready to Play (",Re.queuedSongs.filter(e=>{var t;return!(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))}).length,")"]}),sn(Re.queuedSongs.filter(e=>{var t;return!(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))})).map((e,t)=>{const n=Re.votes[Math.floor(e.id)]||0;return(0,S.jsxs)("div",{className:"bg-green-500/20 border border-green-400 p-4 rounded-lg mb-3 flex justify-between items-center",children:[(0,S.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,S.jsxs)("span",{className:"text-green-300 font-bold text-2xl min-w-[50px]",children:["#",t+1]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-white font-semibold text-lg",children:e.title}),(0,S.jsx)("div",{className:"text-green-200 text-sm",children:e.artist})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-4",children:[(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsxs)("div",{className:"text-pink-300 font-bold text-2xl",children:["\u26a1 ",n]}),(0,S.jsx)("div",{className:"text-pink-200 text-xs",children:"votes"})]}),(0,S.jsx)("button",{onClick:async()=>{if(window.confirm('Mark "'.concat(e.title,'" as played?')))try{console.log("\ud83c\udfb5 Marking song as played"),console.log("\ud83d\udcdd Live Gig ID:",Ae.id),console.log("\ud83c\udfa4 Song ID:",e.id);const t=String(Ae.id),n=rc(Mf,"liveGigs",t);if(!(await iu(n)).exists())return void alert("\u274c Error: Gig document not found!\n\nID: ".concat(t,"\n\nPlease restart the gig."));await lu(n,{playedSongs:gu(e.id)}),alert("\u2705 Song marked as played!")}catch(t){console.error("\u274c Error marking song:",t),alert("Error: "+t.message)}},className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-bold whitespace-nowrap",children:"\u2705 Mark Played"})]})]},e.id)})]})]}),(0,S.jsxs)("div",{className:"bg-white/10 rounded-xl p-6 mb-6 border-2 border-electric",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white",children:"\ud83c\udfa4 SONG REQUESTS"}),(0,S.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Allow audience to request songs from your playlist (FREE)"}),(0,S.jsxs)("p",{className:"text-sm font-bold mt-2 ".concat(!1!==(null===Re||void 0===Re?void 0:Re.requestsEnabled)?"text-green-400":"text-gray-400"),children:["Status: ",!1!==(null===Re||void 0===Re?void 0:Re.requestsEnabled)?"\u2705 ENABLED":"\u274c DISABLED"]})]}),(0,S.jsx)("button",{onClick:async()=>{const e=!1!==(null===Re||void 0===Re?void 0:Re.requestsEnabled),t=!e;try{console.log("\ud83d\udd04 Toggling requests from",e,"to",t),await(async(e,t)=>{try{const n=rc(Mf,"liveGigs",String(e));await lu(n,{requestsEnabled:void 0===t.requestsEnabled||t.requestsEnabled,jukeboxMode:t.jukeboxMode||!1,jukeboxPrice:t.jukeboxPrice||0}),console.log("\u2705 Request settings updated:",t)}catch(n){throw console.error("\u274c Error updating settings:",n),n}})(Ae.id,{requestsEnabled:t,jukeboxMode:!1,jukeboxPrice:0}),console.log("\u2705 Firebase updated"),De(e=>o(o({},e),{},{requestsEnabled:t})),console.log("\u2705 Local state updated to:",t);const n=rc(Mf,"liveGigs",String(Ae.id)),r=await iu(n);if(r.exists()){const e=r.data();console.log("\ud83d\udce5 Fresh data from Firebase:",e.requestsEnabled),De(t=>o(o({},t),{},{requestsEnabled:e.requestsEnabled}))}alert(t?"\u2705 Song requests are now ENABLED\n\nAudience can request songs for free!":"\u274c Song requests are now DISABLED\n\nAudience cannot request songs.")}catch(n){console.error("\u274c Toggle error:",n),alert("Error: "+n.message)}},className:"px-12 py-4 rounded-lg font-bold text-2xl transition-all transform hover:scale-105 ".concat(!1!==(null===Re||void 0===Re?void 0:Re.requestsEnabled)?"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 shadow-lg shadow-green-500/50":"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800"," text-white"),children:!1!==(null===Re||void 0===Re?void 0:Re.requestsEnabled)?"\ud83d\udfe2 ON":"\u26ab OFF"})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,S.jsxs)("div",{className:"bg-blue-500/20 border border-blue-400 rounded-lg p-3 text-center",children:[(0,S.jsx)("div",{className:"text-2xl font-bold text-white",children:(null===Re||void 0===Re||null===(ln=Re.songRequests)||void 0===ln?void 0:ln.filter(e=>"pending"===e.status).length)||0}),(0,S.jsx)("div",{className:"text-blue-300 text-sm",children:"Pending Requests"})]}),(0,S.jsxs)("div",{className:"bg-green-500/20 border border-green-400 rounded-lg p-3 text-center",children:[(0,S.jsx)("div",{className:"text-2xl font-bold text-white",children:(null===Re||void 0===Re||null===(cn=Re.songRequests)||void 0===cn?void 0:cn.filter(e=>"accepted"===e.status).length)||0}),(0,S.jsx)("div",{className:"text-green-300 text-sm",children:"Accepted"})]})]})]}),(0,S.jsxs)("div",{className:"bg-white/10 rounded-xl p-6 mb-6 border-2 border-magenta",children:[(0,S.jsxs)("h3",{className:"text-2xl font-bold text-white mb-4",children:["\ud83c\udfa4 SONG REQUESTS (",(null===Re||void 0===Re||null===(un=Re.songRequests)||void 0===un?void 0:un.length)||0,")"]}),null!==Re&&void 0!==Re&&Re.songRequests&&0!==Re.songRequests.length?(0,S.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:(dn=Re.songRequests,dn&&0!==dn.length?[...dn].sort((e,t)=>{var n,r;if("pending"===e.status&&"pending"!==t.status)return-1;if("pending"!==e.status&&"pending"===t.status)return 1;if(e.isPaid&&!t.isPaid)return-1;if(!e.isPaid&&t.isPaid)return 1;if(e.isPaid&&t.isPaid&&e.amount!==t.amount)return t.amount-e.amount;const i=(null===(n=e.timestamp)||void 0===n?void 0:n.seconds)||0;return((null===(r=t.timestamp)||void 0===r?void 0:r.seconds)||0)-i}):[]).map(e=>(0,S.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat(e.isPaid?"bg-yellow-500/20 border-yellow-400":"bg-white/5 border-white/20"),children:[(0,S.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,S.jsx)("span",{className:"text-white font-bold text-lg",children:e.songTitle})}),(0,S.jsx)("p",{className:"text-gray-400 text-sm",children:e.songArtist}),(0,S.jsxs)("p",{className:"text-blue-300 text-sm mt-1",children:["Requested by: ",e.requesterName]})]}),(0,S.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("button",{onClick:async()=>{try{console.log("\ud83c\udfb5 Accepting song request:",e.songTitle);const t=rc(Mf,"liveGigs",String(Ae.id)),n=await iu(t);if(!n.exists())return void alert("\u274c Gig not found");const r=n.data(),i=r.queuedSongs||[],s=r.maxQueueSize||20,a=r.playedSongs||[],l=i.filter(e=>!a.includes(e.id));console.log("\ud83d\udcca Queue status:",{total:i.length,active:l.length,max:s,played:a.length});let c="";if(l.length>=s){const e=l[l.length-1];c="\n\n\u26a0\ufe0f Queue was full (".concat(s,' songs).\n\nRemoved: "').concat(e.title,'" by ').concat(e.artist),console.log("\ud83d\uddd1\ufe0f Removing last song to make room:",e.title);const n=i.filter(t=>t.id!==e.id);await lu(t,{queuedSongs:n}),console.log("\u2705 Last song removed, queue now has:",n.length,"songs")}await(async(e,t)=>{try{const n=rc(Mf,"liveGigs",String(e)),r=await iu(n);if(!r.exists())throw new Error("Live gig not found");const i=r.data(),s=i.songRequests||[],a=i.queuedSongs||[],l=i.maxQueueSize||20,c=i.masterPlaylist||[],u=i.votes||{},d=s.find(e=>e.id===t);if(!d)throw new Error("Request not found");const h=c.find(e=>e.id===d.songId);if(!h)throw new Error("Requested song not found in master playlist");if(a.some(e=>e.id===h.id)){console.log("\u26a0\ufe0f Song already in queue, just marking request as accepted");const e=s.map(e=>e.id===t?o(o({},e),{},{status:"accepted"}):e);return void await lu(n,{songRequests:e})}let f=[...a];const g=i.playedSongs||[],p=f.filter(e=>!g.includes(e.id));if(f.length>=l&&p.length>0){console.log("\ud83d\uddd1\ufe0f Queue at capacity, removing last unplayed song");const e=f.map(e=>e.id).lastIndexOf(p[p.length-1].id);f.splice(e,1)}f.push(h);const m=s.filter(e=>"accepted"===e.status).map(e=>e.songId);f.sort((e,t)=>{const n=m.includes(e.id),r=m.includes(t.id),i=u[Math.floor(e.id)]||0,s=u[Math.floor(t.id)]||0;return n&&!r?-1:!n&&r?1:s!==i?s-i:0});const v=s.map(e=>e.id===t?o(o({},e),{},{status:"accepted"}):e);await lu(n,{songRequests:v,queuedSongs:f}),console.log("\u2705 Song request accepted and added to queue:",h.title)}catch(n){throw console.error("\u274c Error accepting request:",n),n}})(Ae.id,e.id),console.log("\u2705 Request accepted and added to queue"),alert("\u2705 Request accepted!".concat(c))}catch(t){console.error("\u274c Error accepting request:",t),alert("Error: "+t.message)}},className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-bold text-sm",children:"\u2713 Accept"}),(0,S.jsx)("button",{onClick:async()=>{try{await(async(e,t)=>{try{const n=rc(Mf,"liveGigs",String(e)),r=await iu(n);if(!r.exists())throw new Error("Live gig not found");const i=(r.data().songRequests||[]).map(e=>e.id===t?o(o({},e),{},{status:"rejected"}):e);await lu(n,{songRequests:i}),console.log("\u274c Song request rejected:",t)}catch(n){throw console.error("\u274c Error rejecting request:",n),n}})(Ae.id,e.id),alert("\u274c Request rejected")}catch(t){alert("Error: "+t.message)}},className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold text-sm",children:"\u2717 Reject"})]}),"accepted"===e.status&&(0,S.jsx)("span",{className:"text-green-400 text-sm font-bold",children:"\u2713 Accepted"}),"rejected"===e.status&&(0,S.jsx)("span",{className:"text-red-400 text-sm font-bold",children:"\u2717 Rejected"})]})]}),e.message&&(0,S.jsxs)("div",{className:"mt-3 p-3 bg-black/30 rounded border border-white/10",children:[(0,S.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"\ud83d\udcac Message:"}),(0,S.jsxs)("p",{className:"text-white italic",children:['"',e.message,'"']})]})]},e.id))}):(0,S.jsxs)("div",{className:"bg-white/5 rounded-lg p-8 text-center",children:[(0,S.jsx)("p",{className:"text-gray-400",children:"No song requests yet"}),(0,S.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:!1!==(null===Re||void 0===Re?void 0:Re.requestsEnabled)?"Song requests are enabled (FREE)":"Song requests are currently disabled"})]})]}),(0,S.jsxs)("div",{className:"bg-white/10 rounded-xl p-6 mb-6",children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"\ud83d\udcda Master Playlist - Add Songs"}),(0,S.jsx)("p",{className:"text-purple-200 text-sm mb-4",children:"Add songs from your master playlist to the queue during the performance"}),(0,S.jsxs)("div",{className:"bg-white/10 rounded-xl p-6 mb-6",children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"\ud83d\udcda Master Playlist - Add Songs"}),(0,S.jsx)("p",{className:"text-purple-200 text-sm mb-4",children:"Add songs from your master playlist to the queue during the performance"}),Re.masterPlaylist&&Re.masterPlaylist.length>0?(0,S.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Re.masterPlaylist.filter(e=>{var t;return!(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))}).map(e=>{const t=Re.queuedSongs.some(t=>t.id===e.id),n=Re.votes[Math.floor(e.id)]||0;return(0,S.jsxs)("div",{className:"p-4 rounded-lg flex justify-between items-center ".concat(t?"bg-green-500/20 border border-green-400":"bg-white/5 border border-white/20"),children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("div",{className:"text-white font-semibold text-lg",children:e.title}),(0,S.jsx)("div",{className:"text-purple-200 text-sm",children:e.artist}),n>0&&(0,S.jsxs)("div",{className:"text-pink-300 text-sm mt-1",children:["\u26a1 ",n," votes"]})]}),t?(0,S.jsx)("div",{className:"px-6 py-3 bg-green-500/50 text-green-200 rounded-lg font-bold",children:"\u2713 In Queue"}):(0,S.jsx)("button",{onClick:async()=>{try{const t=rc(Mf,"liveGigs",Ae.id),n=[...Re.queuedSongs,e].sort((e,t)=>{const n=Re.votes[Math.floor(e.id)]||0;return(Re.votes[Math.floor(t.id)]||0)-n});await lu(t,{queuedSongs:n}),alert('\u2705 "'.concat(e.title,'" added to queue!'))}catch(t){alert("Error adding song: "+t.message)}},className:"px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-bold whitespace-nowrap",children:"\u2795 Add to Queue"})]},e.id)})}):(0,S.jsx)("div",{className:"text-center text-purple-300 py-8",children:"No songs in master playlist"})]}),0===Re.queuedSongs.filter(e=>{var t;return!(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))}).length&&(0,S.jsx)("p",{className:"text-gray-300 text-center py-4",children:"All songs have been played!"})]}),Re.playedSongs&&Re.playedSongs.length>0&&(0,S.jsxs)("div",{children:[(0,S.jsxs)("h4",{className:"text-lg font-semibold text-gray-400 mb-3",children:["\u2705 Already Played (",Re.playedSongs.length,")"]}),Re.queuedSongs.filter(e=>Re.playedSongs.includes(e.id)).map(e=>{const t=Re.votes[Math.floor(e.id)]||0;return(0,S.jsx)("div",{className:"bg-gray-500/20 border border-gray-600 p-4 rounded-lg mb-2 opacity-60",children:(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsxs)("div",{className:"flex items-center gap-4",children:[(0,S.jsx)("span",{className:"text-gray-400",children:"\u2705"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-gray-300 font-semibold line-through",children:e.title}),(0,S.jsx)("div",{className:"text-gray-400 text-sm",children:e.artist})]})]}),(0,S.jsxs)("div",{className:"text-gray-400 text-sm",children:["\u26a1 ",t," votes"]})]})},e.id)})]}),Re.comments.length>0&&(0,S.jsxs)("div",{className:"bg-white/10 rounded-xl p-6",children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"\ud83d\udcac Live Comments"}),(0,S.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Re.comments.slice(-20).reverse().map(e=>(0,S.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg",children:[(0,S.jsx)("p",{className:"text-white font-semibold text-sm",children:e.userName}),(0,S.jsx)("p",{className:"text-gray-300",children:e.text})]},e.id))})]})]})}):"audience"===F&&Ae?(0,S.jsx)("div",{className:"rock-background min-h-screen p-4 pb-24 md:pb-4",children:(0,S.jsxs)("div",{className:"max-w-4xl mx-auto pt-6",children:[(0,S.jsx)("div",{className:"gig-card gig-card-live mb-6",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)("div",{className:"w-4 h-4 bg-neon rounded-full animate-pulse"}),(0,S.jsx)("div",{className:"absolute inset-0 w-4 h-4 bg-neon rounded-full animate-ping"})]}),(0,S.jsx)("span",{className:"concert-heading text-neon text-xl tracking-wider",children:"\ud83d\udd34 LIVE NOW"})]}),(0,S.jsx)("h1",{className:"concert-heading text-4xl md:text-5xl text-white mb-2",children:Ae.artistName}),(0,S.jsxs)("p",{className:"text-electric font-bold text-lg",children:["\ud83d\udccd ",Ae.venueName]}),Ae.venueAddress&&(0,S.jsxs)("p",{className:"text-gray text-sm",children:["\ud83d\udccc ",Ae.venueAddress]}),!1!==(null===Re||void 0===Re?void 0:Re.requestsEnabled)&&(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsxs)("button",{onClick:()=>it(!0),disabled:(Re.songRequests||[]).filter(e=>"pending"===e.status&&e.requesterId===(null===t||void 0===t?void 0:t.uid)).length>0,className:"btn text-lg px-6 py-3 w-full md:w-auto ".concat((Re.songRequests||[]).filter(e=>"pending"===e.status&&e.requesterId===(null===t||void 0===t?void 0:t.uid)).length>0?"btn-ghost opacity-50 cursor-not-allowed":"btn-fire"),children:[(0,S.jsx)(v,{size:24}),(0,S.jsx)("span",{children:(Re.songRequests||[]).filter(e=>"pending"===e.status&&e.requesterId===(null===t||void 0===t?void 0:t.uid)).length>0?"Request Pending...":"Request a Song"})]})}),(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsxs)("button",{onClick:()=>{if(!t)return alert("Please sign in to rate the artist!"),void T(!0);ht(!0)},className:"btn text-lg px-6 py-3 w-full md:w-auto ".concat(xe?"btn-neon":"btn-electric"),children:[(0,S.jsx)(x,{size:24}),(0,S.jsx)("span",{children:xe?"Change Rating (".concat(Se,"\u2605)"):"Rate Artist"})]})}),(null===xt||void 0===xt?void 0:xt.socialMedia)&&(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsx)(Xf,{socialMedia:xt.socialMedia,artistName:Ae.artistName})})]}),(0,S.jsx)("button",{onClick:()=>U("discover"),className:"btn btn-ghost self-start md:self-center",children:"\u2190 Back"})]})}),Re.currentSong&&(0,S.jsxs)("div",{className:"relative mb-6 overflow-hidden rounded-2xl",children:[(0,S.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-magenta/40 via-purple-500/40 to-electric/40 animate-pulse"}),(0,S.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/60"}),(0,S.jsxs)("div",{className:"relative gig-card border-2 border-magenta p-8 text-center",children:[(0,S.jsx)("p",{className:"text-magenta font-bold text-sm uppercase tracking-widest mb-3 animate-pulse",children:"\ud83c\udfb5 NOW PLAYING"}),(0,S.jsx)("h2",{className:"concert-heading text-4xl md:text-5xl text-white mb-3 drop-shadow-lg",children:Re.currentSong.title}),(0,S.jsx)("p",{className:"text-2xl text-electric font-bold",children:Re.currentSong.artist})]})]}),(0,S.jsxs)("div",{className:"gig-card mb-6",children:[(0,S.jsx)("h3",{className:"concert-heading text-3xl text-electric mb-4",children:"\ud83d\udccb UP NEXT"}),0===Re.queuedSongs.length?(0,S.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,S.jsx)("p",{className:"text-gray-light text-lg",children:"No songs in queue"})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"space-y-3",children:[Re.queuedSongs.filter(e=>{var t;return!(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))}).sort((e,t)=>{const n=Re.votes[Math.floor(e.id)]||0;return(Re.votes[Math.floor(t.id)]||0)-n}).map((e,t)=>{const n=Re.votes[Math.floor(e.id)]||0;return(0,S.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 border border-white/10 hover:border-electric/50 transition",children:[(0,S.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,S.jsx)("span",{className:"concert-heading text-electric text-2xl min-w-[40px]",children:t+1}),(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("div",{className:"text-white font-bold text-lg truncate",children:e.title}),(0,S.jsx)("div",{className:"text-gray-light text-sm truncate",children:e.artist})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3 md:ml-auto",children:[n>0&&(0,S.jsxs)("span",{className:"text-magenta font-bold text-lg whitespace-nowrap",children:["\u26a1 ",n]}),(0,S.jsxs)("button",{onClick:()=>Xt(e.id),className:"btn btn-fire text-sm",children:[(0,S.jsx)("span",{children:"\u26a1"}),(0,S.jsx)("span",{children:"Vote"})]})]})]},e.id)}),Re.playedSongs&&Re.playedSongs.length>0&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"border-t border-white/20 my-4 pt-4",children:(0,S.jsx)("h4",{className:"concert-heading text-xl text-gray mb-3",children:"\u2705 ALREADY PLAYED"})}),Re.queuedSongs.filter(e=>Re.playedSongs.includes(e.id)).map(e=>{const t=Re.votes[Math.floor(e.id)]||0;return(0,S.jsx)("div",{className:"bg-gray-500/10 border border-gray-600/50 p-4 rounded-lg opacity-60",children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-3",children:[(0,S.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,S.jsx)("span",{className:"text-neon text-2xl",children:"\u2705"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-gray-300 font-semibold line-through",children:e.title}),(0,S.jsx)("div",{className:"text-gray-400 text-sm",children:e.artist})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[t>0&&(0,S.jsxs)("span",{className:"text-gray-400",children:["\u26a1 ",t]}),(0,S.jsx)("span",{className:"px-4 py-2 bg-gray-600 text-gray-300 rounded-lg font-bold text-sm cursor-not-allowed",children:"\u2705 Played"})]})]})},e.id)})]})]}),(0,S.jsx)("div",{className:"mt-6 p-4 bg-electric/20 border-2 border-electric rounded-lg",children:(0,S.jsx)("p",{className:"text-electric font-bold text-center text-lg",children:"\ud83d\udd25 Vote for songs in tonight's performance! Top voted songs move up the queue \ud83d\udd25"})})]})]}),(0,S.jsxs)("div",{className:"gig-card border-2 border-electric/50 mb-6",children:[(0,S.jsx)("h3",{className:"concert-heading text-3xl text-electric mb-2",children:"\ud83d\udcda MORE SONGS AVAILABLE"}),(0,S.jsx)("p",{className:"text-gray-light text-sm mb-4",children:"Vote for songs not in tonight's setlist! Highly voted songs may get added to the gig."}),(0,S.jsx)("div",{className:"mb-4",children:(0,S.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Search more songs by title or artist...",value:pe,onChange:e=>me(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})}),Ae.masterPlaylist&&0!==Ae.masterPlaylist.length?(0,S.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(()=>{const e=(Re.queuedSongs||[]).map(e=>e.id),t=Ae.masterPlaylist.filter(t=>!e.includes(t.id)&&(t.title.toLowerCase().includes(pe.toLowerCase())||t.artist.toLowerCase().includes(pe.toLowerCase()))).sort((e,t)=>{const n=Re.votes[Math.floor(e.id)]||0;return(Re.votes[Math.floor(t.id)]||0)-n});return 0===t.length?(0,S.jsx)("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:(0,S.jsx)("p",{className:"text-gray-light",children:pe?'No songs found for "'.concat(pe,'"'):"All songs are in the gig playlist!"})}):t.map(e=>{var t;const n=Re.votes[Math.floor(e.id)]||0,r=null===(t=Re.playedSongs)||void 0===t?void 0:t.includes(e.id);return(0,S.jsxs)("div",{className:"p-3 rounded-lg flex flex-col md:flex-row md:justify-between md:items-center gap-3 transition border ".concat(r?"bg-gray-500/10 opacity-50 border-gray-600/50":"bg-white/5 hover:bg-white/10 border-white/10"),children:[(0,S.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,S.jsx)("div",{className:"font-bold truncate ".concat(r?"text-gray-400 line-through":"text-white"),children:e.title}),(0,S.jsx)("div",{className:"text-sm truncate ".concat(r?"text-gray-500":"text-electric"),children:e.artist})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[n>0&&(0,S.jsxs)("span",{className:"font-bold whitespace-nowrap ".concat(r?"text-gray-400":"text-magenta"),children:["\u26a1 ",n]}),r?(0,S.jsx)("span",{className:"px-3 py-1 bg-gray-600 text-gray-300 rounded-lg text-sm cursor-not-allowed",children:"\u2705 Played"}):(0,S.jsxs)("button",{onClick:()=>Xt(e.id),className:"btn btn-electric text-sm",children:[(0,S.jsx)("span",{children:"\u26a1"}),(0,S.jsx)("span",{children:"Vote"})]})]})]},e.id)})})()}):(0,S.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,S.jsx)("p",{className:"text-gray-light",children:"No additional songs available"})})]}),Re.comments.length>0&&(0,S.jsxs)("div",{className:"gig-card",children:[(0,S.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\ud83d\udcac LIVE CHAT"}),(0,S.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:Re.comments.slice(-10).reverse().map(e=>(0,S.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg border border-white/10",children:[(0,S.jsx)("p",{className:"text-electric font-bold text-sm",children:e.userName}),(0,S.jsx)("p",{className:"text-gray-light",children:e.text})]},e.id))})]}),rt&&(0,S.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,S.jsxs)("div",{className:"gig-card max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-magenta",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{className:"concert-heading text-3xl text-magenta",children:"REQUEST A SONG"}),(0,S.jsx)("p",{className:"text-gray-light text-sm mt-2",children:"Send your song request to the artist"})]}),(0,S.jsx)("button",{onClick:()=>{it(!1),at(null),lt("")},className:"text-white hover:text-neon transition",children:(0,S.jsx)(h,{size:32})})]}),(0,S.jsxs)("div",{className:"mb-6 p-4 bg-blue-500/20 border border-blue-400 rounded-lg",children:[(0,S.jsxs)("h4",{className:"text-blue-300 font-bold mb-3 flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\ud83d\udcca"}),(0,S.jsx)("span",{children:"Queue Status"})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray-light",children:"Queue Capacity"}),(0,S.jsxs)("p",{className:"text-white font-bold text-lg",children:[(null===(hn=Re.queuedSongs)||void 0===hn?void 0:hn.length)||0,"/",Re.maxQueueSize||20]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray-light",children:"Songs Played"}),(0,S.jsx)("p",{className:"text-white font-bold text-lg",children:(null===(fn=Re.playedSongs)||void 0===fn?void 0:fn.length)||0})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray-light",children:"Songs Left"}),(0,S.jsx)("p",{className:"text-white font-bold text-lg",children:(Re.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))}).length})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-gray-light",children:"Pending Requests"}),(0,S.jsx)("p",{className:"text-white font-bold text-lg",children:(Re.songRequests||[]).filter(e=>"pending"===e.status).length})]})]}),(0,S.jsx)("div",{className:"mt-3",children:(e=>{const t=Re.maxQueueSize||20,n=(null===(e=Re.queuedSongs)||void 0===e?void 0:e.length)||0,r=(Re.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))}).length;return n>=t?(0,S.jsxs)("p",{className:"text-green-300 text-sm flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\u2705"}),(0,S.jsx)("span",{children:"You can still request! If accepted, the artist will make room in the queue."})]}):r<=3?(0,S.jsxs)("p",{className:"text-yellow-300 text-sm flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\u26a0\ufe0f"}),(0,S.jsxs)("span",{children:["Only ",r," songs left - your request may not be played tonight."]})]}):(0,S.jsxs)("p",{className:"text-green-300 text-sm flex items-center gap-2",children:[(0,S.jsx)("span",{children:"\u2705"}),(0,S.jsx)("span",{children:"Queue has space - great time to request!"})]})})()})]}),(0,S.jsxs)("div",{className:"mb-6",children:[(0,S.jsx)("h3",{className:"text-white font-bold text-xl mb-3",children:"Select a Song"}),(0,S.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto bg-black/30 rounded-lg p-3 border border-white/10",children:Ae.masterPlaylist&&Ae.masterPlaylist.length>0?Ae.masterPlaylist.filter(e=>{var t;if(null!==(t=Re.playedSongs)&&void 0!==t&&t.includes(e.id))return!1;return!(Re.queuedSongs||[]).some(t=>t.id===e.id)}).map(e=>(0,S.jsx)("div",{onClick:()=>at(e),className:"p-3 rounded-lg cursor-pointer transition border-2 ".concat((null===st||void 0===st?void 0:st.id)===e.id?"bg-magenta/30 border-magenta":"bg-white/5 border-white/10 hover:border-electric/50"),children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-white font-bold",children:e.title}),(0,S.jsx)("div",{className:"text-electric text-sm",children:e.artist})]}),(null===st||void 0===st?void 0:st.id)===e.id&&(0,S.jsx)("div",{className:"text-magenta text-2xl",children:"\u2713"})]})},e.id)):(0,S.jsx)("div",{className:"text-center py-8 text-gray-light",children:"No songs available for request"})}),(0,S.jsx)("p",{className:"text-gray-light text-sm mt-2 italic",children:"\ud83d\udca1 Songs already in tonight's setlist can only be voted for, not requested"})]}),st&&(0,S.jsxs)("div",{className:"mb-6 p-4 bg-magenta/20 border-2 border-magenta rounded-lg",children:[(0,S.jsx)("p",{className:"text-magenta font-bold text-sm mb-2",children:"SELECTED SONG:"}),(0,S.jsx)("h4",{className:"text-white font-bold text-xl",children:st.title}),(0,S.jsx)("p",{className:"text-electric",children:st.artist})]}),(0,S.jsxs)("div",{className:"mb-6",children:[(0,S.jsx)("label",{className:"text-white font-bold mb-2 block",children:"Add a Message (Optional)"}),(0,S.jsx)("textarea",{value:ot,onChange:e=>lt(e.target.value),placeholder:"Add a dedication or message...",maxLength:200,className:"w-full px-4 py-3 rounded-lg bg-black/50 text-white placeholder-gray-400 border border-white/20 focus:border-magenta focus:outline-none resize-none",rows:3}),(0,S.jsxs)("div",{className:"text-right text-gray-light text-sm mt-1",children:[ot.length,"/200 characters"]})]}),(0,S.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,S.jsx)("button",{onClick:$t,disabled:!st,className:"flex-1 py-4 rounded-lg font-bold text-lg transition ".concat(st?"btn btn-neon":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:st?"Send Request":"Select a song first"}),(0,S.jsx)("button",{onClick:()=>{it(!1),at(null),lt("")},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-bold transition",children:"Cancel"})]}),(0,S.jsx)("div",{className:"mt-4 p-3 bg-blue-500/20 border border-blue-400/50 rounded-lg",children:(0,S.jsx)("p",{className:"text-blue-300 text-sm",children:"Requests are FREE - no payment required!"})})]})}),dt&&(0,S.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,S.jsxs)("div",{className:"gig-card max-w-md w-full border-2 border-electric",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{className:"concert-heading text-2xl text-electric",children:"\u2b50 RATE THE ARTIST"}),(0,S.jsx)("p",{className:"text-gray-light text-sm mt-2",children:"How's the performance? (Optional)"})]}),(0,S.jsx)("button",{onClick:en,className:"text-white hover:text-neon transition",children:(0,S.jsx)(h,{size:32})})]}),xe&&(0,S.jsx)("div",{className:"mb-4 p-3 bg-neon/20 border border-neon rounded-lg",children:(0,S.jsxs)("p",{className:"text-neon font-bold text-sm text-center",children:["\u2705 You rated this artist ",Se,"\u2605 - Update your rating below"]})}),(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsx)("div",{className:"text-center",children:(0,S.jsx)("p",{className:"text-white text-lg font-bold mb-4",children:(null===Ae||void 0===Ae?void 0:Ae.artistName)||"Artist"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"flex gap-2 justify-center mb-2",children:[1,2,3,4,5].map(e=>(0,S.jsx)("button",{onClick:()=>gt(e),className:"text-5xl transition transform ".concat(ft>=e?"text-yellow-400 scale-110":"text-gray-600 hover:text-yellow-300 hover:scale-105"),children:ft>=e?"\u2b50":"\u2606"},e))}),ft>0&&(0,S.jsxs)("p",{className:"text-center text-electric font-bold text-lg",children:[1===ft&&"Needs Improvement",2===ft&&"Fair",3===ft&&"Good",4===ft&&"Great",5===ft&&"Amazing! \ud83d\udd25"]})]}),(0,S.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,S.jsxs)("button",{onClick:Zt,disabled:0===ft,className:"flex-1 btn text-lg ".concat(0===ft?"btn-ghost opacity-50 cursor-not-allowed":"btn-neon"),children:[(0,S.jsx)("span",{children:"\u2713"}),(0,S.jsx)("span",{children:"Submit Rating"})]}),(0,S.jsx)("button",{onClick:en,className:"btn btn-ghost",children:"Close"})]}),(0,S.jsx)("p",{className:"text-center text-gray-light text-sm",children:"Your rating helps the artist improve!"})]})]})})]})}):"artistProfile"===F&&vt?(0,S.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 p-4",children:(0,S.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,S.jsxs)("button",{onClick:nn,className:"btn btn-ghost mb-6",children:[(0,S.jsx)(N,{size:20}),(0,S.jsx)("span",{children:"Back to Discovery"})]}),(0,S.jsxs)("div",{className:"gig-card border-2 border-electric mb-6",children:[(0,S.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[(0,S.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-magenta to-electric flex items-center justify-center flex-shrink-0",children:(0,S.jsx)(v,{size:64,className:"text-white"})}),(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("h1",{className:"concert-heading text-4xl md:text-5xl text-electric mb-2",children:vt.artistName}),(0,S.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4",children:[(0,S.jsxs)("span",{className:"px-4 py-2 bg-magenta/20 text-magenta rounded-full text-sm font-bold border border-magenta",children:["\ud83c\udfb5 ",vt.genre]}),(0,S.jsxs)("span",{className:"px-4 py-2 bg-electric/20 text-electric rounded-full text-sm font-bold border border-electric",children:["\ud83d\udccd ",vt.location]})]}),(0,S.jsx)("p",{className:"text-gray-light text-lg mb-4",children:vt.bio}),vt.socialMedia&&(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsx)(Xf,{socialMedia:vt.socialMedia,artistName:vt.artistName})})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-white/10",children:[(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)("p",{className:"text-3xl font-bold text-neon",children:bt.length}),(0,S.jsx)("p",{className:"text-gray-light text-sm",children:"Upcoming Gigs"})]}),(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)("p",{className:"text-3xl font-bold text-magenta",children:vt.totalGigs||0}),(0,S.jsx)("p",{className:"text-gray-light text-sm",children:"Total Gigs"})]}),(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)("p",{className:"text-3xl font-bold text-electric",children:vt.followers||0}),(0,S.jsx)("p",{className:"text-gray-light text-sm",children:"Followers"})]})]})]}),(0,S.jsxs)("div",{className:"gig-card border-2 border-magenta",children:[(0,S.jsx)("h2",{className:"concert-heading text-3xl text-magenta mb-6",children:"\ud83c\udfb8 Upcoming Performances"}),0===bt.length?(0,S.jsxs)("div",{className:"text-center py-12",children:[(0,S.jsx)(y,{size:64,className:"text-gray mx-auto mb-4 opacity-50"}),(0,S.jsx)("p",{className:"text-gray-light text-lg",children:"No upcoming gigs scheduled"})]}):(0,S.jsx)("div",{className:"space-y-4",children:bt.map(e=>{const t=new Date(e.gigDate),n="live"===e.status;return(0,S.jsx)("div",{className:"bg-white/5 p-6 rounded-xl border-2 transition ".concat(n?"border-neon animate-pulse":"border-white/10 hover:border-electric/50"),children:(0,S.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,S.jsx)("h3",{className:"text-2xl font-bold text-white",children:e.venueName}),n&&(0,S.jsx)("span",{className:"px-3 py-1 bg-neon/20 text-neon rounded-full text-sm font-bold border border-neon animate-pulse",children:"\ud83d\udd34 LIVE NOW"})]}),e.venueAddress&&(0,S.jsxs)("p",{className:"text-gray-light mb-2",children:["\ud83d\udccd ",e.venueAddress]}),(0,S.jsxs)("div",{className:"flex flex-wrap gap-4 text-electric font-semibold",children:[(0,S.jsxs)("span",{children:["\ud83d\udcc5 ",t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]}),(0,S.jsxs)("span",{children:["\ud83d\udd50 ",e.gigTime]})]}),null!=e.distance&&!isNaN(e.distance)&&Number.isFinite(e.distance)&&(0,S.jsxs)("p",{className:"text-electric font-bold mt-2",children:["\ud83d\udccf ",e.distance<1e3?"".concat(Math.round(e.distance),"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")]})]}),(0,S.jsx)("div",{className:"flex flex-col gap-2",children:n?(0,S.jsxs)("button",{onClick:()=>{Pe(e),De({votes:e.votes||{},queuedSongs:e.queuedSongs||[],playedSongs:e.playedSongs||[],currentSong:e.currentSong||null,songRequests:e.songRequests||[],maxQueueSize:e.maxQueueSize||20}),U("audience")},className:"btn btn-neon",children:[(0,S.jsx)(w,{size:20}),(0,S.jsx)("span",{children:"Join Live Gig"})]}):(0,S.jsx)("button",{onClick:()=>{qe(e),Ge(!0)},className:"btn btn-electric",children:"View Details"})})]})},e.id)})})]}),(0,S.jsxs)("div",{className:"gig-card border-2 border-electric mt-6",children:[(0,S.jsxs)("h2",{className:"concert-heading text-3xl text-electric mb-4",children:["\ud83d\udcd6 About ",vt.artistName]}),(0,S.jsx)("p",{className:"text-white text-lg leading-relaxed",children:vt.bio}),vt.fullName&&(0,S.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,S.jsxs)("p",{className:"text-gray-light text-sm",children:["Artist: ",(0,S.jsx)("span",{className:"text-white font-semibold",children:vt.fullName})]})})]})]})}):(0,S.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 flex items-center justify-center p-4",children:(0,S.jsxs)("div",{className:"text-center text-white",children:[(0,S.jsx)("h1",{className:"text-6xl font-bold mb-4",children:"GigWave"}),(0,S.jsx)("p",{className:"text-xl mb-8",children:"Live Performance Platform"}),(0,S.jsx)("button",{onClick:()=>U("discover"),className:"px-12 py-6 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-xl font-bold text-2xl",children:"Get Started"})]})})}t.createRoot(document.getElementById("root")).render((0,S.jsx)(e.StrictMode,{children:(0,S.jsx)($f,{})}))})()})();
//# sourceMappingURL=main.4c12aaf3.js.map