/*! For license information please see main.9a605e5d.js.LICENSE.txt */
(()=>{var e={43(e,t,n){"use strict";e.exports=n(202)},151(e,t){!function(e){"use strict";var t="0123456789bcdefghjkmnpqrstuvwxyz",n=40007860,r=110574,i=6378137,s=.00669447819799;function a(e){return Math.log(e)/Math.log(2)}function o(e){var t;if(Array.isArray(e))if(2!==e.length)t="expected array of length 2, got length "+e.length;else{var n=e[0],r=e[1];"number"!=typeof n||isNaN(n)?t="latitude must be a number":n<-90||n>90?t="latitude must be within the range [-90, 90]":"number"!=typeof r||isNaN(r)?t="longitude must be a number":(r<-180||r>180)&&(t="longitude must be within the range [-180, 180]")}else t="location must be an array";if(void 0!==t)throw new Error("Invalid GeoFire location '"+e+"': "+t)}function l(e){var n;if("string"!=typeof e)n="geohash must be a string";else if(0===e.length)n="geohash cannot be the empty string";else for(var r=0,i=e;r<i.length;r++){var s=i[r];-1===t.indexOf(s)&&(n="geohash cannot contain '"+s+"'")}if(void 0!==n)throw new Error("Invalid GeoFire geohash '"+e+"': "+n)}function c(e){if("number"!=typeof e||isNaN(e))throw new Error("Error: degrees must be a number");return e*Math.PI/180}function u(e,n){if(void 0===n&&(n=10),o(e),void 0!==n){if("number"!=typeof n||isNaN(n))throw new Error("precision must be a number");if(n<=0)throw new Error("precision must be greater than 0");if(n>22)throw new Error("precision cannot be greater than 22");if(Math.round(n)!==n)throw new Error("precision must be an integer")}for(var r={min:-90,max:90},i={min:-180,max:180},s="",a=0,l=0,c=1;s.length<n;){var u=c?e[1]:e[0],d=c?i:r,h=(d.min+d.max)/2;u>h?(a=1+(a<<1),d.min=h):(a=0+(a<<1),d.max=h),c=!c,l<4?l++:(l=0,s+=t[a],a=0)}return s}function d(e,t){var n=c(t),r=Math.cos(n)*i*Math.PI/180*(1/Math.sqrt(1-s*Math.sin(n)*Math.sin(n)));return r<1e-12?e>0?360:0:Math.min(360,e/r)}function h(e,t){var n=d(e,t);return Math.abs(n)>1e-6?Math.max(1,a(360/n)):1}function f(e){return Math.min(a(20003930/e),110)}function g(e){if(e<=180&&e>=-180)return e;var t=e+180;return t>0?t%360-180:180- -t%360}function p(e,t){var n=t/r,i=Math.min(90,e[0]+n),s=Math.max(-90,e[0]-n),a=2*Math.floor(f(t)),o=2*Math.floor(h(t,i))-1,l=2*Math.floor(h(t,s))-1;return Math.min(a,o,l,110)}function m(e,t){var n=t/r,i=Math.min(90,e[0]+n),s=Math.max(-90,e[0]-n),a=d(t,i),o=d(t,s),l=Math.max(a,o);return[[e[0],e[1]],[e[0],g(e[1]-l)],[e[0],g(e[1]+l)],[i,e[1]],[i,g(e[1]-l)],[i,g(e[1]+l)],[s,e[1]],[s,g(e[1]-l)],[s,g(e[1]+l)]]}function v(e,n){l(e);var r=Math.ceil(n/5);if(e.length<r)return[e,e+"~"];var i=(e=e.substring(0,r)).substring(0,e.length-1),s=t.indexOf(e.charAt(e.length-1)),a=5-(n-5*i.length),o=s>>a<<a,c=o+(1<<a);return c>31?[i+t[o],i+"~"]:[i+t[o],i+t[c]]}e.BASE32=t,e.BITS_PER_CHAR=5,e.E2=s,e.EARTH_EQ_RADIUS=i,e.EARTH_MERI_CIRCUMFERENCE=n,e.EPSILON=1e-12,e.GEOHASH_PRECISION=10,e.MAXIMUM_BITS_PRECISION=110,e.METERS_PER_DEGREE_LATITUDE=r,e.boundingBoxBits=p,e.boundingBoxCoordinates=m,e.degreesToRadians=c,e.distanceBetween=function(e,t){o(e),o(t);var n=c(t[0]-e[0]),r=c(t[1]-e[1]),i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(c(e[0]))*Math.cos(c(t[0]))*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.geohashForLocation=u,e.geohashQuery=v,e.geohashQueryBounds=function(e,t){o(e);var n=Math.max(1,p(e,t)),r=Math.ceil(n/5),i=m(e,t).map(function(e){return v(u(e,r),n)});return i.filter(function(e,t){return!i.some(function(n,r){return t>r&&e[0]===n[0]&&e[1]===n[1]})})},e.latitudeBitsForResolution=f,e.longitudeBitsForResolution=h,e.metersToLongitudeDegrees=d,e.validateGeohash=l,e.validateKey=function(e){var t;if("string"!=typeof e?t="key must be a string":0===e.length?t="key cannot be the empty string":11+e.length>755?t="key is too long to be stored in Firebase":/[\[\].#$\/\u0000-\u001F\u007F]/.test(e)&&(t="key cannot contain any of the following characters: . # $ ] [ /"),void 0!==t)throw new Error("Invalid GeoFire key '"+e+"': "+t)},e.validateLocation=o,e.wrapLongitude=g,Object.defineProperty(e,"__esModule",{value:!0})}(t)},153(e,t,n){"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,p(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+I(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(a,t,i,"",function(e){return e})):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(o=e[c],c);l+=C(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,i,u=s+I(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,p=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,x(e),!p)if(null!==r(c))p=!0,D(N);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function N(e,n){p=!1,m&&(m=!1,y(_),_=-1),g=!0;var s=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,E=null,_=-1,T=5,I=-1;function C(){return!(t.unstable_now()-I<T)}function j(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?S():(k=!1,E=null)}}else k=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=j,S=function(){P.postMessage(null)}}else S=function(){v(j,0)};function D(e){E=e,k||(k=!0,S())}function R(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,D(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(y(_),_=-1):m=!0,R(w,s-a))):(e.sortIndex=o,n(c,e),p||g||(p=!0,D(N))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391(e,t,n){"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579(e,t,n){"use strict";e.exports=n(153)},730(e,t,n){"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function p(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(g,e)||!d.call(f,e)&&(h.test(e)?g[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case N:return"Portal";case E:return"Profiler";case k:return"StrictMode";case C:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){ge.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Se=null,ke=null;function Ee(e){if(e=bi(e)){if("function"!==typeof Ne)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Ne(e.stateNode,e.type,t))}}function _e(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Te(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Ce(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ie(e,t,n)}finally{je=!1,(null!==Se||null!==ke)&&(Ce(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(qe(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ge(i),e;if(a===r)return Ge(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,St,kt,Et,_t=!1,Tt=[],It=null,Ct=null,jt=null,At=new Map,Pt=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){_t=!1,null!==It&&Ft(It)&&(It=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(Ut),Pt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Ct&&zt(Ct,e),null!==jt&&zt(jt,e),At.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Bt=x.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Ht(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Kt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),gn=sn(fn),pn=sn(M({},fn,{dataTransfer:0})),mn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),xn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return kn}var _n=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(_n),In=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(An),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){_e(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Qn(e){Fr(e,0)}function Yn(e){if(K(xi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},kr={};function Er(e){if(Sr[e])return Sr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var _r=Er("animationend"),Tr=Er("animationiteration"),Ir=Er("animationstart"),Cr=Er("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){jr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Ar.length;Dr++){var Rr=Ar[Dr];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(_r,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=s,i=we(n),a=[];e:{var o=jr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case _r:case Tr:case Ir:l=vn;break;case Cr:l=jn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,g=r;null!==g;){var p=(f=g).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Pe(g,h))&&u.push(Wr(g,p,f)))),d)break;g=g.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[gi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,p="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,p="onPointerLeave",h="onPointerEnter",g="pointer"),d=null==l?o:xi(l),f=null==c?o:xi(c),(o=new u(p,g+"leave",l,n,i)).target=d,o.relatedTarget=f,p=null,yi(i)===r&&((u=new u(h,g+"enter",c,n,i)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,g=0,f=u=l;f;f=Kr(f))g++;for(f=0,p=h;p;p=Kr(p))f++;for(;0<g-f;)u=Kr(u),g--;for(;0<f-g;)h=Kr(h),f--;for(;g--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?xi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Jn;else if(Gn(o))if(Xn)m=ar;else{m=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sr);switch(m&&(m=m(e,r))?Wn(a,m,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?xi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(v=Hr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pe(n,s))&&a.unshift(Wr(n,l,o)):i||null!=(l=Pe(n,s))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,gi="__reactContainer$"+di,pi="__reactEvents$"+di,mi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var Ni=[],Si=-1;function ki(e){return{current:e}}function Ei(e){0>Si||(e.current=Ni[Si],Ni[Si]=null,Si--)}function _i(e,t){Si++,Ni[Si]=e.current,e.current=t}var Ti={},Ii=ki(Ti),Ci=ki(!1),ji=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ci),Ei(Ii)}function Ri(e,t,n){if(Ii.current!==Ti)throw Error(s(168));_i(Ii,t),_i(Ci,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,ji=Ii.current,_i(Ii,e),_i(Ci,Ci.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,ji),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(Ii),_i(Ii,e)):Ei(Ci),_i(Ci,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,qi),i}finally{bt=t,Vi=!1}}return null}var Bi=[],Gi=0,Wi=null,Hi=0,Ki=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){Bi[Gi++]=Hi,Bi[Gi++]=Wi,Wi=e,Hi=t}function Zi(e,t,n){Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=Bi[--Gi],Bi[Gi]=null,Hi=Bi[--Gi],Bi[Gi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Xi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function gs(e){null===ss?ss=[e]:ss.push(e)}var ps=x.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case N:return(t=Mc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Rc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case N:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return g(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function p(i,s,o,l){for(var c=null,u=null,d=s,p=s=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var v=f(i,d,o[p],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,p),null===u?c=v:u.sibling=v,u=v,d=m}if(p===o.length)return n(i,d),is&&$i(i,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(i,o[p],l))&&(s=a(d,s,p),null===u?c=d:u.sibling=d,u=d);return is&&$i(i,p),c}for(d=r(i,d);p<o.length;p++)null!==(m=g(d,i,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),s=a(m,s,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),is&&$i(i,p),c}function m(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,p=o,m=o=0,v=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(v=p,p=null):v=p.sibling;var b=f(i,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(i,p),o=a(b,o,m),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(i,p),is&&$i(i,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return is&&$i(i,m),u}for(p=r(i,p);!y.done;m++,y=l.next())null!==(y=g(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),is&&$i(i,m),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=ms(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((s=Rc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=ms(r,s,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Mc(a,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return p(r,s,a,l);if(O(a))return m(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Lc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var xs=bs(!0),ws=bs(!1),Ns=ki(null),Ss=null,ks=null,Es=null;function _s(){Es=ks=Ss=null}function Ts(e){var t=Ns.current;Ei(Ns),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t){Ss=e,Es=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function js(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ss)throw Error(s(308));ks=e,Ss.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var As=null;function Ps(e){null===As?As=[e]:As.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(g=p.payload)){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=p.payload)?g.call(f,d,h):g)||void 0===h)break e;d=M({},d,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Ws=ki(Gs),Hs=ki(Gs),Ks=ki(Gs);function Qs(e){if(e===Gs)throw Error(s(174));return e}function Ys(e,t){switch(_i(Ks,t),_i(Hs,e),_i(Ws,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ws),_i(Ws,t)}function Js(){Ei(Ws),Ei(Hs),Ei(Ks)}function Xs(e){Qs(Ks.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(_i(Hs,e),_i(Ws,n))}function $s(e){Hs.current===e&&(Ei(Ws),Ei(Hs))}var Zs=ki(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=x.ReactCurrentDispatcher,ia=x.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ma(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ol|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Sa(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Oa(_a.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,ja(9,Ea.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(s(349));0!==(30&sa)||ka(n,t,i)}return i}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ia(e)}function _a(e,t,n){return n(function(){Ta(t)&&Ia(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ia(e){var t=Rs(e,1);null!==t&&tc(t,e,1,-1)}function Ca(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return ya().memoizedState}function Pa(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=ja(t,n,s,r))}aa.flags|=e,i.memoizedState=ja(1|t,n,s,r)}function Ra(e,t){return Pa(8390656,8,e,t)}function Oa(e,t){return Da(2048,8,e,t)}function La(e,t){return Da(4,2,e,t)}function Ma(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function Va(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),aa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Wa(){return ya().memoizedState}function Ha(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ya(t,n);else if(null!==(n=Ds(e,t,n,r))){tc(n,e,r,Zl()),Ja(n,t,r)}}function Ka(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ps(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(tc(n,e,r,i=Zl()),Ja(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:js,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:js,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:js,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ha.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ca,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ca(!1),t=e[0];return e=Ga.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&sa)||ka(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(_a.bind(null,r,a,e),[e]),r.flags|=2048,ja(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:js,useCallback:za,useContext:js,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:xa,useRef:Aa,useState:function(){return xa(ba)},useDebugValue:Va,useDeferredValue:function(e){return Ba(ya(),oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:Na,useSyncExternalStore:Sa,useId:Wa,unstable_isNewReconciler:!1},eo={readContext:js,useCallback:za,useContext:js,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:wa,useRef:Aa,useState:function(){return wa(ba)},useDebugValue:Va,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:Na,useSyncExternalStore:Sa,useId:Wa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=ec(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(tc(t,e,r,n),Vs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=js(s):(i=Pi(t)?ji:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=js(s):(s=Pi(t)?ji:Ii.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),qs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bl||(Bl=!0,Gl=r),uo(0,t)},n}function go(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?ws(t,null,n,r):xs(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var s=t.ref;return Cs(t,i),r=pa(e,t,n,r,s,i),n=ma(),null===e||bo?(is&&n&&es(t),t.flags|=1,xo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i))}function No(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ac(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Bo(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Bo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return _o(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_i(Pl,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_i(Pl,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,_i(Pl,Al),Al|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_i(Pl,Al),Al|=r;return xo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,n,r,i){var s=Pi(n)?ji:Ii.current;return s=Ai(t,s),Cs(t,i),n=pa(e,t,n,r,s,i),r=ma(),null===e||bo?(is&&r&&es(t),t.flags|=1,xo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bo(e,t,i))}function To(e,t,n,r,i){if(Pi(n)){var s=!0;Li(t)}else s=!1;if(Cs(t,i),null===t.stateNode)qo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=js(c):c=Ai(t,c=Pi(n)?ji:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Os=!1;var h=t.memoizedState;a.state=h,qs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ci.current||Os?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Os||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=js(l):l=Ai(t,l=Pi(n)?ji:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Os=!1,h=t.memoizedState,a.state=h,qs(t,r,a,i);var g=t.memoizedState;o!==d||h!==g||Ci.current||Os?("function"===typeof f&&(no(t,n,f,r),g=t.memoizedState),(c=Os||io(t,n,c,r,h,g,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,g,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,g,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){Eo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Bo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,o,s)):xo(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ys(e,t.containerInfo)}function jo(e,t,n,r,i){return fs(),gs(i),t.flags|=256,xo(e,t,n,r),t.child}var Ao,Po,Do,Ro={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_i(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,i,0,null),e=Rc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Ro,e):Mo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(a=Rc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xs(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Il)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rs(e,i),tc(r,e,i,-1))}return gc(),Fo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=Ji,Ki[Qi++]=Xi,Ki[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=Mo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,i}return e=(o=e.child).sibling,i=Pc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Mo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&gs(r),xs(t,e.child,null,n),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Vo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ho(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Pi(t.type)&&Di(),Wo(t),null;case 3:return r=t.stateNode,Js(),Ei(Ci),Ei(Ii),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sc(ss),ss=null))),Wo(t),null;case 5:$s(t);var i=Qs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Qs(Ws.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ao(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Do(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ks.current),Qs(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(sc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Js(),null===e&&qr(t.stateNode.containerInfo),Wo(t),null;case 10:return Ts(t.type._context),Wo(t),null;case 19:if(Ei(Zs),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>zl&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*Xe()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,_i(Zs,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ei(Ci),Ei(Ii),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return Js(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Yo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function Zo(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Zo(t,n,s)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[pi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Yo||$o(n,t);case 6:var r=cl,i=ul;cl=null,dl(e,t,n),ul=i,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&Zo(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Yo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,dl(e,t,n),Yo=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));hl(a,o,i),cl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),ml(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(m){Sc(e,e.return,m)}try{tl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),ml(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(gl(t,e),ml(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;null!=g?ne(i,!!a.multiple,g,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),ml(e);break;case 13:gl(t,e),ml(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,gl(t,e),Yo=u):gl(t,e),ml(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(g=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:$o(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:$o(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==g?(g.return=f,Xo=g):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),ml(e),4&r&&fl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ll(e,al(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ol(e,al(e),a);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var i=Xo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Qo;var c=Yo;if(Qo=a,(Yo=l)&&!c)for(Xo=i;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Xo=l):wl(i);for(;null!==s;)Xo=s,yl(s,t,n),s=s.sibling;Xo=i,Qo=o,Yo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xo=s):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&rl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{rl(t)}catch(l){Sc(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var Nl,Sl=Math.ceil,kl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,_l=x.ReactCurrentBatchConfig,Tl=0,Il=null,Cl=null,jl=0,Al=0,Pl=ki(0),Dl=0,Rl=null,Ol=0,Ll=0,Ml=0,Fl=null,Ul=null,Vl=0,zl=1/0,ql=null,Bl=!1,Gl=null,Wl=null,Hl=!1,Kl=null,Ql=0,Yl=0,Jl=null,Xl=-1,$l=0;function Zl(){return 0!==(6&Tl)?Xe():-1!==Xl?Xl:Xl=Xe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==jl?jl&-jl:null!==ps.transition?(0===$l&&($l=pt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function tc(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Ll|=n),4===Dl&&ac(e,jl)),nc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(zl=Xe()+500,Ui&&qi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Il?jl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(oc.bind(null,e)):zi(oc.bind(null,e)),ai(function(){0===(6&Tl)&&qi()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,$l=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=pc(e,r);else{t=r;var i=Tl;Tl|=2;var a=fc();for(Il===e&&jl===t||(ql=null,zl=Xe()+500,dc(e,t));;)try{vc();break}catch(l){hc(e,l)}_s(),kl.current=a,Tl=i,null!==Cl?t=0:(Il=null,jl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=gt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rl,dc(e,0),ac(e,r),nc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=pc(e,r))&&(0!==(a=gt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Rl,dc(e,0),ac(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Ul,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Ul,ql),t);break}xc(e,Ul,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Ul,ql),r);break}xc(e,Ul,ql);break;default:throw Error(s(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=pc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Ml,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function oc(e){if(0!==(6&Tl))throw Error(s(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=pc(e,t);if(0!==e.tag&&2===n){var r=gt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,dc(e,0),ac(e,t),nc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,ql),nc(e,Xe()),null}function lc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(zl=Xe()+500,Ui&&qi())}}function cc(e){null!==Kl&&0===Kl.tag&&0===(6&Tl)&&wc();var t=Tl;Tl|=1;var n=_l.transition,r=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=r,_l.transition=n,0===(6&(Tl=t))&&qi()}}function uc(){Al=Pl.current,Ei(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Js(),Ei(Ci),Ei(Ii),na();break;case 5:$s(r);break;case 4:Js();break;case 13:case 19:Ei(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Il=e,Cl=e=Pc(e.current,null),jl=Al=t,Dl=0,Rl=null,Ml=Ll=Ol=0,Ul=Fl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}As=null}return e}function hc(e,t){for(;;){var n=Cl;try{if(_s(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,El.current=null,null===n||null===n.return){Dl=1,Rl=t,Cl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=mo(o);if(null!==g){g.flags&=-257,vo(g,o,l,0,t),1&g.mode&&po(a,u,t),c=u;var p=(t=g).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){po(a,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),gs(lo(c,l));break e}}a=c=lo(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,go(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(x){t=x,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function fc(){var e=kl.current;return kl.current=Xa,null===e?Xa:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Il||0===(268435455&Ol)&&0===(268435455&Ll)||ac(Il,jl)}function pc(e,t){var n=Tl;Tl|=2;var r=fc();for(Il===e&&jl===t||(ql=null,dc(e,t));;)try{mc();break}catch(i){hc(e,i)}if(_s(),Tl=n,kl.current=r,null!==Cl)throw Error(s(261));return Il=null,jl=0,Dl}function mc(){for(;null!==Cl;)yc(Cl)}function vc(){for(;null!==Cl&&!Ye();)yc(Cl)}function yc(e){var t=Nl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?bc(e):Cl=t,El.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ho(n,t,Al)))return void(Cl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Cl=n);if(null===e)return Dl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Dl&&(Dl=5)}function xc(e,t,n){var r=bt,i=_l.transition;try{_l.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Kl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Il&&(Cl=Il=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Ic(tt,function(){return wc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var o=bt;bt=1;var l=Tl;Tl|=4,El.current=null,function(e,t){if(ei=Gt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(g=h.firstChild);)f=h,h=g;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(g=h.nextSibling))break;f=(h=f).parentNode}h=g}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}p=el,el=!1}(e,n),pl(n,e),gr(ti),Gt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Je(),Tl=l,bt=o,_l.transition=a}else e.current=n;if(Hl&&(Hl=!1,Kl=e,Ql=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bl)throw Bl=!1,e=Gl,Gl=null,e;0!==(1&Ql)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,qi()}(e,t,n,r)}finally{_l.transition=i,bt=r}return null}function wc(){if(null!==Kl){var e=xt(Ql),t=_l.transition,n=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Ql=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:tl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var f=(d=Xo).sibling,g=d.return;if(il(d),d===u){Xo=null;break}if(null!==f){f.return=g,Xo=f;break}Xo=g}}}var p=a.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Xo=y;break e}Xo=a.return}}var b=e.current;for(Xo=b;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(N){Sc(l,l.return,N)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(Tl=i,qi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(N){}r=!0}return r}finally{bt=n,_l.transition=t}}return!1}function Nc(e,t,n){e=Us(e,t=fo(0,t=lo(n,t),1),1),t=Zl(),null!==e&&(vt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=go(t,e=lo(n,e),1),1),e=Zl(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(jl&n)===n&&(4===Dl||3===Dl&&(130023424&jl)===jl&&500>Xe()-Vl?dc(e,0):Ml|=n),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zl();null!==(e=Rs(e,t))&&(vt(e,t,n),nc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function Ic(e,t){return Ke(e,t)}function Cc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Cc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Ac(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Rc(n.children,i,a,t);case k:o=8,i|=8;break;case E:return(e=jc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case C:return(e=jc(13,n,t,i)).elementType=C,e.lanes=a,e;case j:return(e=jc(19,n,t,i)).elementType=j,e.lanes=a,e;case D:return Oc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case T:o=9;break e;case I:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Vc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,s,a,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=Vc(null),n=e.current,(s=Fs(r=Zl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,s=Zl(),a=ec(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(tc(e,i,a,s),Vs(e,i,a)),a}function Bc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Co(t),fs();break;case 5:Xs(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(Ns,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(_i(Zs,1&Zs.current),null!==(e=Bo(e,t,n))?e.sibling:null);_i(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Bo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Cs(t,n),i=pa(null,t,r,e,i,n);var a=ma();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Io(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),xo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),i){case 0:t=_o(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=No(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Co(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),qs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=jo(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=jo(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Bo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Eo(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,_i(Ns,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ci.current){t=Bo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cs(t,n),r=r(i=js(i)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),No(e,t,r,i=to(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),qo(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Cs(t,n),so(t,r,i),oo(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return ko(e,t,n)}throw Error(s(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function $c(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Bc(a);o.call(e)}}qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Bc(a);s.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[gi]=a.current,qr(8===e.nodeType?e.parentNode:e),cc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Bc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[gi]=l.current,qr(8===e.nodeType?e.parentNode:e),cc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Bc(a)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){qc(null,e,null,null)}),t[gi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Xe()),0===(6&Tl)&&(zl=Xe()+500,qi()))}break;case 13:cc(function(){var t=Rs(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),Wc(e,1)}},Nt=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)tc(t,e,134217728,Zl());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=ec(e),n=Rs(e,t);if(null!==n)tc(n,e,t,Zl());Wc(e,t)}},kt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ce=cc;var Zc={usingClientEntryPoint:!1,Events:[bi,xi,wi,_e,Te,lc]},eu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(tu),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,a,o),e[gi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){"use strict";e.exports=n(234)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.p="/",(()=>{"use strict";var e=n(43),t=n(391);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l=n.p+"static/media/bg-gig-collage.6e3c98f0e5074c71cff0.jpg",c=n.p+"static/media/cassette-icon.2a4409f40eaf36d90cc0.png",u=n.p+"static/media/vote-icon.eff71fb5640d76a9c0d9.png",d=n.p+"static/media/artist-profile-icon.ff343ba9a1fc19d77baf.png",h=n.p+"static/media/rate-artist-icon.4bd05b0bcef7e481cf86.png",f=n.p+"static/media/tip-jar-icon.d7a4c7a3fb6345e02682.png",g=n.p+"static/media/support-icon.a28befe5bcf940126124.png";n.p;var p=n(579);function m(t){let{onSelect:n,placeholder:r="Type address..."}=t;const i=(0,e.useRef)(null);return(0,e.useEffect)(()=>{const e=setInterval(()=>{var t,r;if(null!==(t=window.google)&&void 0!==t&&null!==(r=t.maps)&&void 0!==r&&r.places&&i.current){clearInterval(e);const t=new window.google.maps.places.Autocomplete(i.current,{fields:["formatted_address","geometry","name"]});if(t.addListener("place_changed",()=>{const e=t.getPlace();if(null!==e&&void 0!==e&&e.geometry){const t={address:e.formatted_address,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},name:e.name};console.log("\u2705 ADDRESS CAPTURED:",t),n(t)}}),console.log("\u2705 Autocomplete ready"),!document.getElementById("pac-text-fix")){const e=document.createElement("style");e.id="pac-text-fix",e.innerHTML="\n            .pac-item,\n            .pac-item *,\n            .pac-item-query,\n            .pac-matched {\n              color: #000000 !important;\n            }\n          ",document.head.appendChild(e)}}},100);return()=>clearInterval(e)},[n]),(0,p.jsx)("input",{ref:i,type:"text",placeholder:r,style:{width:"100%",padding:"12px 16px",backgroundColor:"#2a2a2a",color:"#ffffff",border:"2px solid #00d4ff",borderRadius:"8px",fontSize:"16px",outline:"none"}})}var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const y=["color","size","strokeWidth","absoluteStrokeWidth","children"];var b=(t,n)=>{const r=(0,e.forwardRef)((r,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:u}=r,d=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,y);return(0,e.createElement)("svg",o(o({ref:i},v),{},{width:a,height:a,stroke:s,strokeWidth:c?24*Number(l)/Number(a):l,className:"lucide lucide-".concat((h=t,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...n.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...(Array.isArray(u)?u:[u])||[]]);var h});return r.displayName="".concat(t),r};const x=b("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),w=b("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),N=b("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),S=b("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),k=b("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),E=b("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),_=b("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),T=b("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),I=b("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),C=b("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),j=b("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),A=b("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),P=b("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var D={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},R=e.createContext&&e.createContext(D),O=["attr","size","title"];function L(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){V(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(t){return t&&t.map((t,n)=>e.createElement(t.tag,U({key:n},t.attr),z(t.child)))}function q(t){return n=>e.createElement(B,M({attr:U({},t.attr)},n),z(t.child))}function B(t){var n=n=>{var r,{attr:i,size:s,title:a}=t,o=L(t,O),l=s||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",M({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:r,style:U(U({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&e.createElement("title",null,a),t.children)};return void 0!==R?e.createElement(R.Consumer,null,e=>n(e)):n(D)}function G(e){return q({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function W(e){return q({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function H(e){return q({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function K(e){return q({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}const Q=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Q(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new J;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class J extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X=function(e){return function(e){const t=Q(e);return Y.encodeByteArray(t,!0)}(e).replace(/\./g,"")},$=function(e){try{return Y.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Z=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ee=()=>{try{return Z()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyC3kQTbaNNYojEIx1jaU9p0C8K4ue7NFIs",REACT_APP_FIREBASE_APP_ID:"1:253503195277:web:c6c109ccee6fdbd9c57ac4",REACT_APP_FIREBASE_AUTH_DOMAIN:"gigwave-397a4.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"253503195277",REACT_APP_FIREBASE_PROJECT_ID:"gigwave-397a4",REACT_APP_FIREBASE_STORAGE_BUCKET:"gigwave-397a4.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&$(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},te=e=>{var t,n;return null===(n=null===(t=ee())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ne=()=>{var e;return null===(e=ee())||void 0===e?void 0:e.config},re=e=>{var t;return null===(t=ee())||void 0===t?void 0:t["_".concat(e)]};class ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function se(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ae(){return!function(){var e;const t=null===(e=ee())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oe(){try{return"object"===typeof indexedDB}catch(e){return!1}}class le extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ue,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new le(n,s,t)}}const ue=/\{\$([^}]+)}/g;function de(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(he(n)&&he(s)){if(!de(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function he(e){return null!==e&&"object"===typeof e}function fe(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ge(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function pe(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class me{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ve),void 0===r.error&&(r.error=ve),void 0===r.complete&&(r.complete=ve);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ve(){}function ye(e){return e&&e._delegate?e._delegate:e}class be{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xe="[DEFAULT]";class we{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ie;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xe})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===xe?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.component?this.component.multipleInstances?e:xe:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new we(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Se=[];var ke;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ke||(ke={}));const Ee={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},_e=ke.INFO,Te={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Ie=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Te[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Ce{constructor(e){this.name=e,this._logLevel=_e,this._logHandler=Ie,this._userLogHandler=null,Se.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...t),this._logHandler(this,ke.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...t),this._logHandler(this,ke.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.INFO,...t),this._logHandler(this,ke.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.WARN,...t),this._logHandler(this,ke.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...t),this._logHandler(this,ke.ERROR,...t)}}let je,Ae;const Pe=new WeakMap,De=new WeakMap,Re=new WeakMap,Oe=new WeakMap,Le=new WeakMap;let Me={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return De.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ve(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Fe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ae||(Ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ze(this),n),Ve(Pe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ve(e.apply(ze(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ze(this),t,...r);return Re.set(s,t.sort?t.sort():[t]),Ve(s)}}function Ue(e){return"function"===typeof e?Fe(e):(e instanceof IDBTransaction&&function(e){if(De.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});De.set(e,t)}(e),t=e,(je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Me):e);var t}function Ve(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ve(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Pe.set(t,e)}).catch(()=>{}),Le.set(t,e),t}(e);if(Oe.has(e))return Oe.get(e);const t=Ue(e);return t!==e&&(Oe.set(e,t),Le.set(t,e)),t}const ze=e=>Le.get(e);const qe=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],Ge=new Map;function We(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ge.get(t))return Ge.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Be.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!qe.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Ge.set(t,s),s}Me=(e=>o(o({},e),{},{get:(t,n,r)=>We(t,n)||e.get(t,n,r),has:(t,n)=>!!We(t,n)||e.has(t,n)}))(Me);class He{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Ke="@firebase/app",Qe="0.10.13",Ye=new Ce("@firebase/app"),Je="@firebase/app-compat",Xe="@firebase/analytics-compat",$e="@firebase/analytics",Ze="@firebase/app-check-compat",et="@firebase/app-check",tt="@firebase/auth",nt="@firebase/auth-compat",rt="@firebase/database",it="@firebase/data-connect",st="@firebase/database-compat",at="@firebase/functions",ot="@firebase/functions-compat",lt="@firebase/installations",ct="@firebase/installations-compat",ut="@firebase/messaging",dt="@firebase/messaging-compat",ht="@firebase/performance",ft="@firebase/performance-compat",gt="@firebase/remote-config",pt="@firebase/remote-config-compat",mt="@firebase/storage",vt="@firebase/storage-compat",yt="@firebase/firestore",bt="@firebase/vertexai-preview",xt="@firebase/firestore-compat",wt="firebase",Nt="[DEFAULT]",St={[Ke]:"fire-core",[Je]:"fire-core-compat",[$e]:"fire-analytics",[Xe]:"fire-analytics-compat",[et]:"fire-app-check",[Ze]:"fire-app-check-compat",[tt]:"fire-auth",[nt]:"fire-auth-compat",[rt]:"fire-rtdb",[it]:"fire-data-connect",[st]:"fire-rtdb-compat",[at]:"fire-fn",[ot]:"fire-fn-compat",[lt]:"fire-iid",[ct]:"fire-iid-compat",[ut]:"fire-fcm",[dt]:"fire-fcm-compat",[ht]:"fire-perf",[ft]:"fire-perf-compat",[gt]:"fire-rc",[pt]:"fire-rc-compat",[mt]:"fire-gcs",[vt]:"fire-gcs-compat",[yt]:"fire-fst",[xt]:"fire-fst-compat",[bt]:"fire-vertex","fire-js":"fire-js",[wt]:"fire-js-all"},kt=new Map,Et=new Map,_t=new Map;function Tt(e,t){try{e.container.addComponent(t)}catch(n){Ye.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function It(e){const t=e.name;if(_t.has(t))return Ye.debug("There were multiple attempts to register component ".concat(t,".")),!1;_t.set(t,e);for(const n of kt.values())Tt(n,e);for(const n of Et.values())Tt(n,e);return!0}function Ct(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jt(e){return void 0!==e.settings}const At=new ce("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Pt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new be("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw At.create("app-deleted",{appName:this._name})}}const Dt="10.14.1";function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw At.create("bad-app-name",{appName:String(i)});if(n||(n=ne()),!n)throw At.create("no-options");const s=kt.get(i);if(s){if(de(n,s.options)&&de(r,s.config))return s;throw At.create("duplicate-app",{appName:i})}const a=new Ne(i);for(const l of _t.values())a.addComponent(l);const o=new Pt(n,r,a);return kt.set(i,o),o}function Ot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;const t=kt.get(e);if(!t&&e===Nt&&ne())return Rt();if(!t)throw At.create("no-app",{appName:e});return t}function Lt(e,t,n){var r;let i=null!==(r=St[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ye.warn(e.join(" "))}It(new be("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Mt="firebase-heartbeat-store";let Ft=null;function Ut(){return Ft||(Ft=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Ve(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Ve(a.result),e.oldVersion,e.newVersion,Ve(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Mt)}catch(n){console.warn(n)}}}).catch(e=>{throw At.create("idb-open",{originalErrorMessage:e.message})})),Ft}async function Vt(e,t){try{const n=(await Ut()).transaction(Mt,"readwrite"),r=n.objectStore(Mt);await r.put(t,zt(e)),await n.done}catch(n){if(n instanceof le)Ye.warn(n.message);else{const e=At.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ye.warn(e.message)}}}function zt(e){return"".concat(e.name,"!").concat(e.options.appId)}class qt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){Ye.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Bt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Wt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=X(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ye.warn(t),""}}}function Bt(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!oe()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ut()).transaction(Mt),n=await t.objectStore(Mt).get(zt(e));return await t.done,n}catch(t){if(t instanceof le)Ye.warn(t.message);else{const e=At.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ye.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wt(e){return X(JSON.stringify({version:2,heartbeats:e})).length}var Ht;Ht="",It(new be("platform-logger",e=>new He(e),"PRIVATE")),It(new be("heartbeat",e=>new qt(e),"PRIVATE")),Lt(Ke,Qe,Ht),Lt(Ke,Qe,"esm2017"),Lt("fire-js","");Lt("firebase","10.14.1","app");var Kt,Qt,Yt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Jt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function g(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=m(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new p(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),p=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,g(n,2*i+2*s),n[2*i+2*s+1]+=l*m,g(n,2*i+2*s+1),n[2*i+2*s+1]+=f*p,g(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,g(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Qt=Jt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Kt=Jt.Integer=r}).apply("undefined"!==typeof Yt?Yt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Xt,$t,Zt,en,tn,nn,rn,sn,an="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},on={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof an&&an];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function g(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout(()=>{throw e},0)}function k(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _,e=>e.reset());class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(A)}};var A=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){S(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function P(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=B(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),W={};function H(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[G]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[G]=null)):V(e)}}}function X(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[G])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;w(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&q(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function ge(){}function pe(e){return e.h||(e.h=e.i())}function me(){}ge.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function be(){D.call(this,"c")}d(ye,D),d(be,D);var xe={},we=null;function Ne(){return we=we||new ne}function Se(e){D.call(this,xe.La,e)}function ke(e){const t=Ne();re(t,new Se(t))}function Ee(e,t){D.call(this,xe.STAT_EVENT,e),this.stat=t}function _e(e){const t=Ne();re(t,new Ee(t,e))}function Te(e,t){D.call(this,xe.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(Se,D),xe.STAT_EVENT="statevent",d(Ee,D),xe.Ma="timingevent",d(Te,D),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ae,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Re,ge),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=En(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var a=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,Ge(e,e.I)}function Ge(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||xn(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),Jt(n)}mn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else Nn(n,11)}else if((e.K||n.g==e)&&bn(n),!g(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),Be(o)),r.g=a}else pn(r);0<n.i.length&&un(n)}else"stop"!=c[0]&&"close"!=c[0]||Nn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Nn(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||ke(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Ht(this.g);e="";var s=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),He(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!g(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ke(this),He(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=qe(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),vn(d),d.M=!0,_e(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),He(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?xn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(g(e[r]))continue;var n=N(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ke(this),He(this)}}}catch(ln){}},Oe.prototype.cancel=function(){this.J=!0,Ke(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),_e(17)),Ke(this),this.s=2,He(this)):Ge(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var pt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){Nt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return Nt(e),t=_t(e,t),e.g.has(t)}function Et(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new fe}function Ct(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){Nt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,kt(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(jt,ge),jt.prototype.g=function(){return new At(this.l,this.j)},jt.prototype.i=(pt={},function(){return pt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Bt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Wt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){Gt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Gt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(dn){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(cn(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),fn(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=En(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}Sn(e)}function Jt(e){e.g&&(vn(e),e.g.cancel(),e.g=null)}function cn(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function un(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||j(),I||(T(),I=!0),C.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),fn(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=gn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function fn(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function gn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Ct(o,e,"req"+n+"_")}catch(ln){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||j(),I||(T(),I=!0),C.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function vn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function yn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function bn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function xn(e,t){var n=null;if(e.g==t){bn(e),vn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ne(),new Te(r,n)),un(e)}else pn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Nn(e,5);break;case 4:Nn(e,10);break;case 3:Nn(e,6);break;default:Nn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function Nn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ce;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),Sn(e),cn(e)}function Sn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),fn(e,r),r}function En(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new jt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function _n(){}function Tn(){}function In(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!g(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!g(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function Cn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jn(){be.call(this),this.status=1}function An(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),un(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=gn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ot(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||Xe(this.h)||hn(this))},e.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Jt(this),yn(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),mn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=_n.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Tn.prototype.g=function(e,t){return new In(e,t)},d(In,ne),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Yt(this.g)},In.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&un(t)},In.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,In.aa.N.call(this)},d(Cn,ye),d(jn,be),d(An,_n),An.prototype.ua=function(){re(this.g,"a")},An.prototype.ta=function(e){re(this.g,new Cn(e))},An.prototype.sa=function(e){re(this.g,new jn)},An.prototype.ra=function(){re(this.g,"b")},Tn.prototype.createWebChannel=Tn.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,sn=on.createWebChannelTransport=function(){return new Tn},rn=on.getStatEventTarget=function(){return Ne()},nn=on.Event=xe,tn=on.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,en=on.ErrorCode=Pe,De.COMPLETE="complete",Zt=on.EventType=De,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,$t=on.WebChannel=me,on.FetchXmlHttpFactory=jt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Xt=on.XhrIo=Mt}).apply("undefined"!==typeof an?an:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ln="@firebase/firestore";class cn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");let un="10.14.0";const dn=new Ce("@firebase/firestore");function hn(){return dn.logLevel}function fn(e){if(dn.logLevel<=ke.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mn);dn.debug("Firestore (".concat(un,"): ").concat(e),...i)}}function gn(e){if(dn.logLevel<=ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mn);dn.error("Firestore (".concat(un,"): ").concat(e),...i)}}function pn(e){if(dn.logLevel<=ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mn);dn.warn("Firestore (".concat(un,"): ").concat(e),...i)}}function mn(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(un,") INTERNAL ASSERTION FAILED: ")+e;throw gn(t),new Error(t)}function yn(e,t){e||vn()}function bn(e,t){return e}const xn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wn extends le{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Nn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Sn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class kn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class En{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _n{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yn(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Nn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nn,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{fn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(fn("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nn)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(fn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(yn("string"==typeof t.accessToken),new Sn(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yn(null===e||"string"==typeof e),new cn(e)}}class Tn{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class In{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Tn(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jn{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){yn(void 0===this.o);const n=e=>{null!=e.error&&fn("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,fn("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{fn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):fn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(yn("string"==typeof e.token),this.R=e.token,new Cn(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function An(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Pn{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=An(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Dn(e,t){return e<t?-1:e>t?1:0}function Rn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wn(xn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wn(xn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new wn(xn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wn(xn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new On(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ln{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ln(e)}static min(){return new Ln(new On(0,0))}static max(){return new Ln(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mn{constructor(e,t,n){void 0===t?t=0:t>e.length&&vn(),void 0===n?n=e.length-t:n>e.length-t&&vn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Mn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fn extends Mn{construct(e,t,n){return new Fn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new wn(xn.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Fn(e)}static emptyPath(){return new Fn([])}}const Un=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Mn{construct(e,t,n){return new Vn(e,t,n)}static isValidIdentifier(e){return Un.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vn(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new wn(xn.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new wn(xn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new wn(xn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new wn(xn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}class zn{constructor(e){this.path=e}static fromPath(e){return new zn(Fn.fromString(e))}static fromName(e){return new zn(Fn.fromString(e).popFirst(5))}static empty(){return new zn(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zn(new Fn(e.slice()))}}class qn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}qn.UNKNOWN_ID=-1;function Bn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ln.fromTimestamp(1e9===r?new On(n+1,0):new On(n,r));return new Wn(i,zn.empty(),t)}function Gn(e){return new Wn(e.readTime,e.key,-1)}class Wn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Wn(Ln.min(),zn.empty(),-1)}static max(){return new Wn(Ln.max(),zn.empty(),-1)}}function Hn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zn.comparator(e.documentKey,t.documentKey),0!==n?n:Dn(e.largestBatchId,t.largestBatchId))}const Kn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Yn(e){if(e.code!==xn.FAILED_PRECONDITION||e.message!==Kn)throw e;fn("LocalStore","Unexpectedly lost primary lease")}class Jn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Jn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Jn?t:Jn.resolve(t)}catch(e){return Jn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Jn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Jn.reject(t)}static resolve(e){return new Jn((t,n)=>{t(e)})}static reject(e){return new Jn((t,n)=>{n(e)})}static waitFor(e){return new Jn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Jn.resolve(!1);for(const n of e)t=t.next(e=>e?Jn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Jn((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Jn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Xn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $n(e){return"IndexedDbTransactionError"===e.name}class Zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function er(e){return null==e}function tr(e){return 0===e&&1/e==-1/0}function nr(e){return"number"==typeof e&&Number.isInteger(e)&&!tr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Zn.oe=-1;const rr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ir=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sr=ir,ar=[...sr,"indexConfiguration","indexState","indexEntries"];function or(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ur{constructor(e,t){this.comparator=e,this.root=t||hr.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dr(this.root,e,this.comparator,!1)}getReverseIterator(){return new dr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dr(this.root,e,this.comparator,!0)}}class dr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:hr.RED,this.left=null!=r?r:hr.EMPTY,this.right=null!=i?i:hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new hr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return hr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vn();if(this.right.isRed())throw vn();const e=this.left.check();if(e!==this.right.check())throw vn();return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1,hr.EMPTY=new class{constructor(){this.size=0}get key(){throw vn()}get value(){throw vn()}get color(){throw vn()}get left(){throw vn()}get right(){throw vn()}copy(e,t,n,r,i){return this}insert(e,t,n){return new hr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gr(this.data.getIterator())}getIteratorFrom(e){return new gr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof fr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class gr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pr{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new pr([])}unionWith(e){let t=new fr(Vn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class mr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new mr("Invalid base64 string: "+e):e}}(e);return new vr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vr.EMPTY_BYTE_STRING=new vr("");const yr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(e){if(yn(!!e),"string"==typeof e){let t=0;const n=yr.exec(e);if(yn(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xr(e.seconds),nanos:xr(e.nanos)}}function xr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wr(e){return"string"==typeof e?vr.fromBase64String(e):vr.fromUint8Array(e)}function Nr(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sr(e){const t=e.mapValue.fields.__previous_value__;return Nr(t)?Sr(t):t}function kr(e){const t=br(e.mapValue.fields.__local_write_time__.timestampValue);return new On(t.seconds,t.nanos)}class Er{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class _r{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _r("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _r&&e.projectId===this.projectId&&e.database===this.database}}const Tr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ir(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nr(e)?4:Gr(e)?9007199254740991:qr(e)?10:11:vn()}function Cr(e,t){if(e===t)return!0;const n=Ir(e);if(n!==Ir(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kr(e).isEqual(kr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=br(e.timestampValue),r=br(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wr(e.bytesValue).isEqual(wr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xr(e.geoPointValue.latitude)===xr(t.geoPointValue.latitude)&&xr(e.geoPointValue.longitude)===xr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xr(e.integerValue)===xr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xr(e.doubleValue),r=xr(t.doubleValue);return n===r?tr(n)===tr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Rn(e.arrayValue.values||[],t.arrayValue.values||[],Cr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(or(n)!==or(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Cr(n[i],r[i])))return!1;return!0}(e,t);default:return vn()}}function jr(e,t){return void 0!==(e.values||[]).find(e=>Cr(e,t))}function Ar(e,t){if(e===t)return 0;const n=Ir(e),r=Ir(t);if(n!==r)return Dn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xr(e.integerValue||e.doubleValue),r=xr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pr(e.timestampValue,t.timestampValue);case 4:return Pr(kr(e),kr(t));case 5:return Dn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wr(e),r=wr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Dn(n[i],r[i]);if(0!==e)return e}return Dn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Dn(xr(e.latitude),xr(t.latitude));return 0!==n?n:Dn(xr(e.longitude),xr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Dr(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=Dn((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Dr(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Tr.mapValue&&t===Tr.mapValue)return 0;if(e===Tr.mapValue)return 1;if(t===Tr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Dn(r[a],s[a]);if(0!==e)return e;const t=Ar(n[r[a]],i[s[a]]);if(0!==t)return t}return Dn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw vn()}}function Pr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Dn(e,t);const n=br(e),r=br(t),i=Dn(n.seconds,r.seconds);return 0!==i?i:Dn(n.nanos,r.nanos)}function Dr(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ar(n[i],r[i]);if(e)return e}return Dn(n.length,r.length)}function Rr(e){return Or(e)}function Or(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=br(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Or(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Or(e.fields[i]));return n+"}"}(e.mapValue):vn()}function Lr(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Mr(e){return!!e&&"integerValue"in e}function Fr(e){return!!e&&"arrayValue"in e}function Ur(e){return!!e&&"nullValue"in e}function Vr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zr(e){return!!e&&"mapValue"in e}function qr(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Br(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return lr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Br(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Br(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Gr(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Wr{constructor(e){this.value=e}static empty(){return new Wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Br(t)}setAll(e){let t=Vn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Br(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());zr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){lr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Wr(Br(this.value))}}function Hr(e){const t=[];return lr(e.fields,(e,n)=>{const r=new Vn([e]);if(zr(n)){const e=Hr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new pr(t)}class Kr{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Kr(e,0,Ln.min(),Ln.min(),Ln.min(),Wr.empty(),0)}static newFoundDocument(e,t,n,r){return new Kr(e,1,t,Ln.min(),n,r,0)}static newNoDocument(e,t){return new Kr(e,2,t,Ln.min(),Ln.min(),Wr.empty(),0)}static newUnknownDocument(e,t){return new Kr(e,3,t,Ln.min(),Ln.min(),Wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ln.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Qr{constructor(e,t){this.position=e,this.inclusive=t}}function Yr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?zn.comparator(zn.fromName(a.referenceValue),n.key):Ar(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Jr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Cr(e.position[n],t.position[n]))return!1;return!0}class Xr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function $r(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Zr{}class ei extends Zr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new li(e,t,n):"array-contains"===t?new hi(e,n):"in"===t?new fi(e,n):"not-in"===t?new gi(e,n):"array-contains-any"===t?new pi(e,n):new ei(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ci(e,n):new ui(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ar(t,this.value)):null!==t&&Ir(this.value)===Ir(t)&&this.matchesComparison(Ar(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends Zr{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ti(e,t)}matches(e){return ni(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ni(e){return"and"===e.op}function ri(e){return ii(e)&&ni(e)}function ii(e){for(const t of e.filters)if(t instanceof ti)return!1;return!0}function si(e){if(e instanceof ei)return e.field.canonicalString()+e.op.toString()+Rr(e.value);if(ri(e))return e.filters.map(e=>si(e)).join(",");{const t=e.filters.map(e=>si(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function ai(e,t){return e instanceof ei?function(e,t){return t instanceof ei&&e.op===t.op&&e.field.isEqual(t.field)&&Cr(e.value,t.value)}(e,t):e instanceof ti?function(e,t){return t instanceof ti&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ai(n,t.filters[r]),!0)}(e,t):void vn()}function oi(e){return e instanceof ei?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Rr(e.value))}(e):e instanceof ti?function(e){return e.op.toString()+" {"+e.getFilters().map(oi).join(" ,")+"}"}(e):"Filter"}class li extends ei{constructor(e,t,n){super(e,t,n),this.key=zn.fromName(n.referenceValue)}matches(e){const t=zn.comparator(e.key,this.key);return this.matchesComparison(t)}}class ci extends ei{constructor(e,t){super(e,"in",t),this.keys=di("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ui extends ei{constructor(e,t){super(e,"not-in",t),this.keys=di("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function di(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>zn.fromName(e.referenceValue))}class hi extends ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fr(t)&&jr(t.arrayValue,this.value)}}class fi extends ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jr(this.value.arrayValue,t)}}class gi extends ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(jr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jr(this.value.arrayValue,t)}}class pi extends ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>jr(this.value.arrayValue,e))}}class mi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function vi(e){return new mi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function yi(e){const t=bn(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>si(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),er(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Rr(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Rr(e)).join(",")),t.ue=e}return t.ue}function bi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$r(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ai(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jr(e.startAt,t.startAt)&&Jr(e.endAt,t.endAt)}function xi(e){return zn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class wi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ni(e,t,n,r,i,s,a,o){return new wi(e,t,n,r,i,s,a,o)}function Si(e){return new wi(e)}function ki(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ei(e){return null!==e.collectionGroup}function _i(e){const t=bn(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fr(Vn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Xr(r,n))}),e.has(Vn.keyField().canonicalString())||t.ce.push(new Xr(Vn.keyField(),n))}return t.ce}function Ti(e){const t=bn(e);return t.le||(t.le=Ii(t,_i(e))),t.le}function Ii(e,t){if("F"===e.limitType)return vi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Xr(e.field,t)});const n=e.endAt?new Qr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Qr(e.startAt.position,e.startAt.inclusive):null;return vi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ci(e,t){const n=e.filters.concat([t]);return new wi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ji(e,t,n){return new wi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ai(e,t){return bi(Ti(e),Ti(t))&&e.limitType===t.limitType}function Pi(e){return"".concat(yi(Ti(e)),"|lt:").concat(e.limitType)}function Di(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>oi(e)).join(", "),"]")),er(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Rr(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Rr(e)).join(",")),"Target(".concat(t,")")}(Ti(e)),"; limitType=").concat(e.limitType,")")}function Ri(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of _i(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Yr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_i(e),t))&&!(e.endAt&&!function(e,t,n){const r=Yr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_i(e),t))}(e,t)}function Oi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Li(e){return(t,n)=>{let r=!1;for(const i of _i(e)){const e=Mi(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Mi(e,t,n){const r=e.field.isKeyField()?zn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ar(r,i):vn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return vn()}}class Fi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lr(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return cr(this.inner)}size(){return this.innerSize}}const Ui=new ur(zn.comparator);function Vi(){return Ui}const zi=new ur(zn.comparator);function qi(){let e=zi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Bi(e){let t=zi;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Gi(){return Hi()}function Wi(){return Hi()}function Hi(){return new Fi(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ki=new ur(zn.comparator),Qi=new fr(zn.comparator);function Yi(){let e=Qi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ji=new fr(Dn);function Xi(){return Ji}function $i(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tr(t)?"-0":t}}function Zi(e){return{integerValue:""+e}}function es(e,t){return nr(t)?Zi(t):$i(e,t)}class ts{constructor(){this._=void 0}}function ns(e,t,n){return e instanceof ss?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nr(t)&&(t=Sr(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof as?os(e,t):e instanceof ls?cs(e,t):function(e,t){const n=is(e,t),r=ds(n)+ds(e.Pe);return Mr(n)&&Mr(e.Pe)?Zi(r):$i(e.serializer,r)}(e,t)}function rs(e,t,n){return e instanceof as?os(e,t):e instanceof ls?cs(e,t):n}function is(e,t){return e instanceof us?function(e){return Mr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ss extends ts{}class as extends ts{constructor(e){super(),this.elements=e}}function os(e,t){const n=hs(t);for(const r of e.elements)n.some(e=>Cr(e,r))||n.push(r);return{arrayValue:{values:n}}}class ls extends ts{constructor(e){super(),this.elements=e}}function cs(e,t){let n=hs(t);for(const r of e.elements)n=n.filter(e=>!Cr(e,r));return{arrayValue:{values:n}}}class us extends ts{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ds(e){return xr(e.integerValue||e.doubleValue)}function hs(e){return Fr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fs{constructor(e,t){this.field=e,this.transform=t}}class gs{constructor(e,t){this.version=e,this.transformResults=t}}class ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ms(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class vs{}function ys(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Is(e.key,ps.none()):new Ss(e.key,e.data,ps.none());{const n=e.data,r=Wr.empty();let i=new fr(Vn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ks(e.key,r,new pr(i.toArray()),ps.none())}}function bs(e,t,n){e instanceof Ss?function(e,t,n){const r=e.value.clone(),i=_s(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ks?function(e,t,n){if(!ms(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=_s(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Es(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xs(e,t,n,r){return e instanceof Ss?function(e,t,n,r){if(!ms(e.precondition,t))return n;const i=e.value.clone(),s=Ts(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ks?function(e,t,n,r){if(!ms(e.precondition,t))return n;const i=Ts(e.fieldTransforms,r,t),s=t.data;return s.setAll(Es(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return ms(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ws(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=is(r.transform,e||null);null!=i&&(null===n&&(n=Wr.empty()),n.set(r.field,i))}return n||null}function Ns(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Rn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof as&&t instanceof as||e instanceof ls&&t instanceof ls?Rn(e.elements,t.elements,Cr):e instanceof us&&t instanceof us?Cr(e.Pe,t.Pe):e instanceof ss&&t instanceof ss}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ss extends vs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ks extends vs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Es(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function _s(e,t,n){const r=new Map;yn(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,rs(a,o,n[i]))}return r}function Ts(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ns(e,s,t))}return r}class Is extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cs extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class js{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&bs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=xs(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=xs(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Wi();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=ys(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Ln.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yi())}isEqual(e){return this.batchId===e.batchId&&Rn(this.mutations,e.mutations,(e,t)=>Ns(e,t))&&Rn(this.baseMutations,e.baseMutations,(e,t)=>Ns(e,t))}}class As{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){yn(e.mutations.length===n.length);let r=Ki;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new As(e,t,n,r)}}class Ps{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ds{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rs,Os;function Ls(e){switch(e){default:return vn();case xn.CANCELLED:case xn.UNKNOWN:case xn.DEADLINE_EXCEEDED:case xn.RESOURCE_EXHAUSTED:case xn.INTERNAL:case xn.UNAVAILABLE:case xn.UNAUTHENTICATED:return!1;case xn.INVALID_ARGUMENT:case xn.NOT_FOUND:case xn.ALREADY_EXISTS:case xn.PERMISSION_DENIED:case xn.FAILED_PRECONDITION:case xn.ABORTED:case xn.OUT_OF_RANGE:case xn.UNIMPLEMENTED:case xn.DATA_LOSS:return!0}}function Ms(e){if(void 0===e)return gn("GRPC error has no .code"),xn.UNKNOWN;switch(e){case Rs.OK:return xn.OK;case Rs.CANCELLED:return xn.CANCELLED;case Rs.UNKNOWN:return xn.UNKNOWN;case Rs.DEADLINE_EXCEEDED:return xn.DEADLINE_EXCEEDED;case Rs.RESOURCE_EXHAUSTED:return xn.RESOURCE_EXHAUSTED;case Rs.INTERNAL:return xn.INTERNAL;case Rs.UNAVAILABLE:return xn.UNAVAILABLE;case Rs.UNAUTHENTICATED:return xn.UNAUTHENTICATED;case Rs.INVALID_ARGUMENT:return xn.INVALID_ARGUMENT;case Rs.NOT_FOUND:return xn.NOT_FOUND;case Rs.ALREADY_EXISTS:return xn.ALREADY_EXISTS;case Rs.PERMISSION_DENIED:return xn.PERMISSION_DENIED;case Rs.FAILED_PRECONDITION:return xn.FAILED_PRECONDITION;case Rs.ABORTED:return xn.ABORTED;case Rs.OUT_OF_RANGE:return xn.OUT_OF_RANGE;case Rs.UNIMPLEMENTED:return xn.UNIMPLEMENTED;case Rs.DATA_LOSS:return xn.DATA_LOSS;default:return vn()}}(Os=Rs||(Rs={}))[Os.OK=0]="OK",Os[Os.CANCELLED=1]="CANCELLED",Os[Os.UNKNOWN=2]="UNKNOWN",Os[Os.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Os[Os.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Os[Os.NOT_FOUND=5]="NOT_FOUND",Os[Os.ALREADY_EXISTS=6]="ALREADY_EXISTS",Os[Os.PERMISSION_DENIED=7]="PERMISSION_DENIED",Os[Os.UNAUTHENTICATED=16]="UNAUTHENTICATED",Os[Os.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Os[Os.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Os[Os.ABORTED=10]="ABORTED",Os[Os.OUT_OF_RANGE=11]="OUT_OF_RANGE",Os[Os.UNIMPLEMENTED=12]="UNIMPLEMENTED",Os[Os.INTERNAL=13]="INTERNAL",Os[Os.UNAVAILABLE=14]="UNAVAILABLE",Os[Os.DATA_LOSS=15]="DATA_LOSS";let Fs=null;function Us(){return new TextEncoder}const Vs=new Kt([4294967295,4294967295],0);function zs(e){const t=Us().encode(e),n=new Qt;return n.update(t),new Uint8Array(n.digest())}function qs(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Kt([n,r],0),new Kt([i,s],0)]}class Bs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Gs("Invalid padding: ".concat(t));if(n<0)throw new Gs("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Gs("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Gs("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Kt.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Kt.fromNumber(n)));return 1===r.compare(Vs)&&(r=new Kt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=zs(e),[n,r]=qs(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Bs(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=zs(e),[n,r]=qs(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Gs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ws{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ws(Ln.min(),r,new ur(Dn),Vi(),Yi())}}class Hs{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hs(n,t,Yi(),Yi(),Yi())}}class Ks{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Qs{constructor(e,t){this.targetId=e,this.me=t}}class Ys{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Js{constructor(){this.fe=0,this.ge=Zs(),this.pe=vr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Yi(),t=Yi(),n=Yi();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:vn()}}),new Hs(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Zs()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,yn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xs{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vi(),this.qe=$s(),this.Qe=new ur(Dn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:vn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(xi(i))if(0===n){const e=new zn(i.path);this.Ue(t,e,Kr.newNoDocument(e,Ln.min()))}else yn(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Fs||Fs.et(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=wr(n).toUint8Array()}catch(e){if(e instanceof mr)return pn("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Bs(s,r,i)}catch(e){return pn(e instanceof Gs?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&xi(i.target)){const t=new zn(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Kr.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Yi();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Ws(e,t,this.Qe,this.ke,n);return this.ke=Vi(),this.qe=$s(),this.Qe=new ur(Dn),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Js,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new fr(Dn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||fn("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Js),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $s(){return new ur(zn.comparator)}function Zs(){return new ur(zn.comparator)}const ea={asc:"ASCENDING",desc:"DESCENDING"},ta={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},na={and:"AND",or:"OR"};class ra{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ia(e,t){return e.useProto3Json||er(t)?t:{value:t}}function sa(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function aa(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function oa(e,t){return sa(e,t.toTimestamp())}function la(e){return yn(!!e),Ln.fromTimestamp(function(e){const t=br(e);return new On(t.seconds,t.nanos)}(e))}function ca(e,t){return ua(e,t).canonicalString()}function ua(e,t){const n=function(e){return new Fn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function da(e){const t=Fn.fromString(e);return yn(Aa(t)),t}function ha(e,t){return ca(e.databaseId,t.path)}function fa(e,t){const n=da(t);if(n.get(1)!==e.databaseId.projectId)throw new wn(xn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wn(xn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zn(va(n))}function ga(e,t){return ca(e.databaseId,t)}function pa(e){const t=da(e);return 4===t.length?Fn.emptyPath():va(t)}function ma(e){return new Fn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function va(e){return yn(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ya(e,t,n){return{name:ha(e,t),fields:n.value.mapValue.fields}}function ba(e,t){let n;if(t instanceof Ss)n={update:ya(e,t.key,t.value)};else if(t instanceof Is)n={delete:ha(e,t.key)};else if(t instanceof ks)n={update:ya(e,t.key,t.data),updateMask:ja(t.fieldMask)};else{if(!(t instanceof Cs))return vn();n={verify:ha(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ss)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof as)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ls)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof us)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw vn()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:oa(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:vn()}(e,t.precondition)),n}function xa(e,t){return{documents:[ga(e,t.path)]}}function wa(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ga(e,i);const s=function(e){if(0!==e.length)return Ca(ti.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ta(e.field),direction:ka(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ia(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Na(e){let t=pa(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){yn(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Sa(e);return t instanceof ti&&ri(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Xr(Ia(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,er(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Qr(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Qr(n,t)}(n.endAt)),Ni(t,i,a,s,o,"F",l,c)}function Sa(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ia(e.unaryFilter.field);return ei.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ia(e.unaryFilter.field);return ei.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ia(e.unaryFilter.field);return ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ia(e.unaryFilter.field);return ei.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vn()}}(e):void 0!==e.fieldFilter?function(e){return ei.create(Ia(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vn()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ti.create(e.compositeFilter.filters.map(e=>Sa(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vn()}}(e.compositeFilter.op))}(e):vn()}function ka(e){return ea[e]}function Ea(e){return ta[e]}function _a(e){return na[e]}function Ta(e){return{fieldPath:e.canonicalString()}}function Ia(e){return Vn.fromServerFormat(e.fieldPath)}function Ca(e){return e instanceof ei?function(e){if("=="===e.op){if(Vr(e.value))return{unaryFilter:{field:Ta(e.field),op:"IS_NAN"}};if(Ur(e.value))return{unaryFilter:{field:Ta(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vr(e.value))return{unaryFilter:{field:Ta(e.field),op:"IS_NOT_NAN"}};if(Ur(e.value))return{unaryFilter:{field:Ta(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ta(e.field),op:Ea(e.op),value:e.value}}}(e):e instanceof ti?function(e){const t=e.getFilters().map(e=>Ca(e));return 1===t.length?t[0]:{compositeFilter:{op:_a(e.op),filters:t}}}(e):vn()}function ja(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Aa(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Pa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ln.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ln.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vr.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Da{constructor(e){this.ct=e}}function Ra(e){const t=Na({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ji(t,t.limit,"L"):t}class Oa{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(xr(e.integerValue));else if("doubleValue"in e){const n=xr(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),tr(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=br(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Gr(e)?this.dt(t,Number.MAX_SAFE_INTEGER):qr(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):vn()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(xr(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),zn.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Oa.vt=new Oa;class La{constructor(){this.un=new Ma}addToCollectionParentIndex(e,t){return this.un.add(t),Jn.resolve()}getCollectionParents(e,t){return Jn.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Jn.resolve()}deleteFieldIndex(e,t){return Jn.resolve()}deleteAllFieldIndexes(e){return Jn.resolve()}createTargetIndexes(e,t){return Jn.resolve()}getDocumentsMatchingTarget(e,t){return Jn.resolve(null)}getIndexType(e,t){return Jn.resolve(0)}getFieldIndexes(e,t){return Jn.resolve([])}getNextCollectionGroupToUpdate(e){return Jn.resolve(null)}getMinOffset(e,t){return Jn.resolve(Wn.min())}getMinOffsetFromCollectionGroup(e,t){return Jn.resolve(Wn.min())}updateCollectionGroup(e,t,n){return Jn.resolve()}updateIndexEntries(e,t){return Jn.resolve()}}class Ma{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fr(Fn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fr(Fn.comparator)).toArray()}}new Uint8Array(0);class Fa{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Fa(e,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Fa.DEFAULT_COLLECTION_PERCENTILE=10,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fa.DEFAULT=new Fa(41943040,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fa.DISABLED=new Fa(-1,0,0);class Ua{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ua(0)}static kn(){return new Ua(-1)}}class Va{constructor(){this.changes=new Fi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Jn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class za{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class qa{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&xs(n.mutation,e,pr.empty(),On.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Yi()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yi();const r=Gi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=qi();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Gi();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Yi()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Vi();const s=Hi(),a=Hi();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ks)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),xs(a.mutation,t,a.mutation.getFieldMask(),On.now())):s.set(t.key,pr.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new za(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Hi();let r=new ur((e,t)=>e-t),i=Yi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||pr.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Yi()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Wi();l.forEach(e=>{if(!i.has(e)){const r=ys(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Jn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return zn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ei(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Jn.resolve(Gi());let a=-1,o=i;return s.next(t=>Jn.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Jn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Yi())).next(e=>({batchId:a,changes:Bi(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zn(t)).next(e=>{let t=qi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=qi();return this.indexManager.getCollectionParents(e,i).next(a=>Jn.forEach(a,a=>{const o=function(e,t){return new wi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Kr.newInvalidDocument(r)))});let n=qi();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&xs(s.mutation,r,pr.empty(),On.now()),Ri(t,r)&&(n=n.insert(e,r))}),n})}}class Ba{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Jn.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:la(e.createTime)}}(t)),Jn.resolve()}getNamedQuery(e,t){return Jn.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Ra(e.bundledQuery),readTime:la(e.readTime)}}(t)),Jn.resolve()}}class Ga{constructor(){this.overlays=new ur(zn.comparator),this.Ir=new Map}getOverlay(e,t){return Jn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Gi();return Jn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Jn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Jn.resolve()}getOverlaysForCollection(e,t,n){const r=Gi(),i=t.length+1,s=new zn(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Jn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ur((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Gi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Gi(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Jn.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ps(t,n));let i=this.Ir.get(t);void 0===i&&(i=Yi(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Wa{constructor(){this.sessionToken=vr.EMPTY_BYTE_STRING}getSessionToken(e){return Jn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Jn.resolve()}}class Ha{constructor(){this.Tr=new fr(Ka.Er),this.dr=new fr(Ka.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Ka(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Ka(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new zn(new Fn([])),n=new Ka(t,e),r=new Ka(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new zn(new Fn([])),n=new Ka(t,e),r=new Ka(t,e+1);let i=Yi();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ka(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ka{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return zn.comparator(e.key,t.key)||Dn(e.wr,t.wr)}static Ar(e,t){return Dn(e.wr,t.wr)||zn.comparator(e.key,t.key)}}class Qa{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new fr(Ka.Er)}checkEmpty(e){return Jn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new js(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new Ka(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Jn.resolve(s)}lookupMutationBatch(e,t){return Jn.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Jn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Jn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Jn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ka(t,0),r=new Ka(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),Jn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fr(Dn);return t.forEach(e=>{const t=new Ka(e,0),r=new Ka(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Jn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;zn.isDocumentKey(i)||(i=i.child(""));const s=new Ka(new zn(i),0);let a=new fr(Dn);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},s),Jn.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){yn(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Jn.forEach(t.mutations,r=>{const i=new Ka(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Ka(t,0),r=this.br.firstAfterOrEqual(n);return Jn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Jn.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ya{constructor(e){this.Mr=e,this.docs=new ur(zn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Jn.resolve(n?n.document.mutableCopy():Kr.newInvalidDocument(t))}getEntries(e,t){let n=Vi();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Kr.newInvalidDocument(e))}),Jn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Vi();const s=t.path,a=new zn(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Hn(Gn(a),n)<=0||(r.has(a.key)||Ri(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Jn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){vn()}Or(e,t){return Jn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ja(this)}getSize(e){return Jn.resolve(this.size)}}class Ja extends Va{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Jn.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Xa{constructor(e){this.persistence=e,this.Nr=new Fi(e=>yi(e),bi),this.lastRemoteSnapshotVersion=Ln.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ha,this.targetCount=0,this.kr=Ua.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Jn.resolve()}getLastRemoteSnapshotVersion(e){return Jn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Jn.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Jn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Jn.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ua(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Jn.resolve()}updateTargetData(e,t){return this.Kn(t),Jn.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Jn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Jn.waitFor(i).next(()=>r)}getTargetCount(e){return Jn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Jn.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Jn.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Jn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Jn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Jn.resolve(n)}containsKey(e,t){return Jn.resolve(this.Br.containsKey(t))}}class $a{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Zn(0),this.Kr=!1,this.Kr=!0,this.$r=new Wa,this.referenceDelegate=e(this),this.Ur=new Xa(this),this.indexManager=new La,this.remoteDocumentCache=function(e){return new Ya(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Da(t),this.Gr=new Ba(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ga,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Qa(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){fn("MemoryPersistence","Starting transaction:",e);const r=new Za(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Jn.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Za extends Qn{constructor(e){super(),this.currentSequenceNumber=e}}class eo{constructor(e){this.persistence=e,this.Jr=new Ha,this.Yr=null}static Zr(e){return new eo(e)}get Xr(){if(this.Yr)return this.Yr;throw vn()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Jn.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Jn.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Jn.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Jn.forEach(this.Xr,n=>{const r=zn.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Ln.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Jn.or([()=>Jn.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class to{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Yi(),r=Yi();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new to(e,t.fromCache,n,r)}}class no{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ro{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=ae()?8:Xn(se())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new no;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(hn()<=ke.DEBUG&&fn("QueryEngine","SDK will not create cache indexes for query:",Di(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Jn.resolve()):(hn()<=ke.DEBUG&&fn("QueryEngine","Query:",Di(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(hn()<=ke.DEBUG&&fn("QueryEngine","The SDK decides to create cache indexes for query:",Di(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):Jn.resolve())}Yi(e,t){if(ki(t))return Jn.resolve(null);let n=Ti(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ji(t,null,"F"),n=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Yi(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,ji(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return ki(t)||r.isEqual(Ln.min())?Jn.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Jn.resolve(null):(hn()<=ke.DEBUG&&fn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Di(t)),this.rs(e,s,t,Bn(r,-1)).next(e=>e))})}ts(e,t){let n=new fr(Li(e));return t.forEach((t,r)=>{Ri(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return hn()<=ke.DEBUG&&fn("QueryEngine","Using full collection scan to execute query:",Di(t)),this.Ji.getDocumentsMatchingQuery(e,t,Wn.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class io{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ur(Dn),this._s=new Fi(e=>yi(e),bi),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qa(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function so(e,t,n,r){return new io(e,t,n,r)}async function ao(e,t){const n=bn(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Yi();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function oo(e){const t=bn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function lo(e,t,n){let r=Yi(),i=Yi();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Vi();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ln.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):fn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function co(e,t){const n=bn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function uo(e,t){const n=bn(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,Jn.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new Pa(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function ho(e,t,n){const r=bn(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!$n(e))throw e;fn("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(i.target)}function fo(e,t,n){const r=bn(e);let i=Ln.min(),s=Yi();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=bn(e),i=r._s.get(n);return void 0!==i?Jn.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Ti(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Ln.min(),n?s:Yi())).next(e=>(go(r,Oi(t),e),{documents:e,Ts:s})))}function go(e,t,n){let r=e.us.get(t)||Ln.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class po{constructor(){this.activeTargetIds=Xi()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mo{constructor(){this.so=new po,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new po,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vo{_o(e){}shutdown(){}}class yo{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let bo=null;function xo(){return null===bo?bo=268435456+Math.round(2147483648*Math.random()):bo++,"0x"+bo.toString(16)}const wo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class No{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const So="WebChannelConnection";class ko extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,i){const s=xo(),a=this.xo(e,t.toUriEncodedString());fn("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then(t=>(fn("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw pn("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+un,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=wo[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=xo();return new Promise((s,a)=>{const o=new Xt;o.setWithCredentials(!0),o.listenOnce(Zt.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case en.NO_ERROR:const t=o.getResponseJson();fn(So,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case en.TIMEOUT:fn(So,"RPC '".concat(e,"' ").concat(i," timed out")),a(new wn(xn.DEADLINE_EXCEEDED,"Request time out"));break;case en.HTTP_ERROR:const n=o.getStatus();if(fn(So,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(xn).indexOf(t)>=0?t:xn.UNKNOWN}(t.status);a(new wn(e,t.message))}else a(new wn(xn.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new wn(xn.UNAVAILABLE,"Connection failed."));break;default:vn()}}finally{fn(So,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);fn(So,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=xo(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sn(),a=rn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");fn(So,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new No({Io:t=>{h?fn(So,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(fn(So,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),fn(So,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),g=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(u,$t.EventType.OPEN,()=>{h||(fn(So,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),g(u,$t.EventType.CLOSE,()=>{h||(h=!0,fn(So,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),g(u,$t.EventType.ERROR,t=>{h||(h=!0,pn(So,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new wn(xn.UNAVAILABLE,"The operation could not be completed")))}),g(u,$t.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];yn(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){fn(So,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Rs[e];if(void 0!==t)return Ms(t)}(t),i=a.message;void 0===n&&(n=xn.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new wn(n,i)),u.close()}else fn(So,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.bo(i)}}),g(a,nn.STAT_EVENT,t=>{t.stat===tn.PROXY?fn(So,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===tn.NOPROXY&&fn(So,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function Eo(){return"undefined"!=typeof document?document:null}function _o(e){return new ra(e,!0)}class To{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&fn("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Io{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new To(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===xn.RESOURCE_EXHAUSTED?(gn(t.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===xn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new wn(xn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return fn("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(fn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Co extends Io{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:vn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(yn(void 0===t||"string"==typeof t),vr.fromBase64String(t||"")):(yn(void 0===t||t instanceof Buffer||t instanceof Uint8Array),vr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?xn.UNKNOWN:Ms(e.code);return new wn(t,e.message||"")}(a);n=new Ys(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=fa(e,r.document.name),s=la(r.document.updateTime),a=r.document.createTime?la(r.document.createTime):Ln.min(),o=new Wr({mapValue:{fields:r.document.fields}}),l=Kr.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ks(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=fa(e,r.document),s=r.readTime?la(r.readTime):Ln.min(),a=Kr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Ks([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=fa(e,r.document),s=r.removedTargetIds||[];n=new Ks([],s,i,null)}else{if(!("filter"in t))return vn();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ds(r,i),a=e.targetId;n=new Qs(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ln.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ln.min():t.readTime?la(t.readTime):Ln.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ma(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=xi(r)?{documents:xa(e,r)}:{query:wa(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=aa(e,t.resumeToken);const r=ia(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ln.min())>0){n.readTime=sa(e,t.snapshotVersion.toTimestamp());const r=ia(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vn()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ma(this.serializer),t.removeTarget=e,this.a_(t)}}class jo extends Io{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return yn(!!e.streamToken),this.lastStreamToken=e.streamToken,yn(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){yn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(yn(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?la(e.updateTime):la(t);return n.isEqual(Ln.min())&&(n=la(t)),new gs(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=la(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ma(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ba(this.serializer,e))};this.a_(t)}}class Ao extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new wn(xn.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Mo(e,ua(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===xn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wn(xn.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Lo(e,ua(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===xn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wn(xn.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Po{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(gn(t),this.D_=!1):fn("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Do{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{qo(this)&&(fn("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=bn(e);t.L_.add(4),await Oo(t),t.q_.set("Unknown"),t.L_.delete(4),await Ro(t)}(this))})}),this.q_=new Po(n,r)}}async function Ro(e){if(qo(e))for(const t of e.B_)await t(!0)}async function Oo(e){for(const t of e.B_)await t(!1)}function Lo(e,t){const n=bn(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),zo(n)?Vo(n):ol(n).r_()&&Fo(n,t))}function Mo(e,t){const n=bn(e),r=ol(n);n.N_.delete(t),r.r_()&&Uo(n,t),0===n.N_.size&&(r.r_()?r.o_():qo(n)&&n.q_.set("Unknown"))}function Fo(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ln.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ol(e).A_(t)}function Uo(e,t){e.Q_.xe(t),ol(e).R_(t)}function Vo(e){e.Q_=new Xs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ol(e).start(),e.q_.v_()}function zo(e){return qo(e)&&!ol(e).n_()&&e.N_.size>0}function qo(e){return 0===bn(e).L_.size}function Bo(e){e.Q_=void 0}async function Go(e){e.q_.set("Online")}async function Wo(e){e.N_.forEach((t,n)=>{Fo(e,t)})}async function Ho(e,t){Bo(e),zo(e)?(e.q_.M_(t),Vo(e)):e.q_.set("Unknown")}async function Ko(e,t,n){if(e.q_.set("Online"),t instanceof Ys&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){fn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Qo(e,n)}else if(t instanceof Ks?e.Q_.Ke(t):t instanceof Qs?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ln.min()))try{const t=await oo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(vr.EMPTY_BYTE_STRING,r.snapshotVersion)),Uo(e,t);const i=new Pa(r.target,t,n,r.sequenceNumber);Fo(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){fn("RemoteStore","Failed to raise snapshot:",t),await Qo(e,t)}}async function Qo(e,t,n){if(!$n(t))throw t;e.L_.add(1),await Oo(e),e.q_.set("Offline"),n||(n=()=>oo(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{fn("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Ro(e)})}function Yo(e,t){return t().catch(n=>Qo(e,n,t))}async function Jo(e){const t=bn(e),n=ll(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Xo(t);)try{const e=await co(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,$o(t,e)}catch(e){await Qo(t,e)}Zo(t)&&el(t)}function Xo(e){return qo(e)&&e.O_.length<10}function $o(e,t){e.O_.push(t);const n=ll(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Zo(e){return qo(e)&&!ll(e).n_()&&e.O_.length>0}function el(e){ll(e).start()}async function tl(e){ll(e).p_()}async function nl(e){const t=ll(e);for(const n of e.O_)t.m_(n.mutations)}async function rl(e,t,n){const r=e.O_.shift(),i=As.from(r,t,n);await Yo(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Jo(e)}async function il(e,t){t&&ll(e).V_&&await async function(e,t){if(function(e){return Ls(e)&&e!==xn.ABORTED}(t.code)){const n=e.O_.shift();ll(e).s_(),await Yo(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Jo(e)}}(e,t),Zo(e)&&el(e)}async function sl(e,t){const n=bn(e);n.asyncQueue.verifyOperationInProgress(),fn("RemoteStore","RemoteStore received new credentials");const r=qo(n);n.L_.add(3),await Oo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Ro(n)}async function al(e,t){const n=bn(e);t?(n.L_.delete(2),await Ro(n)):t||(n.L_.add(2),await Oo(n),n.q_.set("Unknown"))}function ol(e){return e.K_||(e.K_=function(e,t,n){const r=bn(e);return r.w_(),new Co(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Go.bind(null,e),Ro:Wo.bind(null,e),mo:Ho.bind(null,e),d_:Ko.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),zo(e)?Vo(e):e.q_.set("Unknown")):(await e.K_.stop(),Bo(e))})),e.K_}function ll(e){return e.U_||(e.U_=function(e,t,n){const r=bn(e);return r.w_(),new jo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tl.bind(null,e),mo:il.bind(null,e),f_:nl.bind(null,e),g_:rl.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Jo(e)):(await e.U_.stop(),e.O_.length>0&&(fn("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class cl{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new cl(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wn(xn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ul(e,t){if(gn("AsyncQueue","".concat(t,": ").concat(e)),$n(e))return new wn(xn.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class dl{constructor(e){this.comparator=e?(t,n)=>e(t,n)||zn.comparator(t.key,n.key):(e,t)=>zn.comparator(e.key,t.key),this.keyedMap=qi(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new dl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new dl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class hl{constructor(){this.W_=new ur(zn.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):vn():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class fl{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new fl(e,t,dl.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ai(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class gl{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class pl{constructor(){this.queries=ml(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=bn(e),r=n.queries;n.queries=ml(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new wn(xn.ABORTED,"Firestore shutting down"))}}function ml(){return new Fi(e=>Pi(e),Ai)}async function vl(e,t){const n=bn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new gl,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=ul(e,"Initialization of query '".concat(Di(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&wl(n)}async function yl(e,t){const n=bn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bl(e,t){const n=bn(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&wl(n)}function xl(e,t,n){const r=bn(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function wl(e){e.Y_.forEach(e=>{e.next()})}var Nl,Sl;(Sl=Nl||(Nl={})).ea="default",Sl.Cache="cache";class kl{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nl.Cache}}class El{constructor(e){this.key=e}}class _l{constructor(e){this.key=e}}class Tl{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Yi(),this.mutatedKeys=Yi(),this.Aa=Li(e),this.Ra=new dl(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new hl,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Ri(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vn()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new fl(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hl,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Yi(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new _l(e))}),this.da.forEach(n=>{e.has(n)||t.push(new El(n))}),t}ba(e){this.Ta=e.Ts,this.da=Yi();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return fl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Il{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Cl{constructor(e){this.key=e,this.va=!1}}class jl{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Fi(e=>Pi(e),Ai),this.Ma=new Map,this.xa=new Set,this.Oa=new ur(zn.comparator),this.Na=new Map,this.La=new Ha,this.Ba={},this.ka=new Map,this.qa=Ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Al(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=$l(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Dl(r,t,n,!0),i}async function Pl(e,t){const n=$l(e);await Dl(n,t,!0,!1)}async function Dl(e,t,n,r){const i=await uo(e.localStore,Ti(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Rl(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Lo(e.remoteStore,i),o}async function Rl(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await fo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Hl(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await fo(e.localStore,t,!0),a=new Tl(t,s.Ts),o=a.ma(s.documents),l=Hs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Hl(e,n,c.wa);const u=new Il(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Ol(e,t,n){const r=bn(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!Ai(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ho(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mo(r.remoteStore,i.targetId),Gl(r,i.targetId)}).catch(Yn)):(Gl(r,i.targetId),await ho(r.localStore,i.targetId,!0))}async function Ll(e,t){const n=bn(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mo(n.remoteStore,r.targetId))}async function Ml(e,t){const n=bn(e);try{const e=await function(e,t){const n=bn(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(vr.EMPTY_BYTE_STRING,Ln.min()).withLastLimboFreeSnapshotVersion(Ln.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Ur.updateTargetData(e,c))});let o=Vi(),l=Yi();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(lo(e,s,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Ln.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Jn.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(yn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?yn(r.va):e.removedDocuments.size>0&&(yn(r.va),r.va=!1))}),await Yl(n,e,t)}catch(e){await Yn(e)}}function Fl(e,t,n){const r=bn(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=bn(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&wl(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ul(e,t,n){const r=bn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new ur(zn.comparator);e=e.insert(s,Kr.newNoDocument(s,Ln.min()));const n=Yi().add(s),i=new Ws(Ln.min(),new Map,new ur(Dn),e,n);await Ml(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),Ql(r)}else await ho(r.localStore,t,!1).then(()=>Gl(r,t,n)).catch(Yn)}async function Vl(e,t){const n=bn(e),r=t.batch.batchId;try{const e=await function(e,t){const n=bn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Jn.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);yn(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Yi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Bl(n,r,null),ql(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yl(n,e)}catch(e){await Yn(e)}}async function zl(e,t,n){const r=bn(e);try{const e=await function(e,t){const n=bn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(yn(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Bl(r,t,n),ql(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Yl(r,e)}catch(n){await Yn(n)}}function ql(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Bl(e,t,n){const r=bn(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Gl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Wl(e,t)})}function Wl(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Mo(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Ql(e))}function Hl(e,t,n){for(const r of n)r instanceof El?(e.La.addReference(r.key,t),Kl(e,r)):r instanceof _l?(fn("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Wl(e,r.key)):vn()}function Kl(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(fn("SyncEngine","New document in limbo: "+n),e.xa.add(r),Ql(e))}function Ql(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new zn(Fn.fromString(t)),r=e.qa.next();e.Na.set(r,new Cl(n)),e.Oa=e.Oa.insert(n,r),Lo(e.remoteStore,new Pa(Ti(Si(n.path)),r,"TargetPurposeLimboResolution",Zn.oe))}}async function Yl(e,t,n){const r=bn(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=to.Wi(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=bn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Jn.forEach(t,t=>Jn.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Jn.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!$n(e))throw e;fn("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Jl(e,t){const n=bn(e);if(!n.currentUser.isEqual(t)){fn("SyncEngine","User change. New user:",t.toKey());const e=await ao(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new wn(xn.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Yl(n,e.hs)}}function Xl(e,t){const n=bn(e),r=n.Na.get(t);if(r&&r.va)return Yi().add(r.key);{let e=Yi();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function $l(e){const t=bn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ml.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ul.bind(null,t),t.Ca.d_=bl.bind(null,t.eventManager),t.Ca.$a=xl.bind(null,t.eventManager),t}function Zl(e){const t=bn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zl.bind(null,t),t}class ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_o(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return so(this.persistence,new ro,e.initialUser,this.serializer)}Ga(e){return new $a(eo.Zr,this.serializer)}Wa(e){return new mo}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ec.provider={build:()=>new ec};class tc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Fl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jl.bind(null,this.syncEngine),await al(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pl}createDatastore(e){const t=_o(e.databaseInfo.databaseId),n=function(e){return new ko(e)}(e.databaseInfo);return function(e,t,n,r){return new Ao(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Do(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Fl(this.syncEngine,e,0),yo.D()?new yo:new vo)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new jl(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=bn(e);fn("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Oo(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}tc.provider={build:()=>new tc};class nc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class rc{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=cn.UNAUTHENTICATED,this.clientId=Pn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{fn("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(fn("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ul(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ic(e,t){e.asyncQueue.verifyOperationInProgress(),fn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ao(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ac(e);fn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>sl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>sl(t.remoteStore,n)),e._onlineComponents=t}async function ac(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fn("FirestoreClient","Using user provided OfflineComponentProvider");try{await ic(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===xn.FAILED_PRECONDITION||e.code===xn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;pn("Error using user provided cache. Falling back to memory cache: "+n),await ic(e,new ec)}}else fn("FirestoreClient","Using default OfflineComponentProvider"),await ic(e,new ec);return e._offlineComponents}async function oc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fn("FirestoreClient","Using user provided OnlineComponentProvider"),await sc(e,e._uninitializedComponentsProvider._online)):(fn("FirestoreClient","Using default OnlineComponentProvider"),await sc(e,new tc))),e._onlineComponents}function lc(e){return oc(e).then(e=>e.syncEngine)}async function cc(e){const t=await oc(e),n=t.eventManager;return n.onListen=Al.bind(null,t.syncEngine),n.onUnlisten=Ol.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Pl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ll.bind(null,t.syncEngine),n}function uc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Nn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new nc({next:o=>{s.Za(),t.enqueueAndForget(()=>yl(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new wn(xn.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new wn(xn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new kl(Si(n.path),s,{includeMetadataChanges:!0,_a:!0});return vl(e,a)}(await cc(e),e.asyncQueue,t,n,r)),r.promise}function dc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Nn;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new nc({next:n=>{s.Za(),t.enqueueAndForget(()=>yl(e,a)),n.fromCache&&"server"===r.source?i.reject(new wn(xn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new kl(n,s,{includeMetadataChanges:!0,_a:!0});return vl(e,a)}(await cc(e),e.asyncQueue,t,n,r)),r.promise}function hc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const fc=new Map;function gc(e,t,n){if(!n)throw new wn(xn.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pc(e){if(!zn.isDocumentKey(e))throw new wn(xn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mc(e){if(zn.isDocumentKey(e))throw new wn(xn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function vc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":vn()}function yc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wn(xn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vc(e);throw new wn(xn.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function bc(e,t){if(t<=0)throw new wn(xn.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class xc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new wn(xn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wn(xn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new wn(xn.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new wn(xn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new wn(xn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new wn(xn.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wc{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xc({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new wn(xn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wn(xn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new kn;switch(e.type){case"firstParty":return new In(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new wn(xn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fc.get(e);t&&(fn("ComponentProvider","Removing Datastore"),fc.delete(e),t.terminate())}(this),Promise.resolve()}}function Nc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=yc(e,wc))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=cn.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new wn(xn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new cn(s)}e._authCredentials=new En(new Sn(t,n))}}class Sc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Sc(this.firestore,e,this._query)}}class kc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kc(this.firestore,e,this._key)}}class Ec extends Sc{constructor(e,t,n){super(e,t,Si(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kc(this.firestore,null,new zn(e))}withConverter(e){return new Ec(this.firestore,e,this._path)}}function _c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ye(e),gc("collection","path",t),e instanceof wc){const n=Fn.fromString(t,...r);return mc(n),new Ec(e,null,n)}{if(!(e instanceof kc||e instanceof Ec))throw new wn(xn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fn.fromString(t,...r));return mc(n),new Ec(e.firestore,null,n)}}function Tc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ye(e),1===arguments.length&&(t=Pn.newId()),gc("doc","path",t),e instanceof wc){const n=Fn.fromString(t,...r);return pc(n),new kc(e,null,new zn(n))}{if(!(e instanceof kc||e instanceof Ec))throw new wn(xn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fn.fromString(t,...r));return pc(n),new kc(e.firestore,e instanceof Ec?e.converter:null,new zn(n))}}class Ic{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new To(this,"async_queue_retry"),this.Vu=()=>{const e=Eo();e&&fn("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Eo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Eo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Nn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$n(e))throw e;fn("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw gn("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=cl.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&vn()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Cc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jc extends wc{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ic,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ic(e),this._firestoreClient=void 0,await e}}}function Ac(e){if(e._terminated)throw new wn(xn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Pc(e),e._firestoreClient}function Pc(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Er(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new rc(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Dc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dc(vr.fromBase64String(e))}catch(e){throw new wn(xn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Dc(vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rc{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new wn(xn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oc{constructor(e){this._methodName=e}}class Lc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wn(xn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wn(xn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}}class Mc{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Fc=/^__.*__$/;class Uc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ss(e,this.data,t,this.fieldTransforms)}}class Vc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ks(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vn()}}class qc{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return au(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(zc(this.Cu)&&Fc.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Bc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_o(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qc({Cu:e,methodName:t,qu:n,path:Vn.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(e){const t=e._freezeSettings(),n=_o(e._databaseId);return new Bc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Wc(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);nu("Data must be an object, but it was:",a,r);const o=eu(r,a);let l,c;if(s.merge)l=new pr(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ru(t,r,n);if(!a.contains(i))throw new wn(xn.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));ou(e,i)||e.push(i)}l=new pr(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Uc(new Wr(o),l,c)}class Hc extends Oc{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hc}}function Kc(e,t,n){return new qc({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Qc extends Oc{_toFieldTransform(e){return new fs(e.path,new ss)}isEqual(e){return e instanceof Qc}}class Yc extends Oc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Kc(this,e,!0),n=this.Ku.map(e=>Zc(e,t)),r=new as(n);return new fs(e.path,r)}isEqual(e){return e instanceof Yc&&de(this.Ku,e.Ku)}}function Jc(e,t,n,r){const i=e.Qu(1,t,n);nu("Data must be an object, but it was:",i,r);const s=[],a=Wr.empty();lr(r,(e,r)=>{const o=su(t,e,n);r=ye(r);const l=i.Nu(o);if(r instanceof Hc)s.push(o);else{const e=Zc(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new pr(s);return new Vc(a,o,i.fieldTransforms)}function Xc(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[ru(t,r,n)],l=[i];if(s.length%2!=0)throw new wn(xn.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(ru(t,s[h])),l.push(s[h+1]);const c=[],u=Wr.empty();for(let h=o.length-1;h>=0;--h)if(!ou(c,o[h])){const e=o[h];let t=l[h];t=ye(t);const n=a.Nu(e);if(t instanceof Hc)c.push(e);else{const r=Zc(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new pr(c);return new Vc(u,d,a.fieldTransforms)}function $c(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Zc(n,e.Qu(r?4:3,t))}function Zc(e,t){if(tu(e=ye(e)))return nu("Unsupported field value:",t,e),eu(e,t);if(e instanceof Oc)return function(e,t){if(!zc(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Zc(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ye(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return es(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=On.fromDate(e);return{timestampValue:sa(t.serializer,n)}}if(e instanceof On){const n=new On(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sa(t.serializer,n)}}if(e instanceof Lc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dc)return{bytesValue:aa(t.serializer,e._byteString)};if(e instanceof kc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ca(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Mc)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return $i(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(vc(e)))}(e,t)}function eu(e,t){const n={};return cr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lr(e,(e,r)=>{const i=Zc(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function tu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof On||e instanceof Lc||e instanceof Dc||e instanceof kc||e instanceof Oc||e instanceof Mc)}function nu(e,t,n){if(!tu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=vc(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function ru(e,t,n){if((t=ye(t))instanceof Rc)return t._internalPath;if("string"==typeof t)return su(e,t);throw au("Field path arguments must be of type string or ",e,!1,void 0,n)}const iu=new RegExp("[~\\*/\\[\\]]");function su(e,t,n){if(t.search(iu)>=0)throw au("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Rc(...t.split("."))._internalPath}catch(r){throw au("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function au(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new wn(xn.INVALID_ARGUMENT,o+e+l)}function ou(e,t){return e.some(e=>e.isEqual(t))}class lu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cu extends lu{data(){return super.data()}}function uu(e,t){return"string"==typeof t?su(e,t):t instanceof Rc?t._internalPath:t._delegate._internalPath}function du(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new wn(xn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hu{}class fu extends hu{}function gu(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof hu&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof vu).length,n=e.filter(e=>e instanceof pu).length;if(t>1||t>0&&n>0)throw new wn(xn.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class pu extends fu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new pu(e,t,n)}_apply(e){const t=this._parse(e);return Nu(e._query,t),new Sc(e.firestore,e.converter,Ci(e._query,t))}_parse(e){const t=Gc(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new wn(xn.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){wu(a,s);const t=[];for(const n of a)t.push(xu(r,e,n));o={arrayValue:{values:t}}}else o=xu(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||wu(a,s),o=$c(n,t,a,"in"===s||"not-in"===s);return ei.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function mu(e,t,n){const r=t,i=uu("where",e);return pu._create(i,r,n)}class vu extends hu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vu(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Nu(n,i),n=Ci(n,i)}(e._query,t),new Sc(e.firestore,e.converter,Ci(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yu extends fu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new wn(xn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wn(xn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xr(t,n)}(e._query,this._field,this._direction);return new Sc(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new wi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class bu extends fu{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new bu(e,t,n)}_apply(e){return new Sc(e.firestore,e.converter,ji(e._query,this._limit,this._limitType))}}function xu(e,t,n){if("string"==typeof(n=ye(n))){if(""===n)throw new wn(xn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ei(t)&&-1!==n.indexOf("/"))throw new wn(xn.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Fn.fromString(n));if(!zn.isDocumentKey(r))throw new wn(xn.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Lr(e,new zn(r))}if(n instanceof kc)return Lr(e,n._key);throw new wn(xn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(vc(n),"."))}function wu(e,t){if(!Array.isArray(e)||0===e.length)throw new wn(xn.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Nu(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new wn(xn.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new wn(xn.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Su{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return lr(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>xr(e.doubleValue));return new Mc(i)}convertGeoPoint(e){return new Lc(xr(e.latitude),xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kr(e));default:return null}}convertTimestamp(e){const t=br(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fn.fromString(e);yn(Aa(n));const r=new _r(n.get(1),n.get(3)),i=new zn(n.popFirst(5));return r.isEqual(t)||gn("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ku(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _u extends lu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(uu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Tu extends _u{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Iu{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Eu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Tu(this._firestore,this._userDataWriter,n.key,n,new Eu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new wn(xn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Tu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Eu(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Tu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Eu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Cu(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Cu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vn()}}function ju(e){e=yc(e,kc);const t=yc(e.firestore,jc);return uc(Ac(t),e._key).then(n=>Fu(t,e,n))}class Au extends Su{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kc(this.firestore,null,t)}}function Pu(e){e=yc(e,Sc);const t=yc(e.firestore,jc),n=Ac(t),r=new Au(t);return du(e._query),dc(n,e._query).then(n=>new Iu(t,r,e,n))}function Du(e,t,n){e=yc(e,kc);const r=yc(e.firestore,jc),i=ku(e.converter,t,n);return Mu(r,[Wc(Gc(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ps.none())])}function Ru(e,t,n){e=yc(e,kc);const r=yc(e.firestore,jc),i=Gc(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=ye(t))||t instanceof Rc?Xc(i,"updateDoc",e._key,t,n,o):Jc(i,"updateDoc",e._key,t),Mu(r,[s.toMutation(e._key,ps.exists(!0))])}function Ou(e){return Mu(yc(e.firestore,jc),[new Is(e._key,ps.none())])}function Lu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=ye(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Cc(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Cc(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof kc)d=yc(e.firestore,jc),h=Si(e._key.path),u={next:t=>{n[l]&&n[l](Fu(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=yc(e,Sc);d=yc(t.firestore,jc),h=t._query;const r=new Au(d);u={next:e=>{n[l]&&n[l](new Iu(d,r,t,e))},error:n[l+1],complete:n[l+2]},du(e._query)}return function(e,t,n,r){const i=new nc(r),s=new kl(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>vl(await cc(e),s)),()=>{i.Za(),e.asyncQueue.enqueueAndForget(async()=>yl(await cc(e),s))}}(Ac(d),h,c,u)}function Mu(e,t){return function(e,t){const n=new Nn;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Zl(e);try{const e=await function(e,t){const n=bn(e),r=On.now(),i=t.reduce((e,t)=>e.add(t.key),Yi());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Vi(),l=Yi();return n.cs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=ws(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new ks(e.key,t,Hr(t.value.mapValue),ps.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Bi(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new ur(Dn)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Yl(r,e.changes),await Jo(r.remoteStore)}catch(e){const t=ul(e,"Failed to persist write");n.reject(t)}}(await lc(e),t,n)),n.promise}(Ac(e),t)}function Fu(e,t,n){const r=n.docs.get(t._key),i=new Au(e);return new _u(e,i,t._key,r,new Eu(n.hasPendingWrites,n.fromCache),t.converter)}function Uu(){return new Qc("serverTimestamp")}function Vu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Yc("arrayUnion",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){un=e}(Dt),It(new be("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new jc(new _n(e.getProvider("auth-internal")),new jn(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wn(xn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _r(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Lt(ln,"4.7.3",e),Lt(ln,"4.7.3","esm2017")}();function zu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function qu(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bu=qu,Gu=new ce("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wu=new Ce("@firebase/auth");function Hu(e){if(Wu.logLevel<=ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wu.error("Auth (".concat(Dt,"): ").concat(e),...n)}}function Ku(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $u(e,...n)}function Qu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $u(e,...n)}function Yu(e,t,n){const r=Object.assign(Object.assign({},Bu()),{[t]:n});return new ce("auth","Firebase",r).create(t,{appName:e.name})}function Ju(e){return Yu(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xu(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ku(e,"argument-error"),Yu(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Gu.create(e,...n)}function Zu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $u(t,...r)}}function ed(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hu(t),new Error(t)}function td(e,t){e||ed(t)}function nd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function rd(){return"http:"===id()||"https:"===id()}function id(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function sd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(rd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ad{constructor(e,t){this.shortDelay=e,this.longDelay=t,td(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(se())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return sd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function od(e,t){td(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ld{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ed("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ed("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ed("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ud=new ad(3e4,6e4);function dd(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function hd(e,t,n,r){return fd(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=fe(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),ld.fetch()(pd(e,e.config.apiHost,n,a),l)})}async function fd(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},cd),t);try{const t=new vd(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw yd(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw yd(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw yd(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw yd(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Yu(e,o,a);Ku(e,o)}}catch(i){if(i instanceof le)throw i;Ku(e,"network-request-failed",{message:String(i)})}}async function gd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await hd(e,t,n,r,i);return"mfaPendingCredential"in s&&Ku(e,"multi-factor-auth-required",{_serverResponse:s}),s}function pd(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?od(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function md(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vd{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Qu(this.auth,"network-request-failed")),ud.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yd(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qu(e,t,r);return i.customData._tokenResponse=n,i}function bd(e){return void 0!==e&&void 0!==e.enterprise}class xd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return md(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function wd(e,t){return hd(e,"GET","/v2/recaptchaConfig",dd(e,t))}async function Nd(e,t){return hd(e,"POST","/v1/accounts:lookup",t)}function Sd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function kd(e){return 1e3*Number(e)}function Ed(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const e=$(n);return e?JSON.parse(e):(Hu("Failed to decode base64 JWT payload"),null)}catch(i){return Hu("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function _d(e){const t=Ed(e);return Zu(t,"internal-error"),Zu("undefined"!==typeof t.exp,"internal-error"),Zu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Td(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof le&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Id{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Cd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sd(this.lastLoginAt),this.creationTime=Sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function jd(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Td(e,Nd(n,{idToken:r}));Zu(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Pd(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Cd(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}async function Ad(e){const t=ye(e);await jd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Pd(e){return e.map(e=>{var{providerId:t}=e,n=zu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Dd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Zu(e.idToken,"internal-error"),Zu("undefined"!==typeof e.idToken,"internal-error"),Zu("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):_d(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Zu(0!==e.length,"internal-error");const t=_d(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Zu(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await fd(e,{},async()=>{const n=fe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=pd(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ld.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Dd;return n&&(Zu("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Zu("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Zu("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dd,this.toJSON())}_performRefresh(){return ed("not implemented")}}function Rd(e,t){Zu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Od{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=zu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Id(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Cd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Td(this,this.stsTokenManager.getToken(this.auth,e));return Zu(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ye(e),r=await n.getIdToken(t),i=Ed(r);Zu(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Sd(kd(i.auth_time)),issuedAtTime:Sd(kd(i.iat)),expirationTime:Sd(kd(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return Ad(this)}_assign(e){this!==e&&(Zu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Od(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Zu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await jd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(Ju(this.auth));const e=await this.getIdToken();return await Td(this,async function(e,t){return hd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:N}=t;Zu(y&&N,e,"internal-error");const S=Dd.fromJSON(this.name,N);Zu("string"===typeof y,e,"internal-error"),Rd(u,e.name),Rd(d,e.name),Zu("boolean"===typeof b,e,"internal-error"),Zu("boolean"===typeof x,e,"internal-error"),Rd(h,e.name),Rd(f,e.name),Rd(g,e.name),Rd(p,e.name),Rd(m,e.name),Rd(v,e.name);const k=new Od({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:g,stsTokenManager:S,createdAt:m,lastLoginAt:v});return w&&Array.isArray(w)&&(k.providerData=w.map(e=>Object.assign({},e))),p&&(k._redirectEventId=p),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Dd;r.updateFromServerResponse(t);const i=new Od({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await jd(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Zu(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Pd(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Dd;a.updateFromIdToken(n);const o=new Od({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Cd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const Ld=new Map;function Md(e){td(e instanceof Function,"Expected a class definition");let t=Ld.get(e);return t?(td(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ld.set(e,t),t)}class Fd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fd.type="NONE";const Ud=Fd;function Vd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class zd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Vd(this.userKey,r.apiKey,i),this.fullPersistenceKey=Vd("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Od._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new zd(Md(Ud),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Md(Ud);const s=Vd(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Od._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new zd(i,e,n)):new zd(i,e,n)}}function qd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Bd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qd(t))return"Blackberry";if(Yd(t))return"Webos";if(Gd(t))return"Safari";if((t.includes("chrome/")||Wd(t))&&!t.includes("edge/"))return"Chrome";if(Kd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Bd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return/firefox\//i.test(e)}function Gd(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:se()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return/crios\//i.test(e)}function Hd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return/iemobile/i.test(e)}function Kd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return/android/i.test(e)}function Qd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return/blackberry/i.test(e)}function Yd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return/webos/i.test(e)}function Jd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Xd(){return function(){const e=se();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function $d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se();return Jd(e)||Kd(e)||Yd(e)||Qd(e)||/windows phone/i.test(e)||Hd(e)}function Zd(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qd(se());break;case"Worker":t="".concat(qd(se()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Dt,"/").concat(r)}class eh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class th{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class nh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ih(this),this.idTokenSubscription=new ih(this),this.beforeStateQueue=new eh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Md(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await zd.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Nd(this,{idToken:e}),n=await Od._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(jt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Zu(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jd(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(Ju(this));const t=e?ye(e):null;return t&&Zu(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Zu(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject(Ju(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(Ju(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Md(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return hd(e,"GET","/v2/passwordPolicy",dd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new th(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ce("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return hd(e,"POST","/v2/accounts:revokeToken",dd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Md(e)||this._popupRedirectResolver;Zu(t,this,"argument-error"),this.redirectPersistenceManager=await zd.create(this,[Md(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Zu(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Zu(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Wu.logLevel<=ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wu.warn("Auth (".concat(Dt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function rh(e){return ye(e)}class ih{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new me(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Zu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ah(e){return sh.loadJS(e)}function oh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class lh{constructor(e){this.type="recaptcha-enterprise",this.auth=rh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;bd(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{wd(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new xd(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&bd(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=sh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ah(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ch(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new lh(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function uh(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ch(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ch(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function dh(e,t,n){const r=rh(e);Zu(r._canInitEmulator,r,"emulator-config-failed"),Zu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=hh(t),{host:a,port:o}=function(e){const t=hh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:fh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:fh(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function hh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class gh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ed("not implemented")}_getIdTokenResponse(e){return ed("not implemented")}_linkToIdToken(e,t){return ed("not implemented")}_getReauthenticationResolver(e){return ed("not implemented")}}async function ph(e,t){return hd(e,"POST","/v1/accounts:signUp",t)}async function mh(e,t){return gd(e,"POST","/v1/accounts:signInWithPassword",dd(e,t))}async function vh(e,t){return hd(e,"POST","/v1/accounts:sendOobCode",dd(e,t))}class yh extends gh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new yh(e,t,"password")}static _fromEmailAndCode(e,t){return new yh(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return uh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",mh);case"emailLink":return async function(e,t){return gd(e,"POST","/v1/accounts:signInWithEmailLink",dd(e,t))}(e,{email:this._email,oobCode:this._password});default:Ku(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return uh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ph);case"emailLink":return async function(e,t){return gd(e,"POST","/v1/accounts:signInWithEmailLink",dd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ku(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function bh(e,t){return gd(e,"POST","/v1/accounts:signInWithIdp",dd(e,t))}class xh extends gh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ku("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=zu(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new xh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return bh(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,bh(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fe(t)}return e}}const wh={USER_NOT_FOUND:"user-not-found"};class Nh extends gh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Nh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Nh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return gd(e,"POST","/v1/accounts:signInWithPhoneNumber",dd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await gd(e,"POST","/v1/accounts:signInWithPhoneNumber",dd(e,t));if(n.temporaryProof)throw yd(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return gd(e,"POST","/v1/accounts:signInWithPhoneNumber",dd(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),wh)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Nh({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Sh{constructor(e){var t,n,r,i,s,a;const o=ge(pe(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Zu(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=ge(pe(e)).link,n=t?ge(pe(t)).deep_link_id:null,r=ge(pe(e)).deep_link_id;return(r?ge(pe(r)).link:null)||r||n||t||e}(e);try{return new Sh(t)}catch(n){return null}}}class kh{constructor(){this.providerId=kh.PROVIDER_ID}static credential(e,t){return yh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Sh.parseLink(t);return Zu(n,"argument-error"),yh._fromEmailAndCode(e,n.code,n.tenantId)}}kh.PROVIDER_ID="password",kh.EMAIL_PASSWORD_SIGN_IN_METHOD="password",kh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Eh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _h extends Eh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Th extends _h{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Zu("providerId"in t&&"signInMethod"in t,"argument-error"),xh._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Zu(e.idToken||e.accessToken,"argument-error"),xh._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Th.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Th.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new Th(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(l){return null}}}class Ih extends _h{constructor(){super("facebook.com")}static credential(e){return xh._fromParams({providerId:Ih.PROVIDER_ID,signInMethod:Ih.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ih.credentialFromTaggedObject(e)}static credentialFromError(e){return Ih.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ih.credential(t.oauthAccessToken)}catch(n){return null}}}Ih.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ih.PROVIDER_ID="facebook.com";class Ch extends _h{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xh._fromParams({providerId:Ch.PROVIDER_ID,signInMethod:Ch.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ch.credentialFromTaggedObject(e)}static credentialFromError(e){return Ch.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ch.credential(n,r)}catch(i){return null}}}Ch.GOOGLE_SIGN_IN_METHOD="google.com",Ch.PROVIDER_ID="google.com";class jh extends _h{constructor(){super("github.com")}static credential(e){return xh._fromParams({providerId:jh.PROVIDER_ID,signInMethod:jh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jh.credentialFromTaggedObject(e)}static credentialFromError(e){return jh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return jh.credential(t.oauthAccessToken)}catch(n){return null}}}jh.GITHUB_SIGN_IN_METHOD="github.com",jh.PROVIDER_ID="github.com";class Ah extends _h{constructor(){super("twitter.com")}static credential(e,t){return xh._fromParams({providerId:Ah.PROVIDER_ID,signInMethod:Ah.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ah.credentialFromTaggedObject(e)}static credentialFromError(e){return Ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ah.credential(n,r)}catch(i){return null}}}async function Ph(e,t){return gd(e,"POST","/v1/accounts:signUp",dd(e,t))}Ah.TWITTER_SIGN_IN_METHOD="twitter.com",Ah.PROVIDER_ID="twitter.com";class Dh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Od._fromIdTokenResponse(e,n,r),s=Rh(n);return new Dh({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Rh(n);return new Dh({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Rh(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Oh extends le{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Oh(e,t,n,r)}}function Lh(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Oh._fromErrorAndOperation(e,n,t,r);throw n})}async function Mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Td(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Dh._forOperation(e,"link",r)}async function Fh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(jt(r.app))return Promise.reject(Ju(r));const i="reauthenticate";try{const s=await Td(e,Lh(r,i,t,e),n);Zu(s.idToken,r,"internal-error");const a=Ed(s.idToken);Zu(a,r,"internal-error");const{sub:o}=a;return Zu(e.uid===o,r,"user-mismatch"),Dh._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ku(r,"user-mismatch"),s}}async function Uh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(jt(e.app))return Promise.reject(Ju(e));const r="signIn",i=await Lh(e,r,t),s=await Dh._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Vh(e,t){return Uh(rh(e),t)}function zh(e,t,n){var r;Zu((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Zu("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Zu(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Zu(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function qh(e){const t=rh(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Bh(e,t){const n=ye(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&zh(n.auth,r,t);const{email:i}=await async function(e,t){return vh(e,t)}(n.auth,r);i!==e.email&&await e.reload()}new WeakMap;const Gh="__sak";class Wh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Hh extends Wh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$d(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Xd()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hh.type="LOCAL";const Kh=Hh;class Qh extends Wh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qh.type="SESSION";const Yh=Qh;class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Jh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Xh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Jh.receivers=[];class $h{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Xh("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Zh(){return window}function ef(){return"undefined"!==typeof Zh().WorkerGlobalScope&&"function"===typeof Zh().importScripts}const tf="firebaseLocalStorageDb",nf="firebaseLocalStorage",rf="fbase_key";class sf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function af(e,t){return e.transaction([nf],t?"readwrite":"readonly").objectStore(nf)}function of(){const e=indexedDB.open(tf,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(nf,{keyPath:rf})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(nf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(tf);return new sf(e).toPromise()}(),t(await of()))})})}async function lf(e,t,n){const r=af(e,!0).put({[rf]:t,value:n});return new sf(r).toPromise()}function cf(e,t){const n=af(e,!0).delete(t);return new sf(n).toPromise()}class uf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await of()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ef()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(ef()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new $h(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await lf(e,Gh,"1"),await cf(e,Gh),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>lf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=af(e,!1).get(t),r=await new sf(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=af(e,!1).getAll();return new sf(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}uf.type="LOCAL";const df=uf;oh("rcb"),new ad(3e4,6e4);const hf="recaptcha";async function ff(e,t,n){var r;const i=await n.verify();try{let s;if(Zu("string"===typeof i,e,"argument-error"),Zu(n.type===hf,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Zu("enroll"===t.type,e,"internal-error");const n=await function(e,t){return hd(e,"POST","/v2/accounts/mfaEnrollment:start",dd(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Zu("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Zu(n,e,"missing-multi-factor-info");const a=await function(e,t){return hd(e,"POST","/v2/accounts/mfaSignIn:start",dd(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return hd(e,"POST","/v1/accounts:sendVerificationCode",dd(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class gf{constructor(e){this.providerId=gf.PROVIDER_ID,this.auth=rh(e)}verifyPhoneNumber(e,t){return ff(this.auth,e,ye(t))}static credential(e,t){return Nh._fromVerification(e,t)}static credentialFromResult(e){const t=e;return gf.credentialFromTaggedObject(t)}static credentialFromError(e){return gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Nh._fromTokenResponse(n,r):null}}function pf(e,t){return t?Md(t):(Zu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}gf.PROVIDER_ID="phone",gf.PHONE_SIGN_IN_METHOD="phone";class mf extends gh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vf(e){return Uh(e.auth,new mf(e),e.bypassAuthState)}function yf(e){const{auth:t,user:n}=e;return Zu(n,t,"internal-error"),Fh(n,new mf(e),e.bypassAuthState)}async function bf(e){const{auth:t,user:n}=e;return Zu(n,t,"internal-error"),Mh(n,new mf(e),e.bypassAuthState)}class xf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vf;case"linkViaPopup":case"linkViaRedirect":return bf;case"reauthViaPopup":case"reauthViaRedirect":return yf;default:Ku(this.auth,"internal-error")}}resolve(e){td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){td(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wf=new ad(2e3,1e4);async function Nf(e,t,n){if(jt(e.app))return Promise.reject(Qu(e,"operation-not-supported-in-this-environment"));const r=rh(e);Xu(e,t,Eh);const i=pf(r,n);return new Sf(r,"signInViaPopup",t,i).executeNotNull()}class Sf extends xf{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Sf.currentPopupAction&&Sf.currentPopupAction.cancel(),Sf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Zu(e,this.auth,"internal-error"),e}async onExecution(){td(1===this.filter.length,"Popup operations only handle one event");const e=Xh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Qu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qu(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,wf.get())};e()}}Sf.currentPopupAction=null;const kf=new Map;class Ef extends xf{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=kf.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=If(t),r=Tf(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}kf.set(this.auth._key(),e)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function _f(e,t){kf.set(e._key(),t)}function Tf(e){return Md(e._redirectPersistence)}function If(e){return Vd("pendingRedirect",e.config.apiKey,e.name)}async function Cf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(jt(e.app))return Promise.reject(Ju(e));const r=rh(e),i=pf(r,t),s=new Ef(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class jf{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Pf(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Qu(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Af(e))}saveEventToCache(e){this.cachedEventUids.add(Af(e)),this.lastProcessedEventTime=Date.now()}}function Af(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Pf(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Df=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rf=/^https?/;async function Of(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return hd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Lf(r))return}catch(n){}Ku(e,"unauthorized-domain")}function Lf(e){const t=nd(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Rf.test(n))return!1;if(Df.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Mf=new ad(3e4,6e4);function Ff(){const e=Zh().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Uf(e){return new Promise((t,n)=>{var r,i,s;function a(){Ff(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ff(),n(Qu(e,"network-request-failed"))},timeout:Mf.get()})}if(null===(i=null===(r=Zh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Zh().gapi)||void 0===s?void 0:s.load)){const t=oh("iframefcb");return Zh()[t]=()=>{gapi.load?a():n(Qu(e,"network-request-failed"))},ah("".concat(sh.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Vf=null,e})}let Vf=null;const zf=new ad(5e3,15e3),qf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gf(e){const t=e.config;Zu(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?od(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Dt},i=Bf.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(fe(r).slice(1))}async function Wf(e){const t=await function(e){return Vf=Vf||Uf(e),Vf}(e),n=Zh().gapi;return Zu(n,e,"internal-error"),t.open({where:document.body,url:Gf(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qf,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Qu(e,"network-request-failed"),s=Zh().setTimeout(()=>{r(i)},zf.get());function a(){Zh().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Hf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Qf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Hf),{width:r.toString(),height:i.toString(),top:s,left:a}),c=se().toLowerCase();n&&(o=Wd(c)?"_blank":n),Bd(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Jd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:se())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Kf(null);const d=window.open(t||"",o,u);Zu(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Kf(d)}const Yf="__/auth/handler",Jf="emulator/auth/handler",Xf=encodeURIComponent("fac");async function $f(e,t,n,r,i,s){Zu(e.config.authDomain,e,"auth-domain-config-required"),Zu(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dt,eventId:i};if(t instanceof Eh){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof _h){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Xf,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Yf);return od(t,Jf)}(e),"?").concat(fe(o).slice(1)).concat(c)}const Zf="webStorageSupport";const eg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yh,this._completeRedirectFn=Cf,this._overrideRedirectResult=_f}async _openPopup(e,t,n,r){var i;td(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Qf(e,await $f(e,t,n,nd(),r),Xh())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Zh().location.href=e}(await $f(e,t,n,nd(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(td(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Wf(e),n=new jf(e);return t.register("authEvent",t=>{Zu(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zf,{type:Zf},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Zf];void 0!==i&&t(!!i),Ku(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Of(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $d()||Gd()||Jd()}};var tg="@firebase/auth",ng="1.7.9";class rg{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Zu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ig=re("authIdTokenMaxAge")||300;let sg=null;var ag;sh={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Qu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ag="Browser",It(new be("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Zu(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:ag,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zd(ag)},c=new nh(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Md);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),It(new be("auth-internal",e=>(e=>new rg(e))(rh(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Lt(tg,ng,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ag)),Lt(tg,ng,"esm2017");var og=n(151);const lg=Rt({apiKey:"AIzaSyC3kQTbaNNYojEIx1jaU9p0C8K4ue7NFIs",authDomain:"gigwave-397a4.firebaseapp.com",projectId:"gigwave-397a4",storageBucket:"gigwave-397a4.firebasestorage.app",messagingSenderId:"253503195277",appId:"1:253503195277:web:c6c109ccee6fdbd9c57ac4"}),cg=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ct("object"==typeof e?e:Ot(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=te(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Nc(r,...e)}return r}(lg),ug=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();const t=Ct(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ct(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(de(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ku(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:eg,persistence:[df,Kh,Yh]}),r=re("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ig)return;const r=null===t||void 0===t?void 0:t.token;sg!==r&&(sg=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ye(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){ye(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=te("auth");return s&&dh(n,"http://".concat(s)),n}(lg),dg=(e,t)=>1e3*(0,og.distanceBetween)([e.lat,e.lng],[t.lat,t.lng]),hg=()=>new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},e=>t(e),{enableHighAccuracy:!0,timeout:1e4}):t(new Error("Geolocation not supported"))}),fg=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.log("\ud83d\udd0d SEARCH DEBUG: Starting search..."),console.log("\ud83d\udccd User Location:",e),console.log("\ud83d\udccf Search Radius:",t,"km"),console.log("\ud83c\udfaf Status Filter:",n||"all");const r=[e.lat,e.lng],i=(0,og.geohashQueryBounds)(r,1e3*t);console.log("\ud83d\uddfa\ufe0f Geohash bounds:",i);const s=[];for(const e of i){let t;t=n?gu(_c(cg,"liveGigs"),mu("geohash",">=",e[0]),mu("geohash","<=",e[1]),mu("status","==",n)):gu(_c(cg,"liveGigs"),mu("geohash",">=",e[0]),mu("geohash","<=",e[1])),s.push(Pu(t))}console.log("\u23f3 Querying Firebase...");const a=await Promise.all(s);console.log("\ud83d\udce6 Query results:",a.map(e=>e.size));const l=[];let c=0;for(const n of a)c+=n.size,n.forEach(n=>{const r=n.data();console.log("\ud83d\udcc4 Found gig:",n.id,r);const i={lat:r.location.latitude,lng:r.location.longitude},s=dg(e,i);console.log("\ud83d\udccf Distance:",s,"meters"),s<=1e3*t&&"ended"!==r.status&&"cancelled"!==r.status?(console.log("\u2705 Gig within range!"),l.push(o(o({id:n.id},r),{},{distance:Math.round(s)}))):console.log("\u274c Gig filtered out")});return console.log("\ud83c\udfaf Total docs found:",c),console.log("\u2705 Gigs within range:",l.length),l.sort((e,t)=>"live"===e.status&&"live"!==t.status?-1:"live"!==e.status&&"live"===t.status?1:e.distance-t.distance)}catch(r){return console.error("\u274c Error searching gigs:",r),[]}},gg=async()=>{try{await function(e){return ye(e).signOut()}(ug)}catch(e){throw console.error("Sign-out error:",e),e}},pg=async(e,t)=>{try{console.log("\ud83c\udfb8 Creating live gig..."),console.log("\ud83d\udccd Location:",e.location);const n=Tc(_c(cg,"liveGigs")),r=(0,og.geohashForLocation)([e.location.lat,e.location.lng]);console.log("\ud83d\uddfa\ufe0f Generated geohash:",r);const i=Date.now(),s=i+18e6,a=o(o({},e),{},{artistId:t,geohash:r,location:new Lc(e.location.lat,e.location.lng),status:e.status||"live",actualStartTimeMs:i,scheduledEndTimeMs:s,actualStartTime:new Date(i),startTime:new Date(i),scheduledEndTime:new Date(s),votes:{},voteTimestamps:{},comments:[],donations:[],playedSongs:[]});return console.log("\ud83d\udcbe Saving gig to Firebase:",a),console.log("\u23f0 Actual start time (ms):",i,"\u2192",new Date(i).toISOString()),console.log("\u23f0 Scheduled end time (ms):",s,"\u2192",new Date(s).toISOString()),await Du(n,a),console.log("\u2705 Gig created with ID:",n.id),n.id}catch(n){throw console.error("\u274c Error creating gig:",n),n}},mg=async e=>{console.log("\u23f9\ufe0f Ending gig:",e);const t=Tc(cg,"liveGigs",e);await Ru(t,{status:"ended",endTime:Uu()}),console.log("\u2705 Gig ended")},vg=async(e,t)=>{try{const n=await function(e,t,n){return jt(e.app)?Promise.reject(Ju(e)):Vh(ye(e),kh.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&qh(e),t})}(ug,e,t);return console.log("\u2705 Signed in with email:",n.user.email),n.user}catch(n){throw console.error("\u274c Email sign-in error:",n),n}},yg=async(e,t)=>{try{const n=await async function(e,t,n){if(jt(e.app))return Promise.reject(Ju(e));const r=rh(e),i=uh(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ph),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&qh(e),t}),a=await Dh._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(ug,e,t);return await(async e=>{const t=Tc(cg,"users",e.uid);(await ju(t)).exists()||await Du(t,{uid:e.uid,email:e.email,displayName:e.displayName||"Anonymous",photoURL:e.photoURL||null,type:"audience",createdAt:Uu()})})(n.user),console.log("\u2705 Signed up with email:",n.user.email),n.user}catch(n){throw console.error("\u274c Email sign-up error:",n),n}},bg=async e=>{try{console.log("\ud83d\udd0d Checking for active live gigs for artist:",e);const t=gu(_c(cg,"liveGigs"),mu("artistId","==",e),mu("status","==","live")),n=await Pu(t);if(!n.empty){const e=n.docs[0],t=o({id:e.id},e.data());return console.log("\u2705 Active live gig found:",t.venueName),t}return console.log("\u2705 No active live gigs found"),null}catch(t){return console.error("\u274c Error checking active gigs:",t),null}},xg=async e=>{try{const t=Tc(cg,"users",e,"profile","data"),n=await ju(t);return n.exists()?o({id:n.id},n.data()):null}catch(t){throw console.error("\u274c Error getting profile:",t),t}},wg=async()=>{try{const e=ug.currentUser;return e?(await Ad(e),console.log("\ud83d\udd04 Email verification status:",e.emailVerified),e.emailVerified):(console.log("\u26a0\ufe0f No user logged in"),!1)}catch(e){return console.error("\u274c Error checking verification:",e),("auth/user-token-expired"===e.code||"auth/invalid-user-token"===e.code)&&(console.log("\u26a0\ufe0f User session expired"),!1)}},Ng=async(e,t)=>{try{const n=Tc(cg,"artistData",e);await Du(n,{masterSongs:t,updatedAt:Uu()},{merge:!0}),console.log("\u2705 Master playlist saved to Firebase:",t.length,"songs")}catch(n){throw console.error("\u274c Error saving master playlist:",n),n}},Sg=async(e,t)=>{try{const n=Tc(cg,"artistData",e);await Du(n,{gigPlaylists:t,updatedAt:Uu()},{merge:!0}),console.log("\u2705 Gig playlists saved to Firebase:",t.length,"playlists")}catch(n){throw console.error("\u274c Error saving gig playlists:",n),n}};window.db=cg,window.auth=ug;const kg=e=>{let{socialMedia:t,artistName:n}=e;if(!t||!Object.values(t).some(e=>e))return null;window.db=cg,window.auth=ug,console.log("\u2705 Firebase exposed to window for debugging");return(0,p.jsxs)("div",{className:"space-y-3",children:[(0,p.jsxs)("p",{className:"text-electric font-bold text-sm uppercase tracking-wider",children:["\ud83d\udd17 Follow ",n]}),(0,p.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"instagram",icon:"\ud83d\udcf7",name:"Instagram",color:"from-purple-500 to-pink-500"},{key:"facebook",icon:"\ud83d\udc4d",name:"Facebook",color:"from-blue-600 to-blue-500"},{key:"spotify",icon:"\ud83c\udfb5",name:"Spotify",color:"from-green-600 to-green-500"},{key:"youtube",icon:"\ud83d\udcfa",name:"YouTube",color:"from-red-600 to-red-500"},{key:"twitter",icon:"\ud83d\udc26",name:"Twitter",color:"from-sky-500 to-blue-500"},{key:"tiktok",icon:"\ud83c\udfac",name:"TikTok",color:"from-black to-pink-500"},{key:"soundcloud",icon:"\ud83c\udfa7",name:"SoundCloud",color:"from-orange-600 to-orange-500"}].map(e=>{const n=((e,t)=>{if(!t)return null;if(t.startsWith("http://")||t.startsWith("https://"))return t;switch(e){case"instagram":return"https://instagram.com/".concat(t.replace("@",""));case"facebook":return t.includes("facebook.com")?t:"https://facebook.com/".concat(t);case"twitter":return"https://twitter.com/".concat(t.replace("@",""));case"youtube":return t.includes("youtube.com")?t:"https://youtube.com/".concat(t);case"spotify":return t.includes("spotify.com")?t:"https://open.spotify.com/artist/".concat(t);case"tiktok":return"https://tiktok.com/@".concat(t.replace("@",""));case"soundcloud":return"https://soundcloud.com/".concat(t);default:return t}})(e.key,t[e.key]);return n?(0,p.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-gradient-to-r ".concat(e.color," hover:opacity-80 text-white rounded-lg font-bold text-sm transition-all hover:scale-105 flex items-center gap-2"),children:[(0,p.jsx)("span",{children:e.icon}),(0,p.jsx)("span",{children:e.name})]},e.key):null})})]})};function Eg(){const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(!1),[v,y]=(0,e.useState)(""),[b,D]=(0,e.useState)("default"),[R,O]=(0,e.useState)(!1),[L,M]=(0,e.useState)("signin"),[F,U]=(0,e.useState)(""),[V,z]=(0,e.useState)(""),[q,B]=(0,e.useState)(""),[Q,Y]=(0,e.useState)("audience"),[J,X]=(0,e.useState)("discover"),[$,Z]=(0,e.useState)("master"),[ee,te]=(0,e.useState)(null),[ne,re]=(0,e.useState)([]),[ie,se]=(0,e.useState)(!1),[ae,oe]=(0,e.useState)("today"),[le,ce]=(0,e.useState)(""),[ue,de]=(0,e.useState)([]),[he,fe]=(0,e.useState)([]),[ge,pe]=(0,e.useState)([]),[me,ve]=(0,e.useState)([]),[be,xe]=(0,e.useState)(!1),[we,Ne]=(0,e.useState)(null),[Se,ke]=(0,e.useState)(!1),[Ee,_e]=(0,e.useState)(null),[Te,Ie]=(0,e.useState)(""),[Ce,je]=(0,e.useState)([]),[Ae,Pe]=(0,e.useState)(!1),[De,Re]=(0,e.useState)(!1),[Oe,Le]=(0,e.useState)(0),[Me,Fe]=(0,e.useState)(!1),[Ue,Ve]=(0,e.useState)(""),[ze,qe]=(0,e.useState)([]),[Be,Ge]=(0,e.useState)(!1),[We,He]=(0,e.useState)(!1),[Ke,Qe]=(0,e.useState)(!1),[Ye,Je]=(0,e.useState)(!1),[Xe,$e]=(0,e.useState)(!1),[Ze,et]=(0,e.useState)(null),[tt,nt]=(0,e.useState)({votes:{},comments:[],donations:[],queuedSongs:[],currentSong:null,playedSongs:[]}),[rt,it]=(0,e.useState)(null),[st,at]=(0,e.useState)(!1),[ot,lt]=(0,e.useState)("queue"),[ct,ut]=(0,e.useState)(null),[dt,ht]=(0,e.useState)(!1),[ft,gt]=(0,e.useState)([]),[pt,mt]=(0,e.useState)(!1),[vt,yt]=(0,e.useState)(!1),[bt,xt]=(0,e.useState)(!1),[wt,Nt]=(0,e.useState)(!1),[St,kt]=(0,e.useState)(!1),[Et,_t]=(0,e.useState)(!1),[Tt,It]=(0,e.useState)(null),[Ct,jt]=(0,e.useState)(""),[At,Pt]=(0,e.useState)(!0),[Dt,Rt]=(0,e.useState)(!1),[Ot,Lt]=(0,e.useState)(0),[Mt,Ft]=(0,e.useState)(null),[Ut,Vt]=(0,e.useState)(null),[zt,qt]=(0,e.useState)([]),[Bt,Gt]=(0,e.useState)(!1),[Wt,Ht]=(0,e.useState)(!1),[Kt,Qt]=(0,e.useState)({}),[Yt,Jt]=(0,e.useState)(!1),[Xt,$t]=(0,e.useState)(null),[Zt,en]=(0,e.useState)(!1),[tn,nn]=(0,e.useState)(1),[rn,sn]=(0,e.useState)({artistName:"",fullName:"",bio:"",profilePhoto:"",genre:"",location:"",socialMedia:{instagram:"",facebook:"",youtube:"",linkedin:"",twitter:"",tiktok:"",soundcloud:""}}),[an,on]=(0,e.useState)(!1),[ln,cn]=(0,e.useState)(!1),un=e=>{if("ended"===e.status)return"ended";if(e.manuallyEnded)return"ended";const t=new Date,n=e.gigDate||e.date,r=e.gigTime||e.time;if(!n||!r)return e.status||"upcoming";const i=new Date("".concat(n,"T").concat(r)),s=(t-i)/36e5;return"live"===e.status?s>5&&!e.timeExtended?"ended":"live":t<i?"upcoming":s>=0&&s<=5?"checkVenue":s>5?"cancelled":"upcoming"};(0,e.useEffect)(()=>{document.body.style.backgroundImage="url(".concat(l,")"),document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center",document.body.style.backgroundAttachment="fixed",document.body.style.backgroundRepeat="no-repeat";const e=document.createElement("div");return e.id="bg-overlay",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.01);\n      z-index: -1;\n      pointer-events: none;\n    ",document.body.appendChild(e),()=>{document.body.style.backgroundImage="";const e=document.getElementById("bg-overlay");e&&e.remove()}},[]),(0,e.useEffect)(()=>{console.log("\ud83d\udd04 useEffect RUNNING - mode:",J);const e=localStorage.getItem("GigWave_mode");e&&!J&&(console.log("\ud83d\udce5 Restoring saved mode:",e),X(e));const t=function(e,t,n,r){return ye(e).onAuthStateChanged(t,n,r)}(ug,async e=>{if(console.log("\ud83d\udc64 Auth state changed:",e?e.email:"No user"),n(e),e){on(e.emailVerified),console.log("\ud83d\udce7 Email verified:",e.emailVerified);try{console.log("\ud83d\udce5 Loading profile for UID:",e.uid);const t=await xg(e.uid);console.log("\ud83d\udce6 Profile loaded:",t),$t(t),console.log("\ud83d\udd0d Checking for active live gig...");const n=await bg(e.uid);if(n)console.log("\ud83c\udfb8 ACTIVE LIVE GIG FOUND:",n.venueName),et(n),X("live"),localStorage.setItem("GigWave_live_".concat(e.uid),JSON.stringify(n)),localStorage.setItem("GigWave_mode","live"),console.log("\u2705 Artist locked into live mode");else{console.log("\u2705 No active live gig found"),console.log("\ud83d\udd0d Checking if profile is complete...");const t=await(async e=>{try{const t=await xg(e);if(console.log("\ud83d\udd0d isProfileComplete - profile:",t),!t)return console.log("\ud83d\udd0d isProfileComplete - No profile, returning false"),!1;const n={artistName:!!t.artistName,fullName:!!t.fullName,bio:!!t.bio,bioLength:t.bio&&t.bio.length>=50,genre:!!t.genre,location:!!t.location};console.log("\ud83d\udd0d isProfileComplete - checks:",n);const r=!!(t.artistName&&t.fullName&&t.bio&&t.bio.length>=50&&t.genre&&t.location);return console.log("\ud83d\udd0d isProfileComplete - result:",r),r}catch(t){return console.error("\u274c Error checking profile:",t),!1}})(e.uid);console.log("\u2705 Profile complete?",t),console.log("\ud83c\udfaf Condition check:"),console.log("   - !complete:",!t),console.log('   - mode === "artist":',"artist"===J),console.log("   - Result:",!t&&"artist"===J),t||"artist"!==J?console.log("\u274c NOT showing profile setup modal"):(console.log("\ud83c\udfb8 \u2705 SHOWING PROFILE SETUP MODAL"),en(!0))}}catch(t){console.error("\u274c Error loading profile:",t)}}else console.log("\ud83d\udc64 No user - clearing profile"),$t(null),"artist"===J&&X("discover");i(!1),console.log("\u2705 Auth loading complete")});return()=>{console.log("\ud83e\uddf9 Cleaning up auth listener"),t()}},[J]),(0,e.useEffect)(()=>{if(Zt&&t&&!an){const e=setInterval(async()=>{console.log("\ud83d\udd04 Checking email verification status...");await wg()&&(on(!0),console.log("\u2705 Email verified!"),alert("\u2705 Email verified! You can now complete your profile."),clearInterval(e))},5e3);return()=>clearInterval(e)}},[Zt,t,an]),(0,e.useEffect)(()=>{J&&(localStorage.setItem("GigWave_mode",J),console.log("\ud83d\udcbe Saved mode to localStorage:",J))},[J]),(0,e.useEffect)(()=>{if(null===Ze||void 0===Ze||!Ze.id)return;const e=((e,t)=>Lu(Tc(cg,"liveGigs",e),e=>{if(e.exists()){const n=e.data(),r=e=>{if(!e)return e;if(null!==e&&void 0!==e&&e.toDate&&"function"===typeof e.toDate)return e.toDate();if(Array.isArray(e))return e.map(e=>r(e));if("object"===typeof e){const t={};for(const[n,i]of Object.entries(e))t[n]=r(i);return t}return e},i=r(n);console.log("\ud83d\udce1 Live gig data updated safely"),t(o({id:e.id},i))}},e=>{console.error("\u274c Error listening to live gig:",e)}))(Ze.id,async e=>{console.log("\ud83c\udfb5 Live gig update received"),console.log("\ud83d\udc64 Current User:",null===t||void 0===t?void 0:t.uid),console.log("\ud83c\udfb8 Artist ID:",e.artistId),nt({votes:e.votes||{},comments:e.comments||[],donations:e.donations||[],queuedSongs:e.queuedSongs||[],masterPlaylist:e.masterPlaylist||[],currentSong:e.currentSong||null,playedSongs:e.playedSongs||[],scheduledEndTime:e.scheduledEndTime||null,songRequests:e.songRequests||[],requestsEnabled:!1!==e.requestsEnabled,jukeboxMode:e.jukeboxMode||!1,jukeboxPrice:e.jukeboxPrice||0,maxQueueSize:e.maxQueueSize||20,lastVoteTime:e.lastVoteTime||{},audienceTracking:e.audienceTracking||{totalJoins:0,currentlyActive:0,joinedUsers:{}}}),(null===t||void 0===t?void 0:t.uid)===e.artistId?(console.log("\u2705 Artist viewing - triggering swap check"),await(async(e,t)=>{try{console.log("\ud83d\udd04 Checking for song swaps...");const n=t.queuedSongs||[],r=t.masterPlaylist||[],i=t.votes||{},s=t.playedSongs||[],a=n.filter(e=>!s.includes(e.id));if(0===a.length)return void console.log("\u26a0\ufe0f No unplayed gig songs to swap");const o=n.map(e=>e.id),l=r.filter(e=>!o.includes(e.id));if(0===l.length)return void console.log("\u26a0\ufe0f No master songs available for swap");const c=a.reduce((e,t)=>{const n=i[Math.floor(e.id)]||0;return(i[Math.floor(t.id)]||0)<n?t:e}),u=i[Math.floor(c.id)]||0;console.log("\ud83d\udcca Lowest gig song: ".concat(c.title," with ").concat(u," votes"));const d=l.reduce((e,t)=>{const n=i[Math.floor(null===e||void 0===e?void 0:e.id)]||0;return(i[Math.floor(t.id)]||0)>n?t:e},l[0]),h=i[Math.floor(d.id)]||0;if(console.log("\ud83d\udcca Highest master song: ".concat(d.title," with ").concat(h," votes")),h>u){console.log("\ud83d\udd04 SWAPPING: ".concat(d.title," (").concat(h,") replaces ").concat(c.title," (").concat(u,")"));const t=n.filter(e=>e.id!==c.id).concat([d]).sort((e,t)=>{const n=i[Math.floor(e.id)]||0;return(i[Math.floor(t.id)]||0)-n}),r=Tc(cg,"liveGigs",e);return await Ru(r,{queuedSongs:t}),console.log("\u2705 Swap completed!"),!0}return console.log("\u2705 No swap needed"),!1}catch(n){return console.error("\u274c Error in checkAndSwapSongs:",n),!1}})(Ze.id,e)):console.log("\u274c Not artist - skipping swap")});return()=>e()},[null===Ze||void 0===Ze?void 0:Ze.id,t]),(0,e.useEffect)(()=>{if(null===Ze||void 0===Ze||!Ze.id||"live"!==J||pt)return;const e=async()=>{if(tt.scheduledEndTimeMs){const e=Date.now(),t=tt.scheduledEndTimeMs,n=t-e,r=Math.floor(n/6e4);if(console.log("\u23f0 Timer check (using MS):",{nowMs:e,endTimeMs:t,remainingMs:n,remainingMinutes:r,nowTime:new Date(e).toISOString(),endTime:new Date(t).toISOString()}),it(r),r<=10&&r>0&&!st&&(at(!0),alert("\u26a0\ufe0f Your gig will auto-end in ".concat(r,' minutes!\n\nClick "Add 1 Hour" to extend.'))),r<=0&&"live"===J&&!pt){console.log("\u23f0 AUTO-ENDING GIG - Time expired");try{await En("\u23f0 Time limit reached! Your gig has been automatically ended.",!0)}catch(i){console.error("Error auto-ending gig:",i)}}return}if(!tt.scheduledEndTime)return void console.log("\u26a0\ufe0f No scheduledEndTime found");const e=(()=>{const e=tt.scheduledEndTime;return e instanceof Date?e:null!==e&&void 0!==e&&e.toDate&&"function"===typeof e.toDate?e.toDate():null!==e&&void 0!==e&&e.seconds?new Date(1e3*e.seconds):"number"===typeof e||"string"===typeof e?new Date(e):(console.error("\u274c Invalid scheduledEndTime:",e),null)})();if(!e)return void console.error("\u274c Could not parse scheduledEndTime");const t=new Date,n=e-t,r=Math.floor(n/6e4);if(console.log("\u23f0 Timer check (using Date fallback):",{now:t.toISOString(),endTime:e.toISOString(),remainingMinutes:r}),it(r),r<=10&&r>0&&!st&&(at(!0),alert("\u26a0\ufe0f Your gig will auto-end in ".concat(r,' minutes!\n\nClick "Add 1 Hour" to extend.'))),r<=0&&"live"===J&&!pt){console.log("\u23f0 AUTO-ENDING GIG - Time expired");try{await En("\u23f0 Time limit reached! Your gig has been automatically ended.",!0)}catch(i){console.error("Error auto-ending gig:",i)}}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[null===Ze||void 0===Ze?void 0:Ze.id,tt.scheduledEndTimeMs,tt.scheduledEndTime,J,st,pt]),(0,e.useEffect)(()=>{hg().then(e=>te(e)).catch(e=>console.log("Location not available:",e))},[]),(0,e.useEffect)(()=>{if("discover"!==J||0===ne.length||!ee)return;console.log("\ud83d\udd04 Starting auto-refresh for discovery page");const e=setInterval(async()=>{if(!document.hidden)try{console.log("\ud83d\udd04 Auto-refreshing gigs...");const e=await fg(ee,50),t=e.filter(e=>{const t=un(e);return["live","checkVenue","upcoming"].includes(t)});re(e),de(e),console.log("\u2705 Refresh complete:",t.length,"active gigs")}catch(e){console.error("\u274c Auto-refresh error:",e)}},3e4);return()=>{console.log("\ud83d\uded1 Stopping auto-refresh"),clearInterval(e)}},[J,ne.length,ee]),(0,e.useEffect)(()=>{if(!t)return;(async()=>{try{console.log("\ud83d\udce5 Loading playlists from Firebase...");const e=await(async e=>{try{const t=Tc(cg,"artistData",e),n=await ju(t);return n.exists()&&n.data().masterSongs||[]}catch(t){return console.error("\u274c Error getting master playlist:",t),[]}})(t.uid),n=await(async e=>{try{const t=Tc(cg,"artistData",e),n=await ju(t);return n.exists()&&n.data().gigPlaylists||[]}catch(t){return console.error("\u274c Error getting gig playlists:",t),[]}})(t.uid);console.log("\ud83d\udce6 From Firebase:",e.length,"songs,",n.length,"playlists");const r=localStorage.getItem("GigWave_songs_".concat(t.uid)),i=localStorage.getItem("GigWave_playlists_".concat(t.uid));console.log("\ud83d\udce6 From localStorage:",r?JSON.parse(r).length:0,"songs,",i?JSON.parse(i).length:0,"playlists");let s=e,a=n,o=!1;if(0===e.length&&r){const e=JSON.parse(r);e.length>0&&(console.log("\ud83d\udd04 Migrating master songs from localStorage to Firebase..."),s=e,o=!0)}if(0===n.length&&i){const e=JSON.parse(i);e.length>0&&(console.log("\ud83d\udd04 Migrating gig playlists from localStorage to Firebase..."),a=e,o=!0)}fe(s),pe(a),o&&(console.log("\ud83d\udcbe Saving migrated data to Firebase..."),s.length>0&&(await Ng(t.uid,s),console.log("\u2705 Master songs migrated:",s.length)),a.length>0&&(await Sg(t.uid,a),console.log("\u2705 Gig playlists migrated:",a.length)),alert("\u2705 Playlists migrated to cloud!\n\n".concat(s.length," songs\n").concat(a.length," playlists\n\nYour data will now sync across all devices."))),console.log("\u2705 Playlists loaded successfully"),Fe(!0)}catch(e){console.error("\u274c Error loading playlists:",e),alert("Error loading playlists: "+e.message),Fe(!0)}})()},[t]),(0,e.useEffect)(()=>{if(!t)return;console.log("\ud83d\udce1 Starting real-time playlist sync");const e=((e,t)=>Lu(Tc(cg,"artistData",e),e=>{if(e.exists()){const n=e.data();t({masterSongs:n.masterSongs||[],gigPlaylists:n.gigPlaylists||[]}),console.log("\ud83d\udce1 Playlists updated from Firebase")}},e=>{console.error("\u274c Error listening to playlists:",e)}))(t.uid,e=>{console.log("\ud83d\udd04 Playlists updated from another device"),xt(!0),fe(e.masterSongs),pe(e.gigPlaylists),setTimeout(()=>xt(!1),3e3)});return()=>{console.log("\ud83d\uded1 Stopping playlist sync"),e()}},[t]),(0,e.useEffect)(()=>{if(t){const e=localStorage.getItem("GigWave_live_".concat(t.uid));if(e){const t=JSON.parse(e),n=o(o({},t),{},{startTime:t.startTime?new Date(t.startTime):null,endTime:t.endTime?new Date(t.endTime):null,voteTimestamps:void 0,comments:(t.comments||[]).map(e=>o(o({},e),{},{timestamp:e.timestamp?new Date(e.timestamp):null})),donations:(t.donations||[]).map(e=>o(o({},e),{},{timestamp:e.timestamp?new Date(e.timestamp):null}))});et(n),X("live"),console.log("\ud83d\udd34 Resumed live gig from localStorage (cleaned)")}}},[t]),(0,e.useEffect)(()=>{if(t){const e=localStorage.getItem("GigWave_interested_".concat(t.uid));e&&(gt(JSON.parse(e)),console.log("\u2705 Loaded interested gigs from localStorage"))}},[t]),(0,e.useEffect)(()=>{console.log("\ud83d\udd0d CHECKING AUDIENCE MODE CONDITIONS:"),console.log("   - mode:",J),console.log("   - liveGig exists:",!!Ze),console.log("   - liveGig.artistId:",null===Ze||void 0===Ze?void 0:Ze.artistId),console.log("   - Condition met?","audience"===J&&(null===Ze||void 0===Ze?void 0:Ze.artistId)),"audience"===J&&null!==Ze&&void 0!==Ze&&Ze.artistId?(console.log("\ud83c\udfb8 Loading artist profile for audience mode:",Ze.artistId),xg(Ze.artistId).then(e=>{e?(console.log("\u2705 Artist profile loaded for audience:",e),$t(e)):console.log("\u26a0\ufe0f No profile found for artist")}).catch(e=>{console.error("\u274c Error loading artist profile:",e)})):console.log("\u274c NOT loading artist profile - conditions not met")},[J,null===Ze||void 0===Ze?void 0:Ze.artistId]),(0,e.useEffect)(()=>{t&&localStorage.setItem("GigWave_interested_".concat(t.uid),JSON.stringify(ft))},[ft,t]),(0,e.useEffect)(()=>{if("audience"!==J||null===Ze||void 0===Ze||!Ze.id)return;console.log("\ud83d\udd04 Starting audience auto-refresh (every 5 seconds)");const e=setInterval(async()=>{console.log("\ud83d\udd04 Auto-refreshing audience data...");try{const e=Tc(cg,"liveGigs",String(Ze.id)),t=await ju(e);if(t.exists()){const e=t.data();console.log("\u2705 Audience data refreshed"),nt({votes:e.votes||{},comments:e.comments||[],donations:e.donations||[],queuedSongs:e.queuedSongs||[],masterPlaylist:e.masterPlaylist||[],currentSong:e.currentSong||null,playedSongs:e.playedSongs||[],scheduledEndTime:e.scheduledEndTime||null,songRequests:e.songRequests||[],requestsEnabled:!1!==e.requestsEnabled,jukeboxMode:e.jukeboxMode||!1,jukeboxPrice:e.jukeboxPrice||0,maxQueueSize:e.maxQueueSize||20})}}catch(e){console.error("\u274c Error refreshing audience data:",e)}},5e3);return()=>{console.log("\u23f9\ufe0f Stopping audience auto-refresh"),clearInterval(e)}},[J,null===Ze||void 0===Ze?void 0:Ze.id]),(0,e.useEffect)(()=>{if("audience"!==J||null===Ze||void 0===Ze||!Ze.id||!t)return;console.log("\ud83d\udc93 Starting audience heartbeat...");const e=async()=>{try{const e=Tc(cg,"liveGigs",String(Ze.id)),n=await ju(e);if(!n.exists())return;const r=n.data().audienceTracking||{totalJoins:0,currentlyActive:0,joinedUsers:{}},i=t.uid;if(r.joinedUsers[i]){r.joinedUsers[i].lastActive=(new Date).toISOString(),r.joinedUsers[i].isActive=!0;const t=new Date;let n=0;Object.entries(r.joinedUsers).forEach(e=>{let[i,s]=e;const a=new Date(s.lastActive);(t-a)/1e3<=60?(n++,r.joinedUsers[i].isActive=!0):r.joinedUsers[i].isActive=!1}),r.currentlyActive=n,await Ru(e,{audienceTracking:r}),console.log("\ud83d\udc93 Heartbeat sent - Active:",n)}}catch(e){console.error("\u274c Heartbeat error:",e)}};e();const n=setInterval(e,3e4);return()=>{console.log("\ud83d\udc94 Stopping heartbeat"),clearInterval(n);(async()=>{try{const e=Tc(cg,"liveGigs",String(Ze.id)),n=await ju(e);if(!n.exists())return;const r=n.data().audienceTracking||{joinedUsers:{}};r.joinedUsers[t.uid]&&(r.joinedUsers[t.uid].isActive=!1,r.currentlyActive=Object.values(r.joinedUsers).filter(e=>e.isActive).length,await Ru(e,{audienceTracking:r}),console.log("\ud83d\udc4b Marked as inactive"))}catch(e){console.error("\u274c Error marking inactive:",e)}})()}},[J,null===Ze||void 0===Ze?void 0:Ze.id,t]),(0,e.useEffect)(()=>{if(!t||!Me)return;if(document.hidden)return;if(bt)return;const e=setTimeout(()=>{he.length>=0&&(console.log("\ud83d\udcbe Master songs saved to Firebase:",he.length,"songs"),Ng(t.uid,he).then(()=>console.log("\u2705 Master playlist saved to Firebase:",he.length,"songs")).catch(e=>console.error("\u274c Error saving songs:",e)))},2e3);return()=>clearTimeout(e)},[he,t,Me,bt]),(0,e.useEffect)(()=>{if(!t||!Me)return;if(document.hidden)return;if(bt)return;const e=setTimeout(()=>{ge.length>=0&&(console.log("\ud83d\udcbe Playlists saved to Firebase:",ge.length,"playlists"),Sg(t.uid,ge).then(()=>console.log("\u2705 Gig playlists saved to Firebase:",ge.length,"playlists")).catch(e=>console.error("\u274c Error saving playlists:",e)))},2e3);return()=>clearTimeout(e)},[ge,t,Me,bt]),(0,e.useEffect)(()=>{t&&me.length>=0&&(localStorage.setItem("GigWave_gigs_".concat(t.uid),JSON.stringify(me)),console.log("\ud83d\udcbe Gigs saved:",me.length))},[me,t]),(0,e.useEffect)(()=>{"gigs"===$&&t&&(async e=>{try{console.log("\ud83d\udd0d Checking for expired gigs...");const t=new Date,n=[],r=gu(_c(cg,"gigs"),mu("artistId","==",e),mu("status","in",["upcoming","confirmed"])),i=await Pu(r);for(const e of i.docs){const r=o({id:e.id},e.data());if(r.date&&r.time){const e=new Date("".concat(r.date,"T").concat(r.time));if(t>new Date(e.getTime()+18e6)){console.log("\u23f0 Auto-cancelling expired gig: ".concat(r.venueName));const e=Tc(cg,"gigs",r.id);await Ru(e,{status:"cancelled",cancelReason:"Auto-cancelled: Not started within 5 hours of scheduled time",cancelledAt:t}),n.push(r.venueName)}}}return n.length>0?(console.log("\u2705 Auto-cancelled ".concat(n.length," expired gig(s):"),n),n):(console.log("\u2705 No expired gigs found"),[])}catch(t){return console.error("\u274c Error checking expired gigs:",t),[]}})(t.uid).then(e=>{e.length>0&&console.log("\u2705 Expired gigs cancelled:",e)}).catch(e=>console.error("Error checking expired gigs:",e))},[$,t]),(0,e.useEffect)(()=>{if(!t)return;console.log("\ud83d\udd04 Starting live gig polling for:",t.email);const e=async()=>{if("live"!==J)try{console.log("\ud83d\udd0d Polling Firebase for live gigs...");const e=gu(_c(cg,"liveGigs"),mu("artistId","==",t.uid),mu("status","==","live")),n=await Pu(e);if(console.log("\ud83d\udcca Poll result:",n.size,"live gigs found"),n.empty){console.log("\u2705 No live gigs found");localStorage.getItem("GigWave_lastLiveAlert")?(console.log("\ud83d\udd13 UNLOCKING - no live gig in Firebase"),et(null),X("artist"),localStorage.removeItem("GigWave_live_".concat(t.uid)),localStorage.removeItem("GigWave_lastLiveAlert"),localStorage.setItem("GigWave_mode","artist"),alert("\u2705 Live gig ended. Returning to artist dashboard.")):console.log("\u2705 Already in artist mode")}else{const e=n.docs[0],r=o({id:e.id},e.data());console.log("\ud83d\udd34 ACTIVE LIVE GIG DETECTED:",r.venueName);const i="".concat(r.id,"_").concat(r.venueName);localStorage.getItem("GigWave_lastLiveAlert")!==i?(console.log("\ud83d\udd12 LOCKING INTO LIVE MODE (first time for this gig)"),et(r),X("live"),localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(r)),localStorage.setItem("GigWave_mode","live"),localStorage.setItem("GigWave_lastLiveAlert",i),alert("\ud83d\udd34 LIVE GIG DETECTED\n\n".concat(r.venueName,"\n\nYou are now locked in live mode."))):(null===Ze||void 0===Ze?void 0:Ze.id)!==r.id?(console.log("\ud83d\udd04 Updating to different live gig"),et(r),localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(r))):console.log("\u2705 Already locked in live mode")}}catch(e){console.error("\u274c Error polling for live gigs:",e)}else console.log("\u23f8\ufe0f Already in live mode - skipping poll")};e();const n=setInterval(e,5e3);return()=>{console.log("\ud83d\uded1 Stopping live gig polling"),clearInterval(n)}},[t]);const dn=async e=>{try{"google"===e?await(async()=>{try{const e=new Ch;return(await Nf(ug,e)).user}catch(e){throw console.error("Google sign-in error:",e),e}})():"facebook"===e?await(async()=>{try{const e=new Ih;return(await Nf(ug,e)).user}catch(e){throw console.error("Facebook sign-in error:",e),e}})():"apple"===e&&await(async()=>{try{console.log("\ud83c\udf4e Initiating Apple Sign-In...");const e=new Th("apple.com");e.addScope("email"),e.addScope("name");const t=await Nf(ug,e);return console.log("\u2705 Apple Sign-In successful"),console.log("\ud83d\udc64 User:",t.user.email),t.user}catch(e){throw console.error("\u274c Apple Sign-In error:",e),e}})(),O(!1)}catch(t){console.error("Sign-in error:",t),"auth/popup-closed-by-user"===t.code?alert("\u274c Sign-in cancelled. Please try again."):"auth/popup-blocked"===t.code?alert("\u274c Popup was blocked by your browser.\n\nPlease allow popups for this site and try again."):"auth/cancelled-popup-request"===t.code?console.log("User cancelled sign-in"):"auth/network-request-failed"===t.code?alert("\u274c Network error. Please check your internet connection."):alert("\u274c Sign-in failed: "+(t.message||"Unknown error"))}};(0,e.useEffect)(()=>{if(!t)return void console.log("\u274c No user - skipping gigs sync");console.log("\ud83d\udd04 Setting up real-time gigs listener for:",t.email),console.log("\ud83d\udcf1 Current mode:",J),console.log("\ud83d\udc64 User ID:",t.uid);const e=Lu(gu(_c(cg,"liveGigs"),mu("artistId","==",t.uid)),{includeMetadataChanges:!1},e=>{console.log("\ud83d\udcca Real-time update received from Firebase"),console.log("\ud83d\udcf1 Device:",navigator.userAgent.substring(0,50));const n=e.docs.map(e=>o({id:e.id},e.data()));if(n.sort((e,t)=>e.gigDate!==t.gigDate?(t.gigDate||"").localeCompare(e.gigDate||""):(t.gigTime||"").localeCompare(e.gigTime||"")),console.log("\ud83d\udce6 Total gigs loaded:",n.length),n.forEach((e,t)=>{console.log("  ".concat(t+1,". ").concat(e.venueName," - ").concat(e.gigDate," at ").concat(e.gigTime," (Status: ").concat(e.status,")"))}),ve(n),t){const e={lastSync:(new Date).toISOString(),count:n.length,gigs:n};localStorage.setItem("GigWave_gigs_".concat(t.uid),JSON.stringify(e)),console.log("\ud83d\udcbe Cached to localStorage")}console.log("\u2705 Gigs state updated successfully")},e=>{console.error("\u274c Firebase listener error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),"permission-denied"===e.code?alert("Session expired. Please sign in again."):"failed-precondition"===e.code&&console.error("Index not created. Check Firebase console.")});return()=>{console.log("\ud83d\uded1 Cleaning up gigs listener"),e()}},[t]),(0,e.useEffect)(()=>{if("audience"!==J||!t||!Ze)return;(async()=>{try{const e=Tc(cg,"liveGigs",String(Ze.id)),n=await ju(e);if(n.exists()){const e=(n.data().ratings||[]).find(e=>e.userId===t.uid);e?(Re(!0),Le(e.artistRating),console.log("\u2705 User has already rated:",e.artistRating)):(Re(!1),Le(0))}}catch(e){console.error("Error checking rating:",e)}})()},[J,t,Ze]),(0,e.useEffect)(()=>{r||(t?bg(t.uid).then(e=>{if(e)return console.log("\ud83d\udd12 ACTIVE LIVE GIG - Locking into live mode:",e.venueName),et(e),X("live"),localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(e)),void localStorage.setItem("GigWave_mode","live");const n=localStorage.getItem("GigWave_live_".concat(t.uid));if(n)try{const e=JSON.parse(n);et(e),e.artistId===t.uid?X("live"):X("audience")}catch(r){console.error("Error parsing saved live gig:",r),localStorage.removeItem("GigWave_live_".concat(t.uid))}else{const e=localStorage.getItem("GigWave_mode");X("artist"===e?"artist":"discover")}}).catch(e=>{console.error("\u274c Error checking active live gig:",e);const n=localStorage.getItem("GigWave_live_".concat(t.uid));if(n)try{const e=JSON.parse(n);et(e),X(e.artistId===t.uid?"live":"audience")}catch(r){localStorage.removeItem("GigWave_live_".concat(t.uid))}}):X("discover"))},[r,t]);const hn=async()=>{try{se(!0);let t=ee;if(!t)try{t=await hg(),te(t)}catch(e){return se(!1),void(1===e.code?alert('\ud83d\udccd Location Access Required\n\nPlease enable location access to find nearby gigs:\n\n1. Click the location icon \ud83d\udd12 in your browser address bar\n2. Change "Location" to "Allow"\n3. Refresh the page and try again'):2===e.code?alert("\ud83d\udccd Location Unavailable\n\nCould not determine your location.\n\nPlease check that location services are enabled on your device."):3===e.code?alert("\ud83d\udccd Location request timed out. Please try again."):alert("\ud83d\udccd Could not get your location. Please enable location services and try again."))}const n=await fg(t,50),r=n.filter(e=>{const t=un(e);return["live","checkVenue","upcoming"].includes(t)});re(n),de(n),0===r.length?alert("No active gigs found within 50km. Try again later!"):alert("\u2705 Found ".concat(r.length," active gig").concat(r.length>1?"s":""," nearby!"))}catch(t){console.error("Error searching gigs:",t),alert("Error finding gigs: "+t.message)}finally{se(!1)}},fn=async(e,t)=>{try{const n=gu(_c(cg,"liveGigs"),mu("artistId","==",e)),r=await Pu(n);for(const e of r.docs){const n=e.data();if(n.ratings&&Array.isArray(n.ratings)){if(n.ratings.some(e=>e.userId===t))return!0}}return!1}catch(n){return console.error("Error checking if user rated artist:",n),!1}},gn=async e=>{console.log("\ud83c\udfb5 JOIN LIVE CLICKED"),console.log("\ud83d\udc64 Current User:",(null===t||void 0===t?void 0:t.email)||"NOT LOGGED IN"),console.log("\ud83c\udfb8 Gig:",e.venueName);try{if(!t)return console.log("\u274c No user - showing auth modal"),alert("\ud83d\udd10 Please sign in to join this live gig!"),void O(!0);console.log("\u2705 User authenticated, getting location...");let a=ee;if(!a){console.log("\ud83d\udccd Requesting location permission..."),alert("\ud83d\udccd Getting your location...\n\nPlease allow location access when prompted.");try{a=await hg(),te(a),console.log("\u2705 Location obtained:",a)}catch(r){return console.error("\u274c Location error:",r),void alert("\u274c Could not get your location.\n\nPlease enable location services in your browser settings.\n\nError: "+r.message)}}if(console.log("\ud83d\udccd User location:",a),!e.location||!e.location.latitude||!e.location.longitude)return console.error("\u274c Gig missing location data"),void alert("\u26a0\ufe0f This gig does not have a valid location.\n\nPlease contact the artist.");const o={lat:e.location.latitude,lng:e.location.longitude};console.log("\ud83d\udccd Venue location:",o);const l=dg(a,o),c=1e3;if(console.log("\ud83d\udccf Distance calculated:",l,"meters"),console.log("\ud83d\udccf Max allowed distance:",c,"meters"),l>c){const t=(l/1e3).toFixed(1);return console.log("\u274c Too far away:",t,"km"),void alert("\u26a0\ufe0f You're too far away!\n\nYou must be within 1km of the venue to join.\n\nYou are currently ".concat(t,"km away from ").concat(e.venueName,".\n\n\ud83d\udccd Venue: ").concat(e.venueAddress||e.venueName))}if(console.log("\u2705 Within range! Distance:",(l/1e3).toFixed(2),"km"),console.log("\ud83c\udf89 Joining gig..."),et(e),X("audience"),t){localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(e)),console.log("\ud83d\udcbe Saved to localStorage");try{const n=await(async(e,t)=>{try{const n=gu(_c(cg,"liveGigs",String(e),"userVotes"),mu("userId","==",t)),r=await Pu(n),i={};return r.forEach(e=>{const t=e.data().songId;i[t]=!0}),console.log("\ud83d\udcca Loaded votes for user:",i),i}catch(n){return console.error("Error loading user votes:",n),{}}})(e.id,t.uid);Qt(n),console.log("\u2705 Loaded user votes:",n)}catch(i){console.error("\u274c Error loading user votes:",i)}}try{const n=await fn(e.artistId,t.uid);Re(n),console.log("\u2705 User has rated artist:",n)}catch(i){console.error("\u274c Error checking artist rating:",i)}try{const r=Tc(cg,"liveGigs",String(e.id)),i=await ju(r);if(i.exists()){var n;const e=i.data().audienceTracking||{totalJoins:0,currentlyActive:0,joinedUsers:{}},s=t.uid,a=!e.joinedUsers[s];e.joinedUsers[s]={firstJoin:(null===(n=e.joinedUsers[s])||void 0===n?void 0:n.firstJoin)||(new Date).toISOString(),lastActive:(new Date).toISOString(),isActive:!0,userName:t.displayName||"Anonymous"},a&&(e.totalJoins=(e.totalJoins||0)+1),e.currentlyActive=Object.values(e.joinedUsers).filter(e=>e.isActive).length,await Ru(r,{audienceTracking:e}),console.log("\u2705 Audience tracking updated:",{total:e.totalJoins,active:e.currentlyActive,isFirstJoin:a})}}catch(s){console.error("\u274c Error tracking audience join:",s)}console.log("\u2705 Successfully joined gig!"),alert("\u2705 Joined ".concat(e.artistName,"'s live gig at ").concat(e.venueName,"!"))}catch(i){console.error("\u274c ERROR in handleJoinGig:",i),alert("\u274c Error joining gig: "+i.message)}},pn=()=>{const e=prompt("Song title:");if(!e)return;const t=prompt("Artist name:"),n={id:Date.now(),title:e||"Untitled",artist:t||"Unknown",duration:"",key:""};fe([...he,n])},mn=async()=>{if(Te.trim())try{Pe(!0),console.log("\ud83d\udd0d Searching iTunes for:",Te);const e=await fetch("https://itunes.apple.com/search?term=".concat(encodeURIComponent(Te),"&entity=song&limit=20"));if(!e.ok)throw new Error("iTunes search failed");const t=await e.json();if(console.log("\ud83d\udce6 iTunes results:",t.resultCount),0===t.resultCount)return alert("No songs found. Try a different search term!"),void je([]);const n=t.results.map((e,t)=>({id:Date.now()+t,title:e.trackName,artist:e.artistName,album:e.collectionName,duration:e.trackTimeMillis?"".concat(Math.floor(e.trackTimeMillis/6e4),":").concat(String(Math.floor(e.trackTimeMillis%6e4/1e3)).padStart(2,"0")):"",artwork:e.artworkUrl100,previewUrl:e.previewUrl,itunesId:e.trackId}));je(n),console.log("\u2705 Processed songs:",n.length)}catch(e){console.error("\u274c iTunes search error:",e),alert("Error searching iTunes: "+e.message)}finally{Pe(!1)}else alert("Please enter a song or artist name!")},vn=()=>{const e={id:Date.now(),name:"New Playlist",description:"",songs:[],createdAt:new Date};_e(e),ke(!0)},yn=()=>{if(!Ee.name.trim())return void alert("Please enter a playlist name!");const e=ge.find(e=>e.id===Ee.id);pe(e?ge.map(e=>e.id===Ee.id?Ee:e):[...ge,Ee]),ke(!1),_e(null)},bn=async()=>{try{$e(!0);const t=await hg();try{const e=await fetch("https://nominatim.openstreetmap.org/reverse?lat=".concat(t.lat,"&lon=").concat(t.lng,"&format=json")),n=(await e.json()).display_name||"";Ne(o(o({},we),{},{location:t,address:n})),alert("\u2705 Location captured!\n".concat(t.lat.toFixed(4),"\xb0, ").concat(t.lng.toFixed(4),"\xb0"))}catch(e){Ne(o(o({},we),{},{location:t})),alert("\u2705 Location captured!\n".concat(t.lat.toFixed(4),"\xb0, ").concat(t.lng.toFixed(4),"\xb0"))}}catch(t){alert("Error capturing location: "+t.message)}finally{$e(!1)}},xn=()=>{Ne({id:Date.now(),venueName:"",address:"",location:null,date:"",time:"",playlistId:null,queueSize:20,status:"upcoming"}),xe(!0)},wn=async()=>{if(vt)return;if(console.log("\ud83d\udd25 SAVE GIG CLICKED!"),console.log("\ud83d\udcdd editingGig state:",we),console.log("\ud83c\udfe0 venueName:",we.venueName),console.log("\ud83d\udcc5 date:",we.date),console.log("\u23f0 time:",we.time),console.log("\ud83d\udccd location:",we.location),console.log("\ud83c\udfe2 address:",we.address),!we.venueName||!we.date||!we.time)return void alert("Please fill in venue name, date, and time!");const e=we.queueSize||20;if(e<20||e>50)alert("\u26a0\ufe0f Queue size must be between 20 and 50 songs!");else{yt(!0);try{let e=we.location;if(!e){if(!window.confirm("No venue location set. Use your current location?"))return void alert("Please set a venue location to save the gig!");e=await hg()}const n=new Date("".concat(we.date,"T").concat(we.time)),r=216e5,i=me.some(e=>{if(e.id===we.id)return!1;const t=new Date("".concat(e.date,"T").concat(e.time));return Math.abs(n-t)<r});if(i)return void alert("\u26a0\ufe0f You already have a gig scheduled within 6 hours of this time!\n\nPlease choose a different date or time.");let s=[],a=he;if(we.playlistId){const e=ge.find(e=>e.id===we.playlistId);s=e&&e.songs.length>0?e.songs.map(e=>he.find(t=>t.id===e)).filter(Boolean):he}else s=he;const l={artistId:t.uid,artistName:t.displayName||"Artist",artistProfile:Xt,venueName:we.venueName,venueAddress:we.address||"",location:e,status:"upcoming",gigDate:we.date,gigTime:we.time,playlistId:we.playlistId||null,queueSize:we.queueSize||20,queuedSongs:s.slice(0,we.queueSize||20),masterPlaylist:a,notes:we.notes||""};let c,u=!1;if(me.find(e=>e.id===we.id)&&"string"===typeof we.id&&we.id.length>10){console.log("\ud83d\udcdd Updating existing gig:",we.id),u=!0,c=we.id;const e=Tc(cg,"liveGigs",c);await Ru(e,l)}else console.log("\ud83c\udd95 Creating new gig"),c=await pg(l,t.uid);const d=o(o({},we),{},{id:c,location:e,status:"upcoming",gigDate:we.date,gigTime:we.time,date:we.date,time:we.time});if(u){const e=me.map(e=>e.id===we.id?d:e);e.sort((e,t)=>{const n=e.gigDate||e.date||"",r=t.gigDate||t.date||"";if(n!==r)return r.localeCompare(n);const i=e.gigTime||e.time||"";return(t.gigTime||t.time||"").localeCompare(i)}),ve(e),console.log("\u2705 Gig updated in local state")}else{const e=[...me,d];e.sort((e,t)=>{const n=e.gigDate||e.date||"",r=t.gigDate||t.date||"";if(n!==r)return r.localeCompare(n);const i=e.gigTime||e.time||"";return(t.gigTime||t.time||"").localeCompare(i)}),ve(e),console.log("\u2705 New gig added to local state")}xe(!1),Ne(null),alert("\u2705 Gig saved successfully!")}catch(n){console.error("Error saving gig:",n),alert("Error saving gig: "+n.message)}finally{yt(!1)}}},Nn=async e=>{if(window.confirm("Delete this gig permanently?"))try{const t=String(e),n=Tc(cg,"liveGigs",t);await Ou(n),ve(t=>t.filter(t=>t.id!==e)),we&&we.id===e&&(Ne(null),xe(!1)),alert("\u2705 Gig deleted successfully!")}catch(t){console.error("Error deleting gig:",t),alert("\u274c Error deleting gig: "+t.message)}},Sn=async e=>{if(Ze)return alert("\u26a0\ufe0f You are already live! End your current gig first."),void X("live");if("ended"===e.status)return void alert("\u274c This gig has ended! You cannot go live with an ended gig.");const n=await bg(t.uid);if(n&&n.id!==e.id){if(!window.confirm('\u26a0\ufe0f You already have a live gig at "'.concat(n.venueName,'".\n\n')+"You can only have one live gig at a time.\n\nWould you like to end that gig and start this one?"))return;try{await mg(n.id),et(null)}catch(r){return void alert("Error ending previous gig: "+r.message)}}try{if(Ze&&Ze.gigId===e.id)return alert("\u26a0\ufe0f You are already live with this gig!"),void X("live");let n=e.location;if(!n){if(!window.confirm("No venue location set. Use your current location?"))return void alert("Please set a venue location first!");n=await hg()}const i=e.queueSize||20;let s=[];if(e.playlistId){const t=ge.find(t=>t.id===e.playlistId);t&&t.songs.length>0&&(s=t.songs.map(e=>he.find(t=>t.id===e)).filter(Boolean),console.log("\ud83d\udccb Loaded gig playlist:",s.length,"songs"))}if(0===s.length&&(s=[...he],console.log("\ud83d\udccb Using master playlist:",s.length,"songs")),s.length<i){const e=s.map(e=>e.id),t=i-s.length,n=he.filter(t=>!e.includes(t.id)).slice(0,t);s=[...s,...n],console.log("\u2705 Added",n.length,"songs from master playlist"),console.log("\u2705 Total queue size:",s.length)}s=s.slice(0,i),console.log("\ud83c\udfb5 Final queue:",s.length,"songs (limit:",i,")");const a="".concat(e.venueName,"_").concat(e.date,"_").concat(e.time).replace(/\s/g,"_"),l={artistId:t.uid,artistName:t.displayName||"Artist",artistProfile:Xt,venueName:e.venueName,venueAddress:e.address||"",location:n,queuedSongs:s,maxQueueSize:i,masterPlaylist:he,status:"live",gigDate:e.date,gigTime:e.time,gigId:e.id,uniqueKey:a};let c;e.id&&"string"===typeof e.id&&e.id.length>10?(console.log("\ud83d\udcdd Updating existing gig to live:",e.id),c=await(async(e,t,n)=>{try{console.log("\ud83d\udd04 Updating gig to live:",e);const r=Tc(cg,"liveGigs",e),i=await ju(r);if(!i.exists())throw new Error("Gig not found");const s=i.data(),a=Date.now();let o;if(s.gigDate&&s.gigTime){const e=new Date("".concat(s.gigDate,"T").concat(s.gigTime)).getTime();o=e+18e6,console.log("\u2705 Using original scheduled times:"),console.log("   Scheduled start:",new Date(e).toISOString()),console.log("   Scheduled end:",new Date(o).toISOString()),console.log("   Actual start (now):",new Date(a).toISOString());const t=(e-a)/6e4;t>0?console.log("\ud83d\udfe1 Starting ".concat(Math.round(t)," minutes EARLY")):console.log("\ud83d\udfe2 Starting ".concat(Math.abs(Math.round(t))," minutes LATE"))}else console.log("\u26a0\ufe0f No scheduled time found, using NOW + 5 hours"),o=a+18e6;return await Ru(r,{status:"live",actualStartTimeMs:a,scheduledEndTimeMs:o,actualStartTime:new Date(a),startTime:new Date(a),scheduledEndTime:new Date(o),queuedSongs:t,masterPlaylist:n,votes:{},voteTimestamps:{},comments:[],donations:[],playedSongs:[]}),console.log("\u2705 Gig updated to live"),console.log("\u23f0 Will auto-end at:",new Date(o).toISOString()),e}catch(r){throw console.error("\u274c Error updating gig:",r),r}})(e.id,s,he)):(console.log("\ud83c\udd95 Creating new live gig"),c=await pg(l,t.uid)),et(o(o({},l),{},{id:c})),X("live"),t&&localStorage.setItem("GigWave_live_".concat(t.uid),JSON.stringify(o(o({},l),{},{id:c}))),alert("\u2705 You're live at ".concat(e.venueName,"!\n\nAudience can find you by searching nearby!"))}catch(r){alert("Error: "+r.message)}},kn=async()=>{try{await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;try{console.log("\u23f0 Extending gig time by ".concat(t," minutes..."));const i=Tc(cg,"liveGigs",e),s=await ju(i);if(!s.exists())throw new Error("Gig not found");const a=s.data();let o;if(a.scheduledEndTimeMs)o=a.scheduledEndTimeMs+60*t*1e3;else if(a.scheduledEndTime){var n,r;o=((null===(n=a.scheduledEndTime)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date(a.scheduledEndTime)).getTime()+60*t*1e3}else o=Date.now()+60*t*1e3;return console.log("\u23f0 New end time (ms):",o,"\u2192",new Date(o).toISOString()),await Ru(i,{scheduledEndTimeMs:o,scheduledEndTime:new Date(o)}),console.log("\u2705 Gig time extended by ".concat(t," minutes")),console.log("\u23f0 New end time:",new Date(o).toISOString()),o}catch(i){throw console.error("\u274c Error extending gig time:",i),i}}(Ze.id,60),at(!1),alert("\u2705 Added 1 hour to your gig!")}catch(e){alert("Error extending time: "+e.message)}},En=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(pt)console.log("\u26a0\ufe0f Already ending gig, ignoring duplicate call");else if(n||window.confirm("End this gig?")){mt(!0);try{await mg(Ze.id);const n=me.map(e=>e.id===Ze.gigId||e.venueName===Ze.venueName&&e.date===Ze.date?o(o({},e),{},{status:"ended"}):e);ve(n),t&&(localStorage.setItem("GigWave_gigs_".concat(t.uid),JSON.stringify(n)),console.log("\ud83d\udcbe Gig status updated to ended in localStorage")),et(null),X("artist"),t&&localStorage.removeItem("GigWave_live_".concat(t.uid)),alert(e||"\u2705 Gig ended! Status updated to ended.")}catch(r){alert("Error: "+r.message)}finally{mt(!1)}}},_n=async()=>{try{if(!an)return alert("\u26a0\ufe0f Please verify your email before completing your profile!\n\nCheck your inbox for the verification link."),void cn(!0);if(!rn.artistName||!rn.fullName||!rn.bio||!rn.genre||!rn.location)return void alert("\u26a0\ufe0f Please fill in all required fields!");if(rn.bio.length<50)return void alert("\u26a0\ufe0f Bio must be at least 50 characters long!");await(async(e,t)=>{try{const n=Tc(cg,"users",e,"profile","data"),r=o(o({},t),{},{updatedAt:Uu(),profileComplete:!!(t.artistName&&t.fullName&&t.bio&&t.genre&&t.location)});return(await ju(n)).exists()||(r.createdAt=Uu()),await Du(n,r,{merge:!0}),console.log("\u2705 Artist profile saved to users/{uid}/profile/data"),r}catch(n){throw console.error("\u274c Error saving profile:",n),n}})(t.uid,o(o({},rn),{},{email:t.email,emailVerified:t.emailVerified}));const e=await xg(t.uid);$t(e),en(!1),alert("\u2705 Profile saved successfully!")}catch(e){alert("Error saving profile: "+e.message)}},Tn=async()=>{try{if(console.log("\ud83d\udce7 Attempting to send verification email..."),!t)return void alert("\u274c No user logged in!");if(console.log("\ud83d\udc64 Current user:",t.email),console.log("\u2705 Email verified?",t.emailVerified),t.emailVerified)return alert("\u2705 Your email is already verified!"),on(!0),void cn(!1);const e=await(async()=>{try{const e=ug.currentUser;if(!e)throw new Error("No user logged in. Please sign in first.");return e.emailVerified?(console.log("\u2705 Email already verified"),{success:!0,message:"Email already verified"}):(await Bh(e),console.log("\ud83d\udce7 Verification email sent to:",e.email),{success:!0,message:"Verification email sent! Check your inbox."})}catch(e){if(console.error("\u274c Error sending verification:",e),"auth/too-many-requests"===e.code)throw new Error("Too many requests. Please wait a few minutes and try again.");throw new Error(e.message||"Failed to send verification email")}})();console.log("\ud83d\udce7 Send result:",e);const n="string"===typeof e?e:null!==e&&void 0!==e&&e.message&&"string"===typeof e.message?e.message:"Verification email sent! Check your inbox.";alert(n)}catch(e){console.error("\u274c Error sending verification:",e),alert("Error: "+e.message)}},In=async()=>{try{const e=await wg();on(e),e?(alert("\u2705 Email verified successfully!"),cn(!1)):alert("\u26a0\ufe0f Email not verified yet. Please check your inbox and click the verification link.")}catch(e){alert("Error: "+e.message)}},Cn=async e=>{var n;if(!t)return alert("Please sign in to vote!"),void O(!0);if(null!==(n=tt.playedSongs)&&void 0!==n&&n.includes(e))alert("\u26a0\ufe0f This song has already been played!\n\nYou can only vote for upcoming songs.");else if(Ze)try{const n=await(async(e,t,n)=>{try{const r=Tc(cg,"liveGigs",String(e),"votes","".concat(n,"_").concat(t));return(await ju(r)).exists()}catch(r){return console.error("Error checking vote:",r),!1}})(Ze.id,e,t.uid);if(n)return void alert("\u26a0\ufe0f You already voted for this song!");if(await(async(e,t,n)=>{try{const r=Tc(cg,"liveGigs",String(e),"votes","".concat(n,"_").concat(t));await Du(r,{userId:n,songId:t,gigId:String(e),timestamp:Uu()});const i=Tc(cg,"liveGigs",String(e)),s=(await ju(i)).data(),a=(null===s||void 0===s?void 0:s.votes)||{},o=(null===s||void 0===s?void 0:s.lastVoteTime)||{},l=String(t);return o[l]=(new Date).toISOString(),await Ru(i,{["votes.".concat(l)]:(a[l]||0)+1,lastVoteTime:o}),console.log("\u2705 Vote recorded with timestamp"),!0}catch(r){throw console.error("Error recording vote:",r),r}})(Ze.id,e,t.uid),Qt(t=>o(o({},t),{},{[e]:!0})),!De&&Ze){await fn(Ze.artistId,t.uid)||Rt(!0)}const r=Tc(cg,"liveGigs",String(Ze.id)),i=await ju(r);i.exists()&&nt(e=>o(o({},e),{},{votes:i.data().votes||{}}))}catch(r){console.error("Error voting:",r),alert("\u274c Error recording vote: "+r.message)}else alert("\u26a0\ufe0f No active live gig!")},jn=async()=>{var e;if(!Tt)return void alert("Please select a song first!");if(!t)return alert("Please log in to request a song"),void O(!0);if((tt.songRequests||[]).some(e=>e.requesterId===t.uid&&"pending"===e.status))return void alert("\u26a0\ufe0f You already have a pending request!\n\nPlease wait for the artist to accept or reject your current request before submitting another one.\n\n\ud83d\udca1 Tip: You can vote for songs while you wait!");if((tt.songRequests||[]).some(e=>e.requesterId===t.uid&&e.songId===Tt.id&&"rejected"===e.status))alert("\u26a0\ufe0f This song was already rejected by the artist!\n\n"+'"'.concat(Tt.title,'" cannot be requested again for this gig.\n\n')+"\ud83d\udca1 Tip: Try requesting a different song or vote for songs in the queue!");else if(null!==(e=tt.playedSongs)&&void 0!==e&&e.includes(Tt.id))alert("\u26a0\ufe0f This song has already been played!\n\nYou can only request upcoming songs.");else if(Ct.length>200)alert("Message must be 200 characters or less");else try{await(async(e,t,n,r,i,s,a)=>{try{const o=Tc(cg,"liveGigs",String(e)),l={id:"request_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),songId:t.id,songTitle:t.title,songArtist:t.artist,requesterId:n,requesterName:r,message:i||"",amount:s||0,isPaid:a||!1,status:"pending",timestamp:(new Date).toISOString(),createdAt:new Date},c=await ju(o);if(!c.exists())throw new Error("Gig not found");const u=[...c.data().songRequests||[],l];return await Ru(o,{songRequests:u}),console.log("\u2705 Song request submitted:",l),l}catch(o){throw console.error("\u274c Error submitting song request:",o),o}})(Ze.id,Tt,t.uid,t.displayName||"Anonymous",Ct,0,!1),alert("\u2705 Song requested!\n\n"+'"'.concat(Tt.title,'" by ').concat(Tt.artist,"\n\n")+"The artist will review your request.\n\n\ud83d\udca1 Tip: If the queue is full, the artist can still accept your request by removing a lower-priority song."),_t(!1),It(null),jt(""),De||Rt(!0)}catch(n){console.error("Error submitting song request:",n),alert("\u274c Error: "+n.message)}},An=async()=>{if(t&&Ze&&0!==Ot)try{const e=Tc(cg,"liveGigs",String(Ze.id)),n=await ju(e);if(n.exists()){const r=n.data().ratings||[],i=r.findIndex(e=>e.userId===t.uid),s={userId:t.uid,userName:t.displayName||"Anonymous",gigId:Ze.id,artistRating:Ot,timestamp:(new Date).toISOString()};let a;i>=0?(a=[...r],a[i]=s,console.log("\u2705 Updated existing rating")):(a=[...r,s],console.log("\u2705 Added new rating")),await Ru(e,{ratings:a}),Re(!0),Le(Ot),alert(i>=0?"\u2705 Rating updated!":"\u2705 Thanks for rating the artist!"),Rt(!1),Lt(0)}}catch(e){console.error("Error submitting rating:",e),alert("\u274c Failed to submit rating")}},Pn=()=>{Rt(!1),Lt(0),Re(!0)},Dn=e=>{if(!le.trim())return e;const t=le.toLowerCase().trim();return e.filter(e=>{const n=(e.venueName||"").toLowerCase(),r=(e.artistName||"").toLowerCase(),i=(e.venueAddress||"").toLowerCase();return n.includes(t)||r.includes(t)||i.includes(t)})};if(r)return(0,p.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 flex items-center justify-center",children:(0,p.jsx)("div",{className:"text-center text-white",children:(0,p.jsx)("h1",{className:"text-4xl font-bold",children:"Loading GigWave..."})})});const Rn=async(e,n)=>{if(!t)return alert("\ud83d\udd10 Please sign in to view artist details and gigs"),void O(!0);try{const t=await xg(e);if(!t)return void alert("\u274c Artist profile not found");Vt(t),Ft(e);const n=gu(_c(cg,"liveGigs"),mu("artistId","==",e),mu("status","in",["upcoming","live"]),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=uu("orderBy",e);return yu._create(n,t)}("gigDate","asc"),(bc("limit",r=10),bu._create("limit",r,"F"))),i=(await Pu(n)).docs.map(e=>o({id:e.id},e.data()));qt(i),Qe(!1),X("artistProfile")}catch(i){console.error("Error loading artist profile:",i),alert("\u274c Error loading profile")}var r},On=()=>{Ft(null),Vt(null),qt([]),Qe(!1),X("discover")};if(R){const e=async()=>{if(B(""),F&&V)if(V.length<6)B("Password must be at least 6 characters");else try{"signup"===L?(console.log("\ud83d\udcdd Attempting sign-up..."),await yg(F,V),alert("\u2705 Account created successfully!\n\nPlease check your email to verify your account.")):(console.log("\ud83d\udd10 Attempting sign-in..."),await vg(F,V),alert("\u2705 Signed in successfully!")),O(!1)}catch(e){console.error("\u274c Auth error:",e);let t="";switch(e.code){case"auth/email-already-in-use":t="\u274c This email is already registered!\n\nPlease sign in instead, or use a different email.",M("signin");break;case"auth/invalid-email":t="\u274c Invalid email address format";break;case"auth/weak-password":t="\u274c Password is too weak. Use at least 6 characters.";break;case"auth/user-not-found":t="\u274c No account found with this email.\n\nPlease sign up first!",M("signup");break;case"auth/wrong-password":t="\u274c Incorrect password. Please try again.";break;case"auth/too-many-requests":t="\u274c Too many failed attempts.\n\nPlease try again later or reset your password.";break;case"auth/network-request-failed":t="\u274c Network error. Please check your internet connection.";break;default:t=e.message||"Authentication failed"}B(t),alert(t)}else B("Please enter both email and password")};return(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"rock-background gig-card border-2 border-electric max-w-md w-full",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,p.jsx)("h2",{className:"concert-heading text-3xl text-electric",children:"signup"===L?"\ud83c\udfb8 JOIN US":"\ud83c\udfa4 SIGN IN"}),(0,p.jsx)("button",{onClick:()=>O(!1),className:"text-white hover:text-red-400 p-2 touch-target",children:(0,p.jsx)(x,{size:32})})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,p.jsx)("button",{onClick:()=>M("signin"),className:"btn ".concat("signin"===L?"btn-electric":"btn-ghost"),children:"Sign In"}),(0,p.jsx)("button",{onClick:()=>M("signup"),className:"btn ".concat("signup"===L?"btn-electric":"btn-ghost"),children:"Sign Up"})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("button",{onClick:()=>dn("google"),className:"w-full px-6 py-4 bg-white hover:bg-gray-100 rounded-lg font-bold flex items-center justify-center gap-2 border-2 border-gray-400 transition-all hover:scale-[1.02]",style:{color:"#000000 !important"},children:[(0,p.jsx)("span",{style:{color:"#000000"},children:"\ud83d\udd10"}),(0,p.jsx)("span",{style:{color:"#000000",fontWeight:"bold"},children:"Continue with Google"})]}),(0,p.jsxs)("button",{onClick:()=>dn("facebook"),className:"w-full px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold flex items-center justify-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udcd8"}),(0,p.jsx)("span",{children:"Continue with Facebook"})]}),(0,p.jsxs)("div",{className:"relative my-6",children:[(0,p.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,p.jsx)("div",{className:"w-full border-t border-electric/30"})}),(0,p.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,p.jsx)("span",{className:"px-3 bg-dark text-electric font-bold uppercase tracking-wider",children:"Or use email"})})]}),q&&(0,p.jsxs)("div",{className:"bg-red-500/20 border border-red-400 rounded-lg p-4 text-red-200 text-sm",children:[(0,p.jsx)("p",{className:"font-bold mb-1",children:"\u26a0\ufe0f Error"}),(0,p.jsx)("p",{children:q})]}),(0,p.jsx)("input",{type:"email",placeholder:"Email",value:F,onChange:e=>U(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"}),(0,p.jsx)("input",{type:"password",placeholder:"Password",value:V,onChange:e=>z(e.target.value),onKeyPress:t=>"Enter"===t.key&&e(),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"}),(0,p.jsx)("button",{onClick:e,className:"btn btn-neon w-full text-lg",children:"signup"===L?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"\u26a1"}),(0,p.jsx)("span",{children:"Create Account"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"\u26a1"}),(0,p.jsx)("span",{children:"Sign In"})]})})]})]})})}if(Zt)return(0,p.jsx)("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,p.jsxs)("div",{className:"rock-background gig-card border-2 border-electric max-w-3xl w-full my-8",children:[(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsx)("h2",{className:"concert-heading text-4xl text-electric mb-2",children:"\ud83c\udfb8 COMPLETE YOUR ARTIST PROFILE"}),(0,p.jsx)("p",{className:"text-gray-light",children:"Fill out your profile to start creating gigs and going live!"}),(0,p.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,p.jsx)("div",{className:"flex-1 h-2 rounded-full ".concat(tn>=1?"bg-electric":"bg-white/20")}),(0,p.jsx)("div",{className:"flex-1 h-2 rounded-full ".concat(tn>=2?"bg-electric":"bg-white/20")}),(0,p.jsx)("div",{className:"flex-1 h-2 rounded-full ".concat(tn>=3?"bg-electric":"bg-white/20")})]}),(0,p.jsxs)("p",{className:"text-electric text-sm mt-2 font-bold",children:["Step ",tn," of 3"]})]}),!an&&(0,p.jsxs)("div",{className:"bg-red-500/20 border-2 border-red-400 rounded-lg p-6 mb-6",children:[(0,p.jsx)("p",{className:"text-red-300 font-bold text-lg mb-2",children:"\u26a0\ufe0f EMAIL NOT VERIFIED"}),(0,p.jsx)("p",{className:"text-white mb-4",children:"You must verify your email before completing your profile."}),(0,p.jsxs)("p",{className:"text-red-200 text-sm mb-4",children:["Check your inbox: ",(0,p.jsx)("span",{className:"font-bold",children:null===t||void 0===t?void 0:t.email})]}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)("button",{onClick:Tn,className:"flex-1 btn btn-neon text-sm",children:"\ud83d\udce7 Send Verification Email"}),(0,p.jsx)("button",{onClick:In,className:"flex-1 btn btn-electric text-sm",children:"\ud83d\udd04 Check Status"})]})]}),(0,p.jsx)("div",{className:"bg-green-500/20 border border-neon rounded-lg p-4 mb-6",children:(0,p.jsxs)("p",{className:"text-neon font-bold text-sm",children:["\ud83d\udd12 Your email (",null===t||void 0===t?void 0:t.email,") will NOT be displayed publicly and remains confidential."]})}),(0,p.jsxs)("div",{className:"space-y-6",children:[1===tn&&(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\ud83d\udcdd BASIC INFORMATION"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Artist/Band Name *"}),(0,p.jsx)("input",{type:"text",value:rn.artistName,onChange:e=>sn(o(o({},rn),{},{artistName:e.target.value})),placeholder:"e.g. The Electric Waves",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Your Full Name *"}),(0,p.jsx)("input",{type:"text",value:rn.fullName,onChange:e=>sn(o(o({},rn),{},{fullName:e.target.value})),placeholder:"e.g. John Smith",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Bio * (minimum 50 characters)"}),(0,p.jsx)("textarea",{value:rn.bio,onChange:e=>sn(o(o({},rn),{},{bio:e.target.value})),placeholder:"Tell your audience about your music, style, and story...",rows:5,className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"}),(0,p.jsxs)("p",{className:"text-sm mt-1 ".concat(rn.bio.length>=50?"text-neon":"text-gray"),children:[rn.bio.length,"/50 characters"]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Genre/Style *"}),(0,p.jsx)("input",{type:"text",value:rn.genre,onChange:e=>sn(o(o({},rn),{},{genre:e.target.value})),placeholder:"e.g. Rock, Jazz, Electronic",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm",children:"Location/City *"}),(0,p.jsx)("input",{type:"text",value:rn.location,onChange:e=>sn(o(o({},rn),{},{location:e.target.value})),placeholder:"e.g. New York, NY",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]})]}),(0,p.jsx)("button",{onClick:()=>{rn.artistName&&rn.fullName&&rn.bio&&!(rn.bio.length<50)&&rn.genre&&rn.location?nn(2):alert("\u26a0\ufe0f Please fill in all required fields!")},className:"btn btn-neon w-full text-lg",children:"Next: Social Media \u2192"})]}),2===tn&&(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\ud83d\udd17 SOCIAL MEDIA (Optional)"}),(0,p.jsx)("p",{className:"text-gray-light text-sm mb-4",children:"Add your social media links so fans can follow you!"}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udcf7"})," Instagram"]}),(0,p.jsx)("input",{type:"text",value:rn.socialMedia.instagram,onChange:e=>sn(o(o({},rn),{},{socialMedia:o(o({},rn.socialMedia),{},{instagram:e.target.value})})),placeholder:"@username or full URL",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udc4d"})," Facebook"]}),(0,p.jsx)("input",{type:"text",value:rn.socialMedia.facebook,onChange:e=>sn(o(o({},rn),{},{socialMedia:o(o({},rn.socialMedia),{},{facebook:e.target.value})})),placeholder:"Page URL",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udcbc"})," LinkedIn"]}),(0,p.jsx)("input",{type:"text",value:rn.socialMedia.linkedin||"",onChange:e=>sn(o(o({},rn),{},{socialMedia:o(o({},rn.socialMedia),{},{linkedin:e.target.value})})),placeholder:"https://linkedin.com/in/yourprofile",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"text-electric font-bold mb-2 block text-sm flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udcfa"})," YouTube"]}),(0,p.jsx)("input",{type:"text",value:rn.socialMedia.youtube,onChange:e=>sn(o(o({},rn),{},{socialMedia:o(o({},rn.socialMedia),{},{youtube:e.target.value})})),placeholder:"Channel URL",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})]}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)("button",{onClick:()=>nn(1),className:"btn btn-ghost",children:"\u2190 Back"}),(0,p.jsx)("button",{onClick:()=>nn(3),className:"flex-1 btn btn-neon text-lg",children:"Next: Review \u2192"})]})]}),3===tn&&(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("h3",{className:"concert-heading text-2xl text-magenta mb-4",children:"\u2705 REVIEW & SAVE"}),(0,p.jsxs)("div",{className:"bg-white/5 rounded-lg p-6 space-y-3",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray text-sm",children:"Artist Name"}),(0,p.jsx)("p",{className:"text-white font-bold text-lg",children:rn.artistName})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray text-sm",children:"Full Name"}),(0,p.jsx)("p",{className:"text-white font-bold",children:rn.fullName})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray text-sm",children:"Bio"}),(0,p.jsx)("p",{className:"text-white",children:rn.bio})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray text-sm",children:"Genre"}),(0,p.jsx)("p",{className:"text-electric font-bold",children:rn.genre})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray text-sm",children:"Location"}),(0,p.jsx)("p",{className:"text-electric font-bold",children:rn.location})]})]}),Object.values(rn.socialMedia).some(e=>e)&&(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray text-sm mb-2",children:"Social Media"}),(0,p.jsxs)("div",{className:"flex flex-wrap gap-2",children:[rn.socialMedia.instagram&&(0,p.jsx)("span",{className:"px-3 py-1 bg-magenta/20 text-magenta rounded-full text-sm",children:"\ud83d\udcf7 Instagram"}),rn.socialMedia.facebook&&(0,p.jsx)("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-full text-sm",children:"\ud83d\udc4d Facebook"}),rn.socialMedia.spotify&&(0,p.jsx)("span",{className:"px-3 py-1 bg-green-500/20 text-neon rounded-full text-sm",children:"\ud83c\udfb5 Spotify"}),rn.socialMedia.youtube&&(0,p.jsx)("span",{className:"px-3 py-1 bg-red-500/20 text-red-300 rounded-full text-sm",children:"\ud83d\udcfa YouTube"})]})]})]}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)("button",{onClick:()=>nn(2),className:"btn btn-ghost",children:"\u2190 Back"}),(0,p.jsxs)("button",{onClick:_n,className:"flex-1 btn btn-neon text-lg",children:[(0,p.jsx)(w,{size:20}),(0,p.jsx)("span",{children:"Save Profile & Continue"})]})]})]})]})]})});if(ln)return(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"rock-background gig-card border-2 border-orange max-w-md w-full",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,p.jsx)("h2",{className:"concert-heading text-3xl text-orange",children:"\ud83d\udce7 VERIFY EMAIL"}),(0,p.jsx)("button",{onClick:()=>cn(!1),className:"text-white hover:text-red-400 p-2",children:(0,p.jsx)(x,{size:32})})]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("p",{className:"text-white",children:"Verify your email address to unlock all features."}),(0,p.jsxs)("p",{className:"text-gray-light text-sm",children:["We'll send a verification link to: ",(0,p.jsx)("span",{className:"text-electric font-bold",children:null===t||void 0===t?void 0:t.email})]}),(0,p.jsx)("button",{onClick:Tn,className:"btn btn-neon w-full",children:"\ud83d\udce7 Send Verification Email"}),(0,p.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,p.jsx)("p",{className:"text-gray-light text-sm mb-3",children:"Already verified? Click below to refresh."}),(0,p.jsx)("button",{onClick:In,className:"btn btn-electric w-full",children:"\ud83d\udd04 Check Verification Status"})]})]})]})});if(Se&&Ee){const e=he.filter(e=>!Ee.songs.includes(e.id)&&(e.title.toLowerCase().includes(v.toLowerCase())||e.artist.toLowerCase().includes(v.toLowerCase()))),t=e=>{if(0===e)return;const t=[...Ee.songs];[t[e-1],t[e]]=[t[e],t[e-1]],_e(o(o({},Ee),{},{songs:t}))},n=e=>{if(e===Ee.songs.length-1)return;const t=[...Ee.songs];[t[e],t[e+1]]=[t[e+1],t[e]],_e(o(o({},Ee),{},{songs:t}))};return(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"rock-background gig-card border-2 border-magenta max-w-4xl w-full h-[90vh] flex flex-col",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-white/10 flex-shrink-0",children:[(0,p.jsx)("h2",{className:"concert-heading text-3xl md:text-4xl text-magenta",children:"\ud83c\udfb8 SETLIST BUILDER"}),(0,p.jsx)("button",{onClick:()=>{ke(!1),_e(null),y("")},className:"text-white hover:text-red-400 p-2 touch-target",children:(0,p.jsx)(x,{size:32})})]}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,p.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Playlist Name *"}),(0,p.jsx)("input",{type:"text",value:Ee.name,onChange:e=>_e(o(o({},Ee),{},{name:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none",placeholder:"e.g., Friday Night Rock"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Description"}),(0,p.jsx)("textarea",{value:Ee.description,onChange:e=>_e(o(o({},Ee),{},{description:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none",rows:2,placeholder:"Optional description..."})]})]}),(0,p.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 mb-6",children:[(0,p.jsxs)("h3",{className:"concert-heading text-2xl text-neon mb-4",children:["\ud83c\udfb5 SONGS IN SETLIST (",Ee.songs.length,")"]}),0===Ee.songs.length?(0,p.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,p.jsx)("p",{className:"text-gray-light",children:"No songs yet. Add from master playlist below. \ud83c\udfb8"})}):(0,p.jsx)("div",{className:"space-y-2",children:Ee.songs.map((e,r)=>{const i=he.find(t=>t.id===e);return i?(0,p.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg flex items-center gap-3 border border-white/10 hover:border-electric/50 transition",children:[(0,p.jsx)("span",{className:"concert-heading text-electric text-xl min-w-[40px]",children:r+1}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"text-white font-bold truncate",children:i.title}),(0,p.jsx)("div",{className:"text-gray-light text-sm truncate",children:i.artist})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)("button",{onClick:()=>t(r),disabled:0===r,className:"text-neon hover:text-electric p-2 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:"\u25b2"}),(0,p.jsx)("button",{onClick:()=>n(r),disabled:r===Ee.songs.length-1,className:"text-neon hover:text-electric p-2 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:"\u25bc"}),(0,p.jsx)("button",{onClick:()=>(e=>{_e(o(o({},Ee),{},{songs:Ee.songs.filter(t=>t!==e)}))})(e),className:"text-red-400 hover:text-red-300 p-2",title:"Remove",children:(0,p.jsx)(N,{size:20})})]})]},e):null})})]}),(0,p.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 mb-6",children:[(0,p.jsx)("h3",{className:"concert-heading text-2xl text-electric mb-4",children:"\ud83d\udcda ADD FROM MASTER PLAYLIST"}),(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"\ud83d\udd0d Search by song or artist name...",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none"})}),0===he.length?(0,p.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,p.jsx)("p",{className:"text-gray-light",children:"No songs in master playlist. Add songs in the Master Playlist tab first! \ud83c\udfb5"})}):0===e.length?(0,p.jsx)("div",{className:"bg-white/5 rounded-lg p-6 text-center border border-neon/30",children:(0,p.jsx)("p",{className:"text-neon font-bold",children:v?'No songs found for "'.concat(v,'"'):"\u2705 All master songs added to setlist!"})}):(0,p.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,p.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg flex items-center gap-3 border border-white/10 hover:bg-white/10 transition",children:[(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"text-white font-bold truncate",children:e.title}),(0,p.jsx)("div",{className:"text-gray-light text-sm truncate",children:e.artist})]}),(0,p.jsxs)("button",{onClick:()=>{return t=e.id,void(Ee.songs.includes(t)||_e(o(o({},Ee),{},{songs:[...Ee.songs,t]})));var t},className:"btn btn-neon text-sm",children:[(0,p.jsx)(S,{size:18}),(0,p.jsx)("span",{children:"Add"})]})]},e.id))})]})]}),(0,p.jsx)("div",{className:"p-6 pt-4 border-t border-white/10 flex-shrink-0",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,p.jsxs)("button",{onClick:yn,className:"flex-1 btn btn-neon text-lg",children:[(0,p.jsx)(w,{size:20}),(0,p.jsx)("span",{children:"Save Setlist"})]}),(0,p.jsx)("button",{onClick:()=>{ke(!1),_e(null),y("")},className:"btn btn-ghost",children:"Cancel"})]})})]})})}var Ln;if(be&&we)return(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50",style:{pointerEvents:"none"},children:(0,p.jsxs)("div",{className:"rock-background gig-card border-2 border-orange max-w-2xl w-full h-[90vh] flex flex-col",style:{pointerEvents:"auto"},children:[(0,p.jsxs)("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-white/10 flex-shrink-0",children:[(0,p.jsx)("h2",{className:"concert-heading text-3xl md:text-4xl text-orange",children:me.find(e=>e.id===we.id)?"\ud83c\udfb8 EDIT SHOW":"\u26a1 CREATE SHOW"}),(0,p.jsx)("button",{onClick:()=>{xe(!1),Ne(null)},className:"text-white hover:text-red-400 p-2 touch-target",children:(0,p.jsx)(x,{size:32})})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Venue Name *"}),(0,p.jsx)("input",{type:"text",value:we.venueName,onChange:e=>Ne(o(o({},we),{},{venueName:e.target.value})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-electric/30 focus:border-electric focus:outline-none",placeholder:"e.g. The Blue Note Jazz Club"})]}),(0,p.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[(0,p.jsxs)("h3",{className:"concert-heading text-xl text-neon flex items-center mb-4",children:[(0,p.jsx)(k,{className:"mr-2",size:24}),"VENUE LOCATION"]}),(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("button",{onClick:bn,disabled:Xe,className:"btn btn-electric w-full disabled:opacity-50 disabled:cursor-not-allowed",children:Xe?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"loading-pulse",children:"\ud83d\udccd"}),(0,p.jsx)("span",{children:"Capturing..."})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"\ud83d\udccd"}),(0,p.jsx)("span",{children:"Use My Current Location"})]})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-bold text-neon mb-2",children:"OR SEARCH ADDRESS:"}),be&&we&&(0,p.jsx)(m,{onSelect:e=>{console.log("\u2705 Address captured in App.jsx:",e),Ne(o(o({},we),{},{address:e.address,location:e.location,venueName:we.venueName||e.name}))},placeholder:"Type venue address..."},we.id)]}),we.location&&(0,p.jsx)("p",{className:"text-neon font-bold mt-4",children:"\u2705 Location Captured"})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Date *"}),(0,p.jsx)("input",{type:"date",value:we.date,onChange:e=>{console.log("\ud83d\udcc5 Date selected:",e.target.value),Ne(o(o({},we),{},{date:e.target.value}))},className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-white/30 focus:border-electric focus:outline-none [color-scheme:dark]",required:!0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Time *"}),(0,p.jsx)("input",{type:"time",value:we.time,onChange:e=>{console.log("\u23f0 Time selected:",e.target.value),Ne(o(o({},we),{},{time:e.target.value}))},className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-white/30 focus:border-electric focus:outline-none [color-scheme:dark]",required:!0})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Assign Setlist (Optional)"}),(0,p.jsxs)("select",{value:we.playlistId||"",onChange:e=>Ne(o(o({},we),{},{playlistId:e.target.value?parseInt(e.target.value):null})),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-electric/30 focus:border-electric focus:outline-none",children:[(0,p.jsx)("option",{value:"",className:"bg-gray-900 text-white",children:"No setlist (use master playlist)"}),ge.map(e=>(0,p.jsxs)("option",{value:e.id,className:"bg-gray-900 text-white",children:[e.name," (",e.songs.length," songs)"]},e.id))]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"text-electric font-bold mb-2 block text-sm uppercase tracking-wider",children:"Maximum Queue Size"}),(0,p.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:null!==(Ln=we.queueSize)&&void 0!==Ln?Ln:20,onChange:e=>{const t=e.target.value;if(""===t)return void Ne(o(o({},we),{},{queueSize:""}));if(!/^\d+$/.test(t))return;const n=parseInt(t);Ne(o(o({},we),{},{queueSize:n}))},onBlur:e=>{const t=e.target.value;if(""===t||isNaN(parseInt(t)))return void Ne(o(o({},we),{},{queueSize:20}));const n=parseInt(t);n<20?(Ne(o(o({},we),{},{queueSize:20})),alert("\u26a0\ufe0f Minimum queue size is 20 songs")):n>50&&(Ne(o(o({},we),{},{queueSize:50})),alert("\u26a0\ufe0f Maximum queue size is 50 songs"))},placeholder:"20-50",className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white border border-electric/30 focus:border-electric focus:outline-none"}),""!==we.queueSize&&we.queueSize<20&&(0,p.jsx)("p",{className:"text-red-400 text-sm mt-2 font-bold",children:"\u26a0\ufe0f Minimum queue size is 20 songs"}),we.queueSize>50&&(0,p.jsx)("p",{className:"text-red-400 text-sm mt-2 font-bold",children:"\u26a0\ufe0f Maximum queue size is 50 songs"}),(!we.queueSize||we.queueSize>=20&&we.queueSize<=50)&&(0,p.jsx)("p",{className:"text-gray-light text-sm mt-2",children:"\ud83d\udca1 Type any number between 20-50 songs"})]})]})}),(0,p.jsx)("div",{className:"p-6 pt-4 border-t border-white/10 flex-shrink-0",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,p.jsxs)("button",{onClick:wn,disabled:vt,className:"flex-1 btn text-lg ".concat(vt?"btn-ghost opacity-50 cursor-not-allowed":"btn-neon"),children:[(0,p.jsx)(w,{size:20}),(0,p.jsx)("span",{children:vt?"Saving...":"Save Show"})]}),(0,p.jsx)("button",{onClick:()=>{xe(!1),Ne(null)},className:"btn btn-ghost",children:"Cancel"})]})})]})});if(dt&&ct)return(0,p.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"rock-background gig-card border-2 border-electric max-w-3xl w-full h-[90vh] flex flex-col",children:[(0,p.jsx)("div",{className:"flex justify-end items-center p-4 flex-shrink-0",children:(0,p.jsx)("button",{onClick:()=>{ht(!1),ut(null)},className:"text-white hover:text-red-400 p-2 touch-target",children:(0,p.jsx)(x,{size:32})})}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,p.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 mb-6",children:[(0,p.jsx)("h3",{className:"text-base md:text-lg text-magenta mb-4 font-bold whitespace-nowrap text-center",children:"\ud83c\udfb5 EXPECTED SETLIST"}),(()=>{let e=[];const t=ct.maxQueueSize||ct.queueSize||20,n=ct.queuedSongs||[],r=ct.masterPlaylist||[];if(n.length>t){e=[...n].sort(()=>Math.random()-.5).slice(0,t)}else if(n.length>0&&n.length<t){e=[...n];const i=t-n.length,s=[...r.filter(e=>!n.find(t=>t.id===e.id))].sort(()=>Math.random()-.5);e=[...e,...s.slice(0,i)]}else if(0===n.length){e=[...r].sort(()=>Math.random()-.5).slice(0,t)}else e=n;const i=n.length>0?"Curated Queue":"Master Playlist";return e.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-electric text-sm mb-4 font-semibold",children:["Showing: ",i," (",e.length,"/",t," songs)"]}),(0,p.jsx)("div",{className:"space-y-2",children:e.map((e,t)=>e&&e.title?(0,p.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg flex items-center gap-3 hover:bg-white/10 transition border border-white/10",children:[(0,p.jsx)("span",{className:"concert-heading text-electric text-xl min-w-[40px]",children:t+1}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"text-white font-bold truncate",children:e.title}),(0,p.jsx)("div",{className:"text-gray-light text-sm truncate",children:e.artist||"Unknown Artist"})]})]},e.id||t):null)}),(0,p.jsxs)("p",{className:"text-gray text-sm mt-4 italic text-center",children:[e.length," song",1!==e.length?"s":""," \u2022 Final setlist may vary"]})]}):(0,p.jsx)("div",{className:"bg-white/5 rounded-lg p-8 text-center border border-electric/30",children:(0,p.jsx)("p",{className:"text-gray-light",children:"Setlist not available yet. Check back closer to showtime! \ud83c\udfb8"})})})()]})}),(0,p.jsx)("div",{className:"p-6 pt-4 border-t border-white/10 flex-shrink-0",children:(0,p.jsxs)("div",{className:"flex flex-row gap-3 justify-center",children:[(0,p.jsx)("button",{onClick:async()=>{if(!t)return void O(!0);const e=ft.includes(ct.id);try{e?(await(async(e,t)=>{try{const n=Tc(cg,"liveGigs",e,"interestedUsers",t);await Ou(n),console.log("\u2705 Unmarked as interested")}catch(n){throw console.error("\u274c Error unmarking interested:",n),n}})(ct.id,t.uid),gt(ft.filter(e=>e!==ct.id))):(await(async(e,t)=>{try{const n=Tc(cg,"liveGigs",e,"interestedUsers",t);await Du(n,{userId:t,timestamp:Uu()}),console.log("\u2705 Marked as interested")}catch(n){throw console.error("\u274c Error marking interested:",n),n}})(ct.id,t.uid),gt([...ft,ct.id]))}catch(n){alert("Error updating interest: "+n.message)}},className:"btn text-sm md:text-base px-4 ".concat(ft.includes(ct.id)?"btn-neon":"btn-electric"),children:ft.includes(ct.id)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"\u2b50"}),(0,p.jsx)("span",{children:"Mark As Interested"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"\u2b50"}),(0,p.jsx)("span",{children:"Mark as Interested"})]})}),(0,p.jsx)("button",{onClick:()=>{ht(!1),ut(null)},className:"btn btn-ghost text-sm md:text-base px-6",children:"Close"})]})})]})});if("discover"===J)return(0,p.jsx)("div",{className:"rock-background min-h-screen p-4 pb-24 md:pb-4",children:(0,p.jsxs)("div",{className:"max-w-4xl mx-auto pt-8 md:pt-20",children:[(0,p.jsxs)("div",{className:"text-center mb-8 md:mb-12",children:[(0,p.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,p.jsx)("div",{className:"relative logo-icon",children:(0,p.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 100 100",children:[(0,p.jsxs)("rect",{x:"10",y:"30",width:"8",height:"40",fill:"#00FFD4",rx:"4",children:[(0,p.jsx)("animate",{attributeName:"height",values:"40;60;40",dur:"1s",repeatCount:"indefinite"}),(0,p.jsx)("animate",{attributeName:"y",values:"30;20;30",dur:"1s",repeatCount:"indefinite"})]}),(0,p.jsxs)("rect",{x:"25",y:"20",width:"8",height:"60",fill:"#00D4FF",rx:"4",children:[(0,p.jsx)("animate",{attributeName:"height",values:"60;80;60",dur:"1.2s",repeatCount:"indefinite"}),(0,p.jsx)("animate",{attributeName:"y",values:"20;10;20",dur:"1.2s",repeatCount:"indefinite"})]}),(0,p.jsxs)("rect",{x:"40",y:"15",width:"8",height:"70",fill:"#FF1B6D",rx:"4",children:[(0,p.jsx)("animate",{attributeName:"height",values:"70;90;70",dur:"0.8s",repeatCount:"indefinite"}),(0,p.jsx)("animate",{attributeName:"y",values:"15;5;15",dur:"0.8s",repeatCount:"indefinite"})]}),(0,p.jsxs)("rect",{x:"55",y:"20",width:"8",height:"60",fill:"#9D00FF",rx:"4",children:[(0,p.jsx)("animate",{attributeName:"height",values:"60;80;60",dur:"1.2s",repeatCount:"indefinite"}),(0,p.jsx)("animate",{attributeName:"y",values:"20;10;20",dur:"1.2s",repeatCount:"indefinite"})]}),(0,p.jsxs)("rect",{x:"70",y:"30",width:"8",height:"40",fill:"#00FFD4",rx:"4",children:[(0,p.jsx)("animate",{attributeName:"height",values:"40;60;40",dur:"1s",repeatCount:"indefinite"}),(0,p.jsx)("animate",{attributeName:"y",values:"30;20;30",dur:"1s",repeatCount:"indefinite"})]})]})}),(0,p.jsx)("h1",{className:"gigwave-logo","data-text":"GigWave",children:"GigWave"})]}),0===ne.length&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"hero-tagline",children:["Ride","The","Wave","Of","Live","Music"].map((e,t)=>(0,p.jsx)("span",{style:{marginRight:"0.3em"},children:e},t))}),(0,p.jsxs)("div",{className:"lightning-container",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",flexWrap:"wrap"},children:[(0,p.jsx)("svg",{className:"lightning-bolt left",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)("path",{d:"M13 2L3 14h8l-1 8 10-12h-8l1-8z"})}),(0,p.jsx)("h2",{className:"discover-text",children:"Discover Live Music Near You"}),(0,p.jsx)("svg",{className:"lightning-bolt right",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)("path",{d:"M13 2L3 14h8l-1 8 10-12h-8l1-8z"})})]})]})]}),0===ne.length&&(0,p.jsx)("div",{className:"mb-8",children:(0,p.jsx)("button",{onClick:hn,disabled:ie,className:"btn btn-electric w-full text-xl md:text-2xl py-6 md:py-8 hover:scale-105 transition-transform",children:ie?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"loading-pulse",children:"\ud83d\udd0d"}),(0,p.jsx)("span",{children:"Searching..."})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"\ud83d\udccd"}),(0,p.jsx)("span",{children:"Find Live Gigs"})]})})}),0===ne.length&&(0,p.jsx)("div",{className:"mb-8",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",{type:"text",value:Ue,onChange:e=>(async e=>{if(Ve(e),!e||e.trim().length<2)return qe([]),He(!1),void Qe(!1);try{Ge(!0),Qe(!0);const n=e.toLowerCase().trim(),r=[],i=_c(cg,"users");console.log("\ud83d\udce1 Querying users collection...");const s=await Pu(i);console.log("\u2705 Found",s.size,"users"),console.log("\ud83d\udccb Checking each user:");for(const e of s.docs)console.log("  User ID:",e.id),console.log("  User email:",e.data().email);for(const e of s.docs)try{const t=Tc(cg,"users",e.id,"profile","data");console.log("  \ud83d\udcc2 Checking profile for:",e.id);const i=await ju(t);if(console.log("  Profile exists?",i.exists()),i.exists()&&console.log("  Profile data:",i.data()),i.exists()){const t=i.data();if(t.artistName){const i=t.artistName.toLowerCase(),s=(t.fullName||"").toLowerCase();console.log("\ud83d\udc64 Found artist:",t.artistName),(i.includes(n)||s.includes(n))&&(console.log("\u2705 MATCH:",t.artistName),r.push({id:e.id,artistName:t.artistName,fullName:t.fullName||"",genre:t.genre||"",location:t.location||"",profilePhoto:t.profilePhoto||"",bio:t.bio||"",socialMedia:t.socialMedia||{}}))}}}catch(t){console.log("\u26a0\ufe0f No profile for user:",e.id),console.log("\u26a0\ufe0f Error:",t.message)}console.log("\ud83c\udfaf Total matches:",r.length),r.sort((e,t)=>{const r=e.artistName.toLowerCase(),i=t.artistName.toLowerCase();return r===n?-1:i===n?1:r.startsWith(n)&&!i.startsWith(n)?-1:i.startsWith(n)&&!r.startsWith(n)?1:r.localeCompare(i)}),qe(r),He(!0)}catch(n){console.error("\u274c Search error:",n),console.error("   Code:",n.code),console.error("   Message:",n.message),"permission-denied"===n.code?alert("\u26a0\ufe0f Error: Firebase rules need updating\n\nMake sure Firebase rules allow public read access to users collection.\n\nCheck the console for details."):alert("Error searching artists: "+n.message)}finally{Ge(!1)}})(e.target.value),onFocus:()=>ze.length>0&&He(!0),placeholder:"Search by artist name...",className:"w-full px-4 py-4 pr-12 rounded-lg bg-white/10 text-white border-2 border-magenta/30 focus:border-magenta focus:outline-none text-lg",style:{"::placeholder":{color:"white",opacity:1}}}),(0,p.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-magenta",children:Be?(0,p.jsx)("div",{className:"animate-spin",children:"\u23f3"}):(0,p.jsx)("span",{children:"\ud83d\udd0d"})}),We&&ze.length>0&&(0,p.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-gray-900 border-2 border-magenta rounded-lg shadow-2xl max-h-80 overflow-y-auto",children:ze.map(e=>(0,p.jsx)("button",{onClick:()=>{Rn(e.id),He(!1),Ve("")},className:"w-full p-4 hover:bg-magenta/20 border-b border-white/10 last:border-b-0 text-left transition",children:(0,p.jsxs)("div",{className:"flex items-center gap-4",children:[(0,p.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-magenta to-electric flex items-center justify-center flex-shrink-0",children:(0,p.jsx)(E,{size:24,className:"text-white"})}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"text-white font-bold text-lg truncate",children:e.artistName}),(0,p.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.genre&&(0,p.jsxs)("span",{className:"text-electric",children:["\ud83c\udfb5 ",e.genre]}),e.location&&(0,p.jsxs)("span",{className:"text-gray-light",children:["\ud83d\udccd ",e.location]})]})]}),(0,p.jsx)("div",{className:"text-magenta",children:"\u2192"})]})},e.id))}),We&&0===ze.length&&Ue.length>=2&&!Be&&(0,p.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-gray-900 border-2 border-magenta rounded-lg p-6 text-center",children:[(0,p.jsxs)("p",{className:"text-gray-light",children:['No artists found for "',Ue,'"']}),(0,p.jsx)("p",{className:"text-gray text-sm mt-2",children:"Try a different search term"})]}),We&&(0,p.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>He(!1)})]})}),ne.length>0&&(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsxs)("div",{style:{position:"relative"},children:[(0,p.jsx)("input",{type:"text",placeholder:"Search by venue, artist, or location...",value:le,onChange:e=>ce(e.target.value),style:{width:"100%",padding:"14px 50px 14px 16px",background:"rgba(0, 0, 0, 0.9)",border:"2px solid rgba(0, 212, 255, 0.3)",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",transition:"all 0.3s ease",outline:"none"},onFocus:e=>{e.target.style.borderColor="rgba(0, 212, 255, 0.6)",e.target.style.boxShadow="0 0 12px rgba(0, 212, 255, 0.25)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 212, 255, 0.3)",e.target.style.boxShadow="none"}}),(0,p.jsx)("span",{style:{position:"absolute",right:"16px",top:"50%",transform:"translateY(-50%)",color:"#00d4ff",fontSize:"20px",pointerEvents:"none"},children:"\ud83d\udd0d"}),le&&(0,p.jsx)("button",{onClick:()=>ce(""),style:{position:"absolute",right:"50px",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 107, 53, 0.2)",border:"2px solid rgba(255, 107, 53, 0.5)",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",color:"#ff6b35",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s ease",padding:"0"},onMouseEnter:e=>{e.target.style.background="rgba(255, 107, 53, 0.4)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 107, 53, 0.2)"},children:"\u2715"})]}),le&&(0,p.jsxs)("div",{style:{marginTop:"12px",color:"#00d4ff",fontSize:"14px",fontWeight:"600"},children:["\ud83d\udcca Found ",Dn(ue).length,' gigs matching "',le,'"']})]}),(0,p.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,p.jsx)("label",{htmlFor:"dateFilter",className:"text-electric font-bold text-base whitespace-nowrap",children:"\ud83d\uddd3\ufe0f Filter:"}),(0,p.jsxs)("select",{id:"dateFilter",value:ae,onChange:e=>(e=>{if(oe(e),"all"===e)return void de(ne);const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=ne.filter(t=>{if(!t.gigDate)return!0;const r=new Date(t.gigDate),i=new Date(r.getFullYear(),r.getMonth(),r.getDate());if("today"===e)return i.getTime()===n.getTime();if("tomorrow"===e){const e=new Date(n);return e.setDate(e.getDate()+1),i.getTime()===e.getTime()}if("week"===e){const e=new Date(n);return e.setDate(e.getDate()+7),i>=n&&i<=e}return!0});de(r)})(e.target.value),className:"px-3 py-2 rounded-lg bg-white/10 text-white border-2 border-electric/30 focus:border-electric focus:outline-none text-base font-bold cursor-pointer",children:[(0,p.jsx)("option",{value:"today",className:"bg-gray-900 text-white font-bold",children:"Today"}),(0,p.jsx)("option",{value:"tomorrow",className:"bg-gray-900 text-white font-bold",children:"Tomorrow"}),(0,p.jsx)("option",{value:"week",className:"bg-gray-900 text-white font-bold",children:"This Week"}),(0,p.jsx)("option",{value:"all",className:"bg-gray-900 text-white font-bold",children:"All Dates"})]})]}),(0,p.jsxs)("p",{className:"text-gray-light text-sm mb-6 text-center",children:["\ud83c\udfb5 Showing ",(0,p.jsx)("span",{className:"text-electric font-bold",children:ue.filter(e=>{const t=un(e);return["live","checkVenue","upcoming"].includes(t)}).length})," of ",(0,p.jsx)("span",{className:"text-electric font-bold",children:ne.filter(e=>{const t=un(e);return["live","checkVenue","upcoming"].includes(t)}).length})," active gigs"]}),(0,p.jsx)("div",{className:"space-y-4",children:(()=>{const e=Dn(ue).map(e=>o(o({},e),{},{calculatedStatus:un(e)})).filter(e=>["live","checkVenue","upcoming"].includes(e.calculatedStatus)).sort((e,t)=>{const n={live:0,checkVenue:1,upcoming:2};if(e.calculatedStatus!==t.calculatedStatus)return n[e.calculatedStatus]-n[t.calculatedStatus];return new Date("".concat(e.gigDate,"T").concat(e.gigTime))-new Date("".concat(t.gigDate,"T").concat(t.gigTime))});if(0===e.length)return(0,p.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-400 rounded-xl p-6 text-center",children:[(0,p.jsx)("p",{className:"text-yellow-200 text-lg",children:le?'No gigs found matching "'.concat(le,'"'):"No active gigs found for selected date filter."}),le&&(0,p.jsx)("button",{onClick:()=>ce(""),className:"btn btn-electric mt-4",children:"Clear Search"})]});const n=e.filter(e=>"live"===e.calculatedStatus),r=e.filter(e=>"upcoming"===e.calculatedStatus||"checkVenue"===e.calculatedStatus);return(0,p.jsxs)(p.Fragment,{children:[n.map(e=>{var n;return(0,p.jsx)("div",{className:"gig-card gig-card-live hover:scale-[1.02] transition-all",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("div",{className:"flex items-center gap-1 mb-1",children:(0,p.jsxs)("span",{className:"concert-heading text-xs tracking-wider",style:{color:"#39FF14"},children:[(0,p.jsx)("span",{className:"inline-block animate-pulse",style:{filter:"drop-shadow(0 0 8px #39FF14) drop-shadow(0 0 16px #39FF14) drop-shadow(0 0 24px #39FF14)",textShadow:"0 0 10px #39FF14, 0 0 20px #39FF14, 0 0 30px #39FF14"},children:"\ud83d\udfe2"})," LIVE NOW"]})}),(0,p.jsx)("h3",{className:"concert-heading text-base text-white mb-0.5",children:e.artistName}),(0,p.jsx)("div",{className:"space-y-2 text-gray-light",children:(0,p.jsxs)("p",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)("span",{className:"text-electric",children:"\ud83d\udccd"}),(0,p.jsx)("span",{className:"font-semibold",children:e.venueName}),null!=e.distance&&!isNaN(e.distance)&&(0,p.jsxs)("span",{className:"text-electric font-bold",children:["\u2022 ",e.distance<1e3?"".concat(Math.round(e.distance),"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")]})]})})]}),(null===(n=e.artistProfile)||void 0===n?void 0:n.socialMedia)&&(0,p.jsx)("div",{className:"mt-4 pt-4 border-t border-white/20",children:(0,p.jsx)(kg,{socialMedia:e.artistProfile.socialMedia,artistName:e.artistName})}),(0,p.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,p.jsxs)("button",{onClick:async t=>{t.preventDefault(),t.stopPropagation();try{const t=Tc(cg,"liveGigs",e.id),n=await ju(t);if(n.exists()){const t=o(o({id:n.id},n.data()),{},{distance:e.distance});ut(t)}else ut(e);ht(!0)}catch(n){console.error("Error fetching gig details:",n),ut(e),ht(!0)}},className:"btn btn-electric text-lg md:text-xl whitespace-nowrap touch-target",children:[(0,p.jsx)(_,{size:20}),(0,p.jsx)("span",{children:"VIEW PLAYLIST"})]}),(0,p.jsxs)("button",{onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!t)return alert("\ud83d\udd10 Sign in to join and interact with this live gig!"),void O(!0);console.log("\ud83c\udfb5 JOIN LIVE clicked for:",e.artistName),gn(e)},className:"btn btn-neon text-lg md:text-xl whitespace-nowrap touch-target",children:[(0,p.jsx)("span",{children:"\ud83c\udfb5"}),(0,p.jsx)("span",{children:"JOIN LIVE"})]})]})]})},e.id)}),r.length>0&&(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("h2",{className:"concert-heading text-4xl text-electric mb-6",children:"\ud83d\udcc5 UPCOMING GIGS"}),r.map(e=>{const t=e.gigDate&&e.gigTime?"".concat(new Date(e.gigDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ").concat(e.gigTime):"Time TBD";return(0,p.jsx)("div",{className:"gig-card hover:scale-[1.02] transition-all",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,p.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("checkVenue"===e.calculatedStatus?"bg-orange-500":"bg-electric")}),(0,p.jsx)("span",{className:"font-bold text-xs uppercase tracking-wider ".concat("checkVenue"===e.calculatedStatus?"text-orange-400":"text-electric"),children:"checkVenue"===e.calculatedStatus?"Check With Venue":"Upcoming"})]}),(0,p.jsx)("h3",{className:"concert-heading text-xl md:text-2xl text-white mb-2",children:e.artistName}),(0,p.jsxs)("p",{className:"text-magenta font-bold text-base mb-3",children:["\ud83c\udfb8 ",t]}),(0,p.jsxs)("div",{className:"space-y-1 text-gray-light",children:[(0,p.jsxs)("p",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)("span",{className:"text-electric",children:"\ud83d\udccd"}),(0,p.jsx)("span",{className:"font-semibold",children:e.venueName}),null!=e.distance&&!isNaN(e.distance)&&(0,p.jsxs)("span",{className:"text-electric font-bold",children:["\u2022 ",e.distance<1e3?"".concat(Math.round(e.distance),"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")]})]}),ft.includes(e.id)&&(0,p.jsxs)("p",{className:"flex items-center gap-2 text-neon font-semibold mt-2 text-sm",children:[(0,p.jsx)("span",{children:"\u2b50"}),(0,p.jsx)("span",{children:"You're interested!"})]}),e.interestedCount>0&&(0,p.jsxs)("p",{className:"flex items-center gap-2 text-magenta font-semibold text-sm",children:[(0,p.jsx)("span",{children:"\ud83d\udc65"}),(0,p.jsxs)("span",{children:[e.interestedCount," ",1===e.interestedCount?"person":"people"," interested"]})]})]})]}),(0,p.jsxs)("button",{onClick:async()=>{try{const t=Tc(cg,"liveGigs",e.id),n=await ju(t);if(n.exists()){const t=o(o({id:n.id},n.data()),{},{distance:e.distance});ut(t)}else ut(e);ht(!0)}catch(t){console.error("Error fetching gig details:",t),ut(e),ht(!0)}},className:"btn btn-electric text-sm md:text-base px-4 py-2 whitespace-nowrap self-center touch-target",children:[(0,p.jsx)("span",{children:"\ud83c\udfb5"}),(0,p.jsx)("span",{children:"VIEW PLAYLIST"})]})]})},e.id)})]})]})})()})]}),0===ne.length&&!Ke&&(0,p.jsx)("div",{className:"mt-8 text-center space-y-4",children:t?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-white mb-4",children:["Signed in as: ",t.email]}),(0,p.jsx)("button",{onClick:()=>X("artist"),className:"px-8 py-4 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl font-bold text-xl",children:"\ud83c\udfa4 Go to Artist Mode"})]}):(0,p.jsx)("div",{className:"space-y-4",children:(0,p.jsx)("button",{onClick:()=>{Y("artist"),O(!0)},className:"w-full px-8 py-4 bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white rounded-xl font-bold text-xl",children:"\ud83c\udfa4 Artist Sign In"})})})]})});if("artist"===J)return(0,p.jsx)("div",{className:"artist-dashboard rock-background min-h-screen p-4 pb-24 md:pb-4",children:(0,p.jsxs)("div",{className:"max-w-6xl mx-auto pt-6",children:[(0,p.jsx)("div",{className:"artist-header-card gig-card mb-8",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"artist-dashboard-title mb-3",children:"\ud83c\udfb8 ARTIST DASHBOARD"}),(0,p.jsxs)("p",{className:"artist-welcome",children:["Welcome, ",(null===t||void 0===t?void 0:t.displayName)||(null===t||void 0===t?void 0:t.email)]})]}),(0,p.jsx)("div",{className:"flex gap-3",children:(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,p.jsxs)("button",{onClick:()=>{Xt&&sn({artistName:Xt.artistName||"",fullName:Xt.fullName||"",bio:Xt.bio||"",profilePhoto:Xt.profilePhoto||"",genre:Xt.genre||"",location:Xt.location||"",socialMedia:Xt.socialMedia||{instagram:"",facebook:"",youtube:"",spotify:"",twitter:"",tiktok:"",soundcloud:""}}),nn(1),en(!0)},className:"btn btn-electric w-full sm:w-auto",children:[(0,p.jsx)(T,{size:20}),(0,p.jsx)("span",{children:"Edit Profile"})]}),(0,p.jsx)("button",{onClick:()=>X("discover"),className:"btn btn-ghost w-full sm:w-auto",children:"\u2190 Back"}),(0,p.jsx)("button",{onClick:async()=>{await gg(),X("discover")},className:"btn btn-fire w-full sm:w-auto",children:"Sign Out"})]})})]})}),(0,p.jsxs)("div",{className:"artist-nav-tabs",children:[(0,p.jsxs)("button",{onClick:()=>Z("master"),className:"artist-nav-tab ".concat("master"===$?"active":""),children:[(0,p.jsx)(E,{className:"inline mr-2",size:24}),(0,p.jsx)("span",{children:"Master Playlist"})]}),(0,p.jsxs)("button",{onClick:()=>Z("playlists"),className:"artist-nav-tab ".concat("playlists"===$?"active":""),children:[(0,p.jsx)(E,{className:"inline mr-2",size:24}),(0,p.jsx)("span",{children:"Gig Playlists"})]}),(0,p.jsxs)("button",{onClick:()=>Z("gigs"),className:"artist-nav-tab ".concat("gigs"===$?"active":""),children:[(0,p.jsx)(I,{className:"inline mr-2",size:24}),(0,p.jsx)("span",{children:"My Gigs"})]})]}),"master"===$&&(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{className:"artist-search-section",children:[(0,p.jsxs)("h3",{className:"artist-section-header",children:[(0,p.jsx)("span",{className:"emoji-icon",children:"\ud83c\udfb5"}),(0,p.jsx)("span",{children:"SEARCH ITUNES MUSIC"})]}),(0,p.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[(0,p.jsx)("input",{type:"text",value:Te,onChange:e=>Ie(e.target.value),onKeyPress:e=>"Enter"===e.key&&mn(),placeholder:"Search for songs, artists, albums...",className:"artist-search-input flex-1",disabled:Ae}),(0,p.jsxs)("button",{onClick:mn,disabled:Ae,className:"btn btn-neon",children:[(0,p.jsx)("span",{children:Ae?"\u23f3":"\ud83d\udd0d"}),(0,p.jsx)("span",{children:"Search"})]})]}),Ce.length>0&&(0,p.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[(0,p.jsxs)("p",{className:"text-white font-bold text-lg mb-3",children:["\ud83c\udfbc Found ",(0,p.jsx)("span",{className:"text-neon",children:Ce.length})," songs"]}),Ce.map(e=>(0,p.jsxs)("div",{className:"artist-itunes-result flex flex-col md:flex-row md:items-center gap-4",children:[e.artwork&&(0,p.jsx)("img",{src:e.artwork,alt:e.title,className:"w-16 h-16 rounded object-cover border-2 border-electric"}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"text-white font-bold text-lg truncate",children:e.title}),(0,p.jsx)("div",{className:"text-electric text-sm font-semibold",children:e.artist}),e.album&&(0,p.jsx)("div",{className:"text-gray-light text-xs truncate",children:e.album}),e.duration&&(0,p.jsxs)("div",{className:"text-neon text-xs font-semibold",children:["\u23f1\ufe0f ",e.duration]})]}),(0,p.jsxs)("button",{onClick:()=>(e=>{if(he.find(t=>t.title===e.title&&t.artist===e.artist))return void alert("\u26a0\ufe0f This song is already in your master playlist!");const t={id:Math.floor(e.id),title:e.title,artist:e.artist,duration:e.duration,album:e.album||"",key:""};fe([...he,t]),je(Ce.filter(t=>t.id!==e.id))})(e),className:"btn btn-neon text-sm md:text-base whitespace-nowrap",children:[(0,p.jsx)(S,{size:18}),(0,p.jsx)("span",{children:"Add to Master"})]})]},e.id))]}),Ae&&(0,p.jsx)("div",{className:"text-center py-8",children:(0,p.jsx)("div",{className:"text-electric text-lg loading-pulse font-bold",children:"\ud83d\udd0d Searching iTunes..."})})]}),(0,p.jsxs)("div",{className:"artist-playlist-section",children:[(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[(0,p.jsxs)("h2",{className:"artist-section-header mb-0",children:[(0,p.jsx)("span",{className:"emoji-icon",children:"\ud83c\udfb5"}),(0,p.jsx)("span",{children:"MASTER PLAYLIST"})]}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsxs)("select",{value:b,onChange:e=>D(e.target.value),className:"artist-dropdown",children:[(0,p.jsx)("option",{value:"default",children:"Default Order"}),(0,p.jsx)("option",{value:"song",children:"Sort by Song (A-Z)"}),(0,p.jsx)("option",{value:"artist",children:"Sort by Artist (A-Z)"})]}),(0,p.jsxs)("button",{onClick:pn,className:"btn btn-electric",children:[(0,p.jsx)(S,{size:20}),(0,p.jsx)("span",{children:"Add Song"})]})]})]}),0===he.length?(0,p.jsx)("div",{className:"artist-empty-state",children:(0,p.jsx)("p",{className:"artist-empty-text",children:'No songs yet. Click "Add Song" to start building your library! \ud83c\udfb8'})}):(0,p.jsx)("div",{className:"space-y-3",children:he.slice().sort((e,t)=>"song"===b?e.title.localeCompare(t.title):"artist"===b?e.artist.localeCompare(t.artist):0).map(e=>(0,p.jsxs)("div",{className:"artist-song-card flex justify-between items-center",children:[(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("div",{className:"artist-song-title truncate",children:e.title}),(0,p.jsx)("div",{className:"artist-song-artist truncate",children:e.artist})]}),(0,p.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Remove this song?")&&fe(he.filter(e=>e.id!==t)));var t},className:"text-red-400 hover:text-red-300 p-2 touch-target ml-3",children:(0,p.jsx)(N,{size:20})})]},e.id))})]})]}),"playlists"===$&&(0,p.jsx)("div",{className:"space-y-6",children:(0,p.jsxs)("div",{className:"artist-section-card",children:[(0,p.jsxs)("h2",{className:"artist-section-header",children:[(0,p.jsx)("span",{className:"emoji-icon",children:"\ud83c\udfb8"}),(0,p.jsx)("span",{children:"GIG PLAYLISTS"})]}),(0,p.jsxs)("button",{onClick:vn,className:"btn btn-electric mb-6",children:[(0,p.jsx)(S,{size:20}),(0,p.jsx)("span",{children:"Create Playlist"})]}),0===ge.length?(0,p.jsx)("div",{className:"artist-empty-state",children:(0,p.jsx)("p",{className:"artist-empty-text",children:"No playlists yet. Create custom setlists for different gigs! \ud83c\udfb5"})}):(0,p.jsx)("div",{className:"space-y-4",children:ge.map(e=>(0,p.jsxs)("div",{className:"artist-song-card p-6",children:[(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4 mb-4",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:e.name}),e.description&&(0,p.jsx)("p",{className:"text-gray-light text-sm mb-2",children:e.description}),(0,p.jsxs)("p",{className:"text-electric font-bold text-lg",children:["\ud83c\udfb5 ",e.songs.length," songs"]})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)("button",{onClick:()=>{_e(e),ke(!0)},className:"btn btn-electric text-sm",children:[(0,p.jsx)(T,{size:16}),(0,p.jsx)("span",{children:"Edit"})]}),(0,p.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Delete this playlist?")&&pe(ge.filter(e=>e.id!==t)));var t},className:"btn btn-fire text-sm",children:(0,p.jsx)(N,{size:16})})]})]}),e.songs.length>0&&(0,p.jsxs)("div",{className:"space-y-1 mt-4 pt-4 border-t border-white/20",children:[(0,p.jsx)("p",{className:"text-white font-bold mb-2",children:"Songs:"}),e.songs.slice(0,5).map((e,t)=>{const n=he.find(t=>t.id===e);return n?(0,p.jsxs)("div",{className:"text-gray-light text-sm flex items-center gap-2",children:[(0,p.jsxs)("span",{className:"text-electric font-bold",children:[t+1,"."]}),(0,p.jsx)("span",{className:"text-white font-semibold",children:n.title}),(0,p.jsx)("span",{className:"text-gray",children:"-"}),(0,p.jsx)("span",{className:"text-electric",children:n.artist})]},e):null}),e.songs.length>5&&(0,p.jsxs)("div",{className:"text-magenta text-sm font-bold mt-2",children:["+",e.songs.length-5," more..."]})]})]},e.id))})]})}),"gigs"===$&&(0,p.jsx)("div",{className:"space-y-6",children:(0,p.jsxs)("div",{className:"artist-section-card",children:[(0,p.jsxs)("h2",{className:"artist-section-header",children:[(0,p.jsx)("span",{className:"emoji-icon",children:"\u26a1"}),(0,p.jsx)("span",{children:"MY GIGS"})]}),(0,p.jsxs)("button",{onClick:xn,className:"btn btn-electric mb-6",children:[(0,p.jsx)(S,{size:20}),(0,p.jsx)("span",{children:"Create Gig"})]}),0===me.length?(0,p.jsx)("div",{className:"artist-empty-state",children:(0,p.jsx)("p",{className:"artist-empty-text",children:'No gigs yet. Click "Create Gig" to add one! \u26a1'})}):(0,p.jsx)("div",{className:"space-y-4",children:(()=>{const e={upcoming:"badge-upcoming",checkVenue:"badge-upcoming",live:"badge-live",ended:"badge-ended",cancelled:"badge-ended"},t={upcoming:"\ud83d\udd35 Upcoming",checkVenue:"\ud83d\udfe0 Check With Venue",live:"\ud83d\udfe2 Live",ended:"\u26ab Ended",cancelled:"\ud83d\udd34 Cancelled"};return me.map(n=>{var r;const i=ge.find(e=>e.id===n.playlistId),s=un(n),a="ended"===s||"cancelled"===s,o="cancelled"===s;return(0,p.jsx)("div",{className:"artist-song-card p-6",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4 mb-4",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[(0,p.jsx)("h3",{className:"text-2xl font-bold text-white",children:n.venueName}),(0,p.jsx)("span",{className:"status-badge ".concat(e[s]),children:t[s]})]}),(0,p.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,p.jsxs)("p",{className:"text-electric font-bold text-lg",children:["\ud83d\udcc5 ",n.date," at ",n.time]}),n.address&&(0,p.jsxs)("p",{className:"text-gray-light",children:["\ud83d\udccd ",n.address]}),n.location&&null!=n.location.lat&&null!=n.location.lng&&(0,p.jsxs)("p",{className:"text-neon text-xs font-semibold",children:["\u2705 Location: ",n.location.lat.toFixed(4),"\xb0, ",n.location.lng.toFixed(4),"\xb0"]}),i&&(0,p.jsxs)("p",{className:"text-magenta font-bold",children:["\ud83c\udfb5 Playlist: ",i.name," (",i.songs.length," songs)"]}),n.interestedCount>0&&(0,p.jsxs)("p",{className:"text-magenta font-bold",children:["\ud83d\udc65 ",n.interestedCount," ",1===n.interestedCount?"person":"people"," interested"]}),a&&(0,p.jsx)("p",{className:"text-red-400 font-bold mt-2",children:o?"\u26a0\ufe0f This gig was cancelled":"\u26a0\ufe0f This gig has ended"})]})]}),(null===(r=n.artistProfile)||void 0===r?void 0:r.socialMedia)&&(0,p.jsx)("div",{className:"mt-4 pt-4 border-t border-white/20",children:(0,p.jsx)(kg,{socialMedia:n.artistProfile.socialMedia,artistName:n.artistName})}),(0,p.jsxs)("div",{className:"flex flex-wrap gap-2",children:[!a&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("button",{onClick:()=>{Ne(n),xe(!0)},className:"btn btn-electric text-sm",title:"Edit gig details",children:[(0,p.jsx)(T,{size:16}),(0,p.jsx)("span",{children:"Edit"})]}),(0,p.jsx)("button",{onClick:()=>Nn(n.id),className:"btn btn-fire text-sm",title:"Delete this gig",children:(0,p.jsx)(N,{size:16})})]}),a&&(0,p.jsxs)("button",{onClick:()=>Nn(n.id),className:"btn btn-fire text-sm",title:"Delete this gig",children:[(0,p.jsx)(N,{size:16}),(0,p.jsx)("span",{children:"Delete"})]}),(0,p.jsxs)("button",{onClick:()=>Sn(n),disabled:a||o,className:"btn ".concat(a?"bg-gray-500 cursor-not-allowed":"btn-neon"," text-sm md:text-base"),title:a?"Cannot go live - gig has ended":"Go live with this gig",children:[(0,p.jsx)(C,{size:18}),(0,p.jsx)("span",{children:a?"Ended":"Go Live"})]})]})]})},n.id)})})()})]})})]})});const Mn=e=>{const t=[],n=[],r=[];e.forEach(e=>{var i;const s=null===(i=tt.songRequests)||void 0===i?void 0:i.some(t=>t.songId===e.id&&"accepted"===t.status),a=tt.votes[Math.floor(e.id)]||0;s?t.push(e):a>0?n.push(e):r.push(e)});const i=(e,t)=>{var n,r;const i=tt.votes[Math.floor(e.id)]||0,s=tt.votes[Math.floor(t.id)]||0;if(s!==i)return s-i;const a=null===(n=tt.lastVoteTime)||void 0===n?void 0:n[Math.floor(e.id)],o=null===(r=tt.lastVoteTime)||void 0===r?void 0:r[Math.floor(t.id)];return a||o?a?o?new Date(a)-new Date(o):-1:1:0};return t.sort(i),n.sort(i),[...t,...n,...r]};var Fn,Un,Vn,zn,qn,Bn,Gn,Wn,Hn,Kn;return"live"===J&&Ze?(0,p.jsxs)("div",{className:"rock-background min-h-screen p-4 pb-24 md:pb-4",children:[(0,p.jsxs)("div",{className:"max-w-4xl mx-auto pt-6",children:[(0,p.jsx)("div",{className:"gig-card border-2 border-neon mb-6",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,p.jsxs)("span",{className:"concert-heading text-xl tracking-wider",style:{color:"#39FF14"},children:[(0,p.jsx)("span",{className:"inline-block animate-pulse",style:{filter:"drop-shadow(0 0 8px #39FF14) drop-shadow(0 0 16px #39FF14)",textShadow:"0 0 10px #39FF14, 0 0 20px #39FF14"},children:"\ud83d\udfe2"})," LIVE NOW"]})}),(0,p.jsx)("h1",{className:"concert-heading text-3xl md:text-4xl text-white mb-2",children:Ze.venueName}),(0,p.jsxs)("p",{className:"text-electric text-lg font-bold",children:["\ud83c\udfb8 ",Ze.artistName]}),null!==rt&&(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsxs)("p",{className:"text-lg font-bold ".concat(rt<=10?"text-red-300 animate-pulse":"text-neon"),children:["\u23f0 Time Remaining: ",Math.floor(rt/60),"h ",rt%60,"m"]})})]}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)("button",{onClick:kn,className:"btn btn-electric",children:"\u23f1\ufe0f Add 1 Hour"}),(0,p.jsx)("button",{onClick:En,className:"btn btn-fire",children:"\u23f9\ufe0f End Gig"})]})]})}),(0,p.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,p.jsxs)("div",{className:"bg-pink-500/20 border-2 border-pink-400 rounded-xl p-4 text-center",children:[(0,p.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:(null===(Fn=tt.audienceTracking)||void 0===Fn?void 0:Fn.currentlyActive)||0}),(0,p.jsx)("div",{className:"text-pink-200 font-semibold text-xs",children:"\ud83d\udc40 Live Now"})]}),(0,p.jsxs)("div",{className:"bg-magenta/20 border-2 border-magenta rounded-xl p-4 text-center",children:[(0,p.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:(null===(Un=tt.audienceTracking)||void 0===Un?void 0:Un.totalJoins)||0}),(0,p.jsx)("div",{className:"text-magenta font-semibold text-xs",children:"\ud83c\udfab Total Joins"})]}),(0,p.jsxs)("div",{className:"bg-green-500/20 border-2 border-green-400 rounded-xl p-4 text-center",children:[(0,p.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:Object.values(tt.votes).reduce((e,t)=>e+t,0)}),(0,p.jsx)("div",{className:"text-green-200 font-semibold text-xs",children:"\u26a1 Total Votes"})]}),(0,p.jsxs)("div",{className:"bg-orange-500/20 border-2 border-orange-400 rounded-xl p-4 text-center",children:[(0,p.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:(tt.songRequests||[]).filter(e=>"pending"===e.status).length}),(0,p.jsx)("div",{className:"text-orange-200 font-semibold text-xs",children:"\ud83c\udfa4 Pending"})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,p.jsxs)("button",{onClick:()=>Gt(!0),className:"aspect-square rounded-2xl flex flex-col items-center justify-center gap-3 transition-all duration-300 hover:scale-105 border-2",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderColor:"#9f7aea",boxShadow:"0 0 20px rgba(159, 122, 234, 0.4)"},children:[(0,p.jsx)("span",{className:"text-6xl",children:"\ud83c\udfb5"}),(0,p.jsx)("span",{className:"text-white font-bold text-sm text-center",children:"Song Queue"}),(0,p.jsxs)("span",{className:"text-white/80 text-xs",children:[(tt.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))}).length," songs"]})]}),(0,p.jsxs)("button",{onClick:()=>_t(!0),className:"aspect-square rounded-2xl flex flex-col items-center justify-center gap-3 transition-all duration-300 hover:scale-105 border-2",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",borderColor:"#f5576c",boxShadow:"0 0 20px rgba(245, 87, 108, 0.4)"},children:[(0,p.jsx)("span",{className:"text-6xl",children:"\ud83c\udfa4"}),(0,p.jsx)("span",{className:"text-white font-bold text-sm text-center",children:"Requests"}),(0,p.jsxs)("span",{className:"text-white/80 text-xs",children:[(tt.songRequests||[]).filter(e=>"pending"===e.status).length," pending"]})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,p.jsxs)("button",{onClick:()=>Ht(!0),className:"aspect-square rounded-2xl flex flex-col items-center justify-center gap-3 transition-all duration-300 hover:scale-105 border-2",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",borderColor:"#38f9d7",boxShadow:"0 0 20px rgba(56, 249, 215, 0.4)"},children:[(0,p.jsx)("span",{className:"text-6xl",children:"\ud83d\udcda"}),(0,p.jsx)("span",{className:"text-white font-bold text-sm text-center",children:"Master Playlist"}),(0,p.jsxs)("span",{className:"text-white/80 text-xs",children:[(tt.masterPlaylist||[]).length," songs"]})]}),(0,p.jsxs)("button",{onClick:async()=>{const e=!(!1!==(null===tt||void 0===tt?void 0:tt.requestsEnabled));try{await(async(e,t)=>{try{const n=Tc(cg,"liveGigs",String(e));await Ru(n,{requestsEnabled:void 0===t.requestsEnabled||t.requestsEnabled,jukeboxMode:t.jukeboxMode||!1,jukeboxPrice:t.jukeboxPrice||0}),console.log("\u2705 Request settings updated:",t)}catch(n){throw console.error("\u274c Error updating settings:",n),n}})(Ze.id,{requestsEnabled:e,jukeboxMode:!1,jukeboxPrice:0}),nt(t=>o(o({},t),{},{requestsEnabled:e}));const t=Tc(cg,"liveGigs",String(Ze.id)),n=await ju(t);if(n.exists()){const e=n.data();nt(t=>o(o({},t),{},{requestsEnabled:e.requestsEnabled}))}alert(e?"\u2705 Song requests are now ENABLED":"\u274c Song requests are now DISABLED")}catch(t){console.error("\u274c Toggle error:",t),alert("Error: "+t.message)}},className:"aspect-square rounded-2xl flex flex-col items-center justify-center gap-3 transition-all duration-300 hover:scale-105 border-2",style:{background:!1!==(null===tt||void 0===tt?void 0:tt.requestsEnabled)?"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)":"linear-gradient(135deg, #6c757d 0%, #495057 100%)",borderColor:!1!==(null===tt||void 0===tt?void 0:tt.requestsEnabled)?"#00f2fe":"#6c757d",boxShadow:!1!==(null===tt||void 0===tt?void 0:tt.requestsEnabled)?"0 0 20px rgba(0, 242, 254, 0.4)":"none"},children:[(0,p.jsx)("span",{className:"text-6xl",children:!1!==(null===tt||void 0===tt?void 0:tt.requestsEnabled)?"\ud83d\udfe2":"\u26ab"}),(0,p.jsx)("span",{className:"text-white font-bold text-sm text-center",children:"Requests"}),(0,p.jsx)("span",{className:"text-white/80 text-xs font-bold",children:!1!==(null===tt||void 0===tt?void 0:tt.requestsEnabled)?"ON":"OFF"})]})]})]}),Bt&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-black border-2 border-electric rounded-2xl max-w-2xl w-full max-h-[85vh] flex flex-col relative overflow-hidden",children:[(0,p.jsx)("button",{onClick:()=>Gt(!1),className:"absolute top-2 right-2 text-white hover:text-electric transition-colors text-2xl font-bold z-10 w-8 h-8 flex items-center justify-center",children:"\xd7"}),(0,p.jsx)("div",{className:"pt-3 pb-2 border-b border-white/20",children:(0,p.jsx)("h2",{className:"text-center text-electric font-black text-lg tracking-wider",children:"\ud83c\udfb5 SONG QUEUE"})}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto p-3",children:[(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 mb-2 px-1",children:[(0,p.jsx)("span",{className:"text-neon text-sm",children:"\u25b6\ufe0f"}),(0,p.jsxs)("span",{className:"text-neon font-bold text-sm",children:["Ready to Play (",(tt.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))}).length,")"]})]}),(0,p.jsx)("div",{className:"space-y-2",children:Mn((tt.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))})).map((e,t)=>{const n=tt.votes[Math.floor(e.id)]||0,r=e.title.split(" ").slice(0,5).join(" ")+(e.title.split(" ").length>5?"...":"");return(0,p.jsxs)("div",{className:"bg-green-500/10 border border-green-400/50 rounded-lg p-2",children:[(0,p.jsxs)("div",{className:"flex justify-between items-start gap-2 mb-1",children:[(0,p.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[(0,p.jsx)("span",{className:"text-green-300 font-bold text-sm flex-shrink-0",children:t+1}),(0,p.jsx)("div",{className:"text-white font-semibold text-sm leading-tight truncate",children:r})]}),(0,p.jsx)("button",{onClick:async()=>{if(window.confirm('Mark "'.concat(e.title,'" as played?')))try{const t=Tc(cg,"liveGigs",String(Ze.id));await Ru(t,{playedSongs:Vu(e.id)}),alert("\u2705 Song marked as played!")}catch(t){alert("Error: "+t.message)}},className:"bg-cyan-400 hover:bg-cyan-500 text-black font-black text-xs px-3 py-1.5 rounded shadow-lg flex-shrink-0",children:"Mark Played"})]}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,p.jsx)("div",{className:"text-green-200 text-xs truncate flex-1 pl-6",children:e.artist}),(0,p.jsxs)("div",{className:"text-pink-300 font-bold text-xs flex-shrink-0",children:["\u26a1 ",n]})]})]},e.id)})}),0===(tt.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))}).length&&(0,p.jsx)("p",{className:"text-gray-400 text-center py-6 text-sm",children:"All songs have been played!"})]}),tt.playedSongs&&tt.playedSongs.length>0&&(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 mb-2 px-1",children:[(0,p.jsx)("span",{className:"text-gray-400 text-sm",children:"\u2705"}),(0,p.jsxs)("span",{className:"text-gray-400 font-bold text-sm",children:["Already Played (",tt.playedSongs.length,")"]})]}),(0,p.jsx)("div",{className:"space-y-2",children:(tt.queuedSongs||[]).filter(e=>tt.playedSongs.includes(e.id)).map((e,t)=>{const n=tt.votes[Math.floor(e.id)]||0,r=e.title.split(" ").slice(0,5).join(" ")+(e.title.split(" ").length>5?"...":"");return(0,p.jsxs)("div",{className:"bg-gray-500/10 border border-gray-600/50 rounded-lg p-2 opacity-60",children:[(0,p.jsxs)("div",{className:"flex justify-between items-start gap-2 mb-1",children:[(0,p.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[(0,p.jsx)("span",{className:"text-gray-400 text-sm flex-shrink-0",children:"\u2705"}),(0,p.jsx)("div",{className:"text-gray-300 font-semibold text-sm leading-tight truncate line-through",children:r})]}),(0,p.jsx)("div",{className:"text-gray-400 text-xs flex-shrink-0 px-2",children:"Played"})]}),(0,p.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,p.jsx)("div",{className:"text-gray-400 text-xs truncate flex-1 pl-6",children:e.artist}),(0,p.jsxs)("div",{className:"text-gray-500 text-xs flex-shrink-0",children:["\u26a1 ",n]})]})]},e.id)})})]})]}),(0,p.jsx)("div",{className:"p-3 border-t border-white/20",children:(0,p.jsx)("button",{onClick:()=>Gt(!1),className:"w-full bg-electric hover:bg-electric/80 text-black font-bold py-2 rounded-lg text-sm",children:"CLOSE"})})]})}),Et&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-2 z-50",children:(0,p.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-black border-2 border-electric rounded-2xl max-w-2xl w-full max-h-[85vh] flex flex-col relative overflow-hidden",children:[(0,p.jsx)("button",{onClick:()=>_t(!1),className:"absolute top-2 right-2 text-white hover:text-electric text-2xl font-bold z-10 w-8 h-8 flex items-center justify-center",children:"\xd7"}),(0,p.jsxs)("div",{className:"pt-3 pb-2 border-b border-white/20",children:[(0,p.jsx)("h2",{className:"text-center text-electric font-black text-lg tracking-wider",children:"\ud83c\udfa4 SONG REQUESTS"}),(0,p.jsxs)("p",{className:"text-center text-white/60 text-xs mt-1",children:[((null===tt||void 0===tt?void 0:tt.songRequests)||[]).length," total request",1!==((null===tt||void 0===tt?void 0:tt.songRequests)||[]).length?"s":""]})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:null!==tt&&void 0!==tt&&tt.songRequests&&0!==tt.songRequests.length?(0,p.jsx)("div",{className:"space-y-2",children:(Vn=tt.songRequests,Vn&&0!==Vn.length?[...Vn].sort((e,t)=>{var n,r;if("pending"===e.status&&"pending"!==t.status)return-1;if("pending"!==e.status&&"pending"===t.status)return 1;if(e.isPaid&&!t.isPaid)return-1;if(!e.isPaid&&t.isPaid)return 1;if(e.isPaid&&t.isPaid&&e.amount!==t.amount)return t.amount-e.amount;const i=(null===(n=e.timestamp)||void 0===n?void 0:n.seconds)||0;return((null===(r=t.timestamp)||void 0===r?void 0:r.seconds)||0)-i}):[]).map((e,t)=>{const n=e.songTitle.split(" ").slice(0,5).join(" ")+(e.songTitle.split(" ").length>5?"...":"");return(0,p.jsxs)("div",{className:"rounded-lg p-2 border ".concat("pending"===e.status?"bg-purple-500/10 border-purple-400/50":"accepted"===e.status?"bg-green-500/10 border-green-400/50":"bg-gray-500/10 border-gray-600/50"),children:[(0,p.jsxs)("div",{className:"flex items-start gap-2 mb-1",children:[(0,p.jsx)("span",{className:"font-bold text-sm flex-shrink-0 ".concat("pending"===e.status?"text-purple-300":"accepted"===e.status?"text-green-300":"text-gray-400"),children:t+1}),(0,p.jsx)("div",{className:"text-white font-semibold text-sm leading-tight flex-1 min-w-0",children:n})]}),(0,p.jsx)("div",{className:"text-xs mb-1 pl-6 ".concat("pending"===e.status?"text-purple-200":"accepted"===e.status?"text-green-200":"text-gray-400"),children:e.songArtist}),(0,p.jsx)("div",{className:"text-xs mb-2 pl-6 flex items-center gap-1 ".concat("pending"===e.status?"text-purple-300/80":"accepted"===e.status?"text-green-300/80":"text-gray-400/80"),children:(0,p.jsxs)("span",{children:["\ud83d\udc64 ",e.requesterName]})}),e.message&&e.message.trim()&&(0,p.jsx)("div",{className:"bg-white/5 border border-white/10 rounded px-2 py-1.5 mb-2 ml-6",children:(0,p.jsxs)("div",{className:"text-cyan-300 text-xs",children:["\ud83d\udcac ",(0,p.jsxs)("span",{className:"italic",children:['"',e.message,'"']})]})}),(0,p.jsxs)("div",{className:"flex gap-2 pl-6",children:["pending"===e.status&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:async()=>{try{await(async(e,t)=>{try{const n=Tc(cg,"liveGigs",String(e)),r=await ju(n);if(!r.exists())throw new Error("Live gig not found");const i=r.data(),s=i.songRequests||[],a=i.queuedSongs||[],l=i.maxQueueSize||20,c=i.masterPlaylist||[],u=i.votes||{},d=s.find(e=>e.id===t);if(!d)throw new Error("Request not found");const h=c.find(e=>e.id===d.songId);if(!h)throw new Error("Requested song not found in master playlist");if(a.some(e=>e.id===h.id)){console.log("\u26a0\ufe0f Song already in queue, just marking request as accepted");const e=s.map(e=>e.id===t?o(o({},e),{},{status:"accepted"}):e);return void await Ru(n,{songRequests:e})}let f=[...a];const g=i.playedSongs||[],p=f.filter(e=>!g.includes(e.id));if(f.length>=l&&p.length>0){console.log("\ud83d\uddd1\ufe0f Queue at capacity, removing last unplayed song");const e=f.map(e=>e.id).lastIndexOf(p[p.length-1].id);f.splice(e,1)}f.push(h);const m=s.filter(e=>"accepted"===e.status).map(e=>e.songId);f.sort((e,t)=>{const n=m.includes(e.id),r=m.includes(t.id),i=u[Math.floor(e.id)]||0,s=u[Math.floor(t.id)]||0;return n&&!r?-1:!n&&r?1:s!==i?s-i:0});const v=s.map(e=>e.id===t?o(o({},e),{},{status:"accepted"}):e);await Ru(n,{songRequests:v,queuedSongs:f}),console.log("\u2705 Song request accepted and added to queue:",h.title)}catch(n){throw console.error("\u274c Error accepting request:",n),n}})(Ze.id,e.id),alert("\u2705 Request accepted!")}catch(t){alert("Error: "+t.message)}},className:"bg-green-500 hover:bg-green-600 text-white font-bold text-xs px-3 py-1.5 rounded shadow-lg transition-all duration-150 flex items-center gap-1",children:"\u2713 ACCEPT"}),(0,p.jsx)("button",{onClick:async()=>{try{await(async(e,t)=>{try{const n=Tc(cg,"liveGigs",String(e)),r=await ju(n);if(!r.exists())throw new Error("Live gig not found");const i=(r.data().songRequests||[]).map(e=>e.id===t?o(o({},e),{},{status:"rejected"}):e);await Ru(n,{songRequests:i}),console.log("\u274c Song request rejected:",t)}catch(n){throw console.error("\u274c Error rejecting request:",n),n}})(Ze.id,e.id),alert("\u274c Request rejected")}catch(t){alert("Error: "+t.message)}},className:"bg-red-500 hover:bg-red-600 text-white font-bold text-xs px-3 py-1.5 rounded shadow-lg transition-all duration-150 flex items-center gap-1",children:"\u2717 REJECT"})]}),"accepted"===e.status&&(0,p.jsx)("span",{className:"text-green-400 font-bold text-xs",children:"\u2713 ACCEPTED"}),"rejected"===e.status&&(0,p.jsx)("span",{className:"text-red-400 font-bold text-xs",children:"\u2717 REJECTED"})]})]},e.id)})}):(0,p.jsxs)("div",{className:"text-center text-white/60 py-8",children:[(0,p.jsx)("p",{className:"text-4xl mb-2",children:"\ud83d\udced"}),(0,p.jsx)("p",{className:"text-sm",children:"No song requests yet"}),(0,p.jsx)("p",{className:"text-xs mt-2 text-white/40",children:!1!==(null===tt||void 0===tt?void 0:tt.requestsEnabled)?"Song requests are enabled":"Song requests are currently disabled"})]})})]})}),Wt&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"gig-card max-w-2xl w-full border-2 border-neon max-h-[85vh] flex flex-col",children:[(0,p.jsx)("button",{onClick:()=>Ht(!1),className:"absolute top-4 right-4 text-white hover:text-neon transition font-bold text-3xl z-10",children:"\xd7"}),(0,p.jsxs)("div",{className:"px-6 pt-6 pb-4 border-b border-white/10",children:[(0,p.jsx)("h2",{className:"concert-heading text-2xl text-neon text-center",children:"\ud83d\udcda Master Playlist"}),(0,p.jsx)("p",{className:"text-gray-light text-sm text-center mt-2",children:"Add songs from your master playlist to the queue"})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:tt.masterPlaylist&&tt.masterPlaylist.length>0?(0,p.jsx)("div",{className:"space-y-2",children:tt.masterPlaylist.filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))}).map(e=>{const t=(tt.queuedSongs||[]).some(t=>t.id===e.id),n=tt.votes[Math.floor(e.id)]||0;return(0,p.jsxs)("div",{className:"p-4 rounded-lg flex justify-between items-center ".concat(t?"bg-green-500/20 border-2 border-green-400":"bg-white/5 border-2 border-white/10 hover:border-neon/50"),children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("div",{className:"text-white font-semibold text-base",children:e.title}),(0,p.jsx)("div",{className:"text-gray-400 text-sm",children:e.artist}),n>0&&(0,p.jsxs)("div",{className:"text-pink-300 text-sm mt-1",children:["\u26a1 ",n," votes"]})]}),t?(0,p.jsx)("div",{className:"px-6 py-3 bg-green-500/50 text-green-200 rounded-lg font-bold text-sm",children:"\u2713 In Queue"}):(0,p.jsx)("button",{onClick:async()=>{try{const t=Tc(cg,"liveGigs",String(Ze.id)),n=await ju(t),r=n.data().queuedSongs||[],i=n.data().votes||{},s=[...r,e].sort((e,t)=>{const n=i[Math.floor(e.id)]||0;return(i[Math.floor(t.id)]||0)-n});await Ru(t,{queuedSongs:s}),alert('\u2705 "'.concat(e.title,'" added to queue!'))}catch(t){alert("Error: "+t.message)}},className:"btn btn-neon text-sm whitespace-nowrap",children:"\u2795 Add to Queue"})]},e.id)})}):(0,p.jsxs)("div",{className:"text-center py-12",children:[(0,p.jsx)("span",{className:"text-6xl mb-4 block",children:"\ud83d\udcda"}),(0,p.jsx)("p",{className:"text-gray-400 text-lg",children:"No songs in master playlist"})]})}),(0,p.jsx)("div",{className:"px-6 py-4 border-t border-white/10",children:(0,p.jsx)("button",{onClick:()=>Ht(!1),className:"w-full btn btn-electric",children:"Close"})})]})})]}):"audience"===J&&Ze?(!Xt&&Ze.artistId&&(console.log("\ud83d\udd25 LOADING ARTIST PROFILE NOW:",Ze.artistId),xg(Ze.artistId).then(e=>{console.log("\u2705 PROFILE LOADED:",e),$t(e)})),console.log("\ud83c\udfb8 RENDERING AUDIENCE MODE"),console.log("\ud83c\udfb8 liveGig.artistId:",Ze.artistId),console.log("\ud83c\udfb8 artistProfile:",Xt),console.log("\ud83c\udfb8 Facebook URL:",null===Xt||void 0===Xt||null===(zn=Xt.socialMedia)||void 0===zn?void 0:zn.facebook),(0,p.jsxs)("div",{className:"rock-background min-h-screen p-4",children:[(0,p.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,p.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-black/95 backdrop-blur-sm z-50 p-4 border-b border-electric/30",children:(0,p.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,p.jsx)("div",{className:"flex items-center justify-center gap-3 mb-2",children:(0,p.jsxs)("span",{className:"concert-heading text-xl tracking-wider",style:{color:"#39FF14"},children:[(0,p.jsx)("span",{className:"inline-block animate-pulse",style:{filter:"drop-shadow(0 0 8px #39FF14) drop-shadow(0 0 16px #39FF14) drop-shadow(0 0 24px #39FF14) drop-shadow(0 0 32px #0f0)",textShadow:"0 0 10px #39FF14, 0 0 20px #39FF14, 0 0 30px #39FF14, 0 0 40px #0f0, 0 0 70px #0f0, 0 0 100px #0f0"},children:"\ud83d\udfe2"})," LIVE NOW"]})}),(0,p.jsx)("h1",{className:"concert-heading text-3xl md:text-4xl text-white text-center",children:Ze.artistName})]})}),(0,p.jsxs)("div",{className:"pt-32 pb-8",children:[(0,p.jsx)("button",{onClick:()=>Gt(!0),className:"w-3/4 mx-auto block bg-gradient-to-r from-cyan-500 via-purple-600 to-magenta-600 text-white py-3 md:py-4 px-8 rounded-xl font-bold text-lg md:text-xl hover:scale-105 transition-transform duration-200 mb-10 mt-12",style:{boxShadow:"0 0 15px rgba(0, 255, 255, 0.4), 0 0 30px rgba(255, 0, 255, 0.3)",textShadow:"0 0 10px rgba(0, 0, 0, 0.8), 0 2px 4px rgba(0, 0, 0, 0.6)",letterSpacing:"1px"},children:"View Gig Playlist"}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,p.jsx)("button",{onClick:()=>{if(!t)return alert("Please sign in to request a song!"),void O(!0);_t(!0)},className:"aspect-square flex items-center justify-center hover:scale-105 transition-all duration-300 bg-transparent p-0 m-0 border-0",children:(0,p.jsx)("img",{src:c,alt:"Request Song",className:"w-full h-full object-cover drop-shadow-2xl block"})}),(0,p.jsx)("button",{onClick:()=>{if(!t)return alert("Please sign in to vote!"),void O(!0);Ht(!0)},className:"aspect-square flex items-center justify-center hover:scale-105 transition-all duration-300 bg-transparent p-0 m-0 border-0",children:(0,p.jsx)("img",{src:u,alt:"Vote",className:"w-full h-full object-cover drop-shadow-2xl block"})}),(0,p.jsx)("button",{onClick:()=>{if(!t)return alert("Please sign in to rate the artist!"),void O(!0);Rt(!0)},className:"aspect-square flex items-center justify-center hover:scale-105 transition-all duration-300 bg-transparent p-0 m-0 border-0",children:(0,p.jsx)("img",{src:h,alt:"Rate Artist",className:"w-full h-full object-cover drop-shadow-2xl block"})})]}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,p.jsx)("button",{onClick:()=>Jt(!0),className:"aspect-square flex items-center justify-center hover:scale-105 transition-all duration-300 bg-transparent p-0 m-0 border-0",children:(0,p.jsx)("img",{src:d,alt:"Artist Profile",className:"w-full h-full object-cover drop-shadow-2xl block"})}),(0,p.jsx)("button",{disabled:!0,className:"aspect-square flex items-center justify-center transition-all duration-300 bg-transparent p-0 m-0 border-0 opacity-50 cursor-not-allowed",children:(0,p.jsx)("img",{src:f,alt:"Tip Jar",className:"w-full h-full object-cover drop-shadow-2xl block"})}),(0,p.jsx)("button",{disabled:!0,className:"aspect-square flex items-center justify-center transition-all duration-300 bg-transparent p-0 m-0 border-0 opacity-50 cursor-not-allowed",children:(0,p.jsx)("img",{src:g,alt:"Support Artist",className:"w-full h-full object-cover drop-shadow-2xl block"})})]}),(0,p.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-white/20 rounded-2xl p-4 mb-4",children:[(0,p.jsx)("h3",{className:"text-center text-electric font-bold text-base mb-3 tracking-wider drop-shadow-lg",children:"\ud83c\udfb8 CONNECT WITH THE ARTIST"}),(0,p.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[null!==Xt&&void 0!==Xt&&null!==(qn=Xt.socialMedia)&&void 0!==qn&&qn.instagram?(0,p.jsx)("a",{href:Xt.socialMedia.instagram.startsWith("http")?Xt.socialMedia.instagram:"https://instagram.com/".concat(Xt.socialMedia.instagram.replace("@","")),target:"_blank",rel:"noopener noreferrer",className:"aspect-square bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center hover:scale-110 transition-all duration-300",style:{boxShadow:"0 0 15px rgba(219,39,119,0.5), 0 0 30px rgba(219,39,119,0.3)"},children:(0,p.jsx)(W,{className:"text-white text-3xl drop-shadow-xl"})}):(0,p.jsx)("div",{className:"aspect-square bg-gray-800/40 border-2 border-gray-600/30 rounded-xl flex items-center justify-center opacity-40",children:(0,p.jsx)(W,{className:"text-gray-500 text-3xl"})}),null!==Xt&&void 0!==Xt&&null!==(Bn=Xt.socialMedia)&&void 0!==Bn&&Bn.facebook?(0,p.jsx)("a",{href:Xt.socialMedia.facebook.includes("facebook.com")?Xt.socialMedia.facebook:"https://facebook.com/".concat(Xt.socialMedia.facebook),target:"_blank",rel:"noopener noreferrer",className:"aspect-square bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl flex items-center justify-center hover:scale-110 transition-all duration-300",style:{boxShadow:"0 0 15px rgba(37,99,235,0.5), 0 0 30px rgba(37,99,235,0.3)"},children:(0,p.jsx)(G,{className:"text-white text-3xl drop-shadow-xl"})}):(0,p.jsx)("div",{className:"aspect-square bg-gray-800/40 border-2 border-gray-600/30 rounded-xl flex items-center justify-center opacity-40",children:(0,p.jsx)(G,{className:"text-gray-500 text-3xl"})}),null!==Xt&&void 0!==Xt&&null!==(Gn=Xt.socialMedia)&&void 0!==Gn&&Gn.youtube?(0,p.jsx)("a",{href:Xt.socialMedia.youtube.includes("youtube.com")?Xt.socialMedia.youtube:"https://youtube.com/".concat(Xt.socialMedia.youtube),target:"_blank",rel:"noopener noreferrer",className:"aspect-square bg-gradient-to-br from-red-600 to-red-800 rounded-xl flex items-center justify-center hover:scale-110 transition-all duration-300",style:{boxShadow:"0 0 15px rgba(220,38,38,0.5), 0 0 30px rgba(220,38,38,0.3)"},children:(0,p.jsx)(K,{className:"text-white text-3xl drop-shadow-xl"})}):(0,p.jsx)("div",{className:"aspect-square bg-gray-800/40 border-2 border-gray-600/30 rounded-xl flex items-center justify-center opacity-40",children:(0,p.jsx)(K,{className:"text-gray-500 text-3xl"})}),null!==Xt&&void 0!==Xt&&null!==(Wn=Xt.socialMedia)&&void 0!==Wn&&Wn.linkedin?(0,p.jsx)("a",{href:Xt.socialMedia.linkedin.includes("linkedin.com")?Xt.socialMedia.linkedin:"https://linkedin.com/in/".concat(Xt.socialMedia.linkedin),target:"_blank",rel:"noopener noreferrer",className:"aspect-square bg-gradient-to-br from-blue-700 to-blue-900 rounded-xl flex items-center justify-center hover:scale-110 transition-all duration-300",style:{boxShadow:"0 0 15px rgba(29,78,216,0.5), 0 0 30px rgba(29,78,216,0.3)"},children:(0,p.jsx)(H,{className:"text-white text-3xl drop-shadow-xl"})}):(0,p.jsx)("div",{className:"aspect-square bg-gray-800/40 border-2 border-gray-600/30 rounded-xl flex items-center justify-center opacity-40",children:(0,p.jsx)(H,{className:"text-gray-500 text-3xl"})})]})]}),(0,p.jsx)("button",{onClick:()=>X("discover"),className:"w-full py-4 bg-gradient-to-r from-gray-800 to-gray-900 border-2 border-gray-700 rounded-xl text-white font-bold hover:scale-105 transition-all duration-300",style:{boxShadow:"0 0 15px rgba(107,114,128,0.3)"},children:"\u2190 Back to Discovery"})]})]}),Wt&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"gig-card max-w-md w-full border-2 border-magenta relative max-h-[85vh] flex flex-col",children:[(0,p.jsx)("button",{onClick:()=>Ht(!1),className:"absolute top-0 right-0 text-white hover:text-neon transition font-bold text-3xl leading-none z-20 p-2",style:{fontWeight:"900"},children:"\xd7"}),(0,p.jsxs)("div",{className:"px-6 pt-8 pb-1",children:[(0,p.jsxs)("h2",{className:"concert-heading text-base sm:text-xl text-magenta text-center whitespace-nowrap flex items-center justify-center gap-2",children:[(0,p.jsx)("span",{className:"text-2xl sm:text-3xl",children:"\u26a1"}),(0,p.jsx)("span",{children:"Vote For Songs"})]}),(0,p.jsx)("p",{className:"text-gray-light text-xs sm:text-sm mt-1 text-center",children:"Vote For Song To Prioritize It Or Add To Song Queue"})]}),(0,p.jsx)("div",{className:"px-6 pb-3 pt-2",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,p.jsx)("input",{type:"text",placeholder:"Search songs or artists...",value:v,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-black/50 border border-magenta/30 rounded-lg text-white placeholder-gray-500 focus:border-magenta focus:outline-none text-sm"})]})}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 pb-4",children:[tt.queuedSongs&&tt.queuedSongs.length>0&&(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,p.jsxs)("h3",{className:"text-sm font-bold text-electric flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udccb"}),(0,p.jsx)("span",{children:"Tonight's Setlist"})]}),(0,p.jsx)("p",{className:"text-[9px] text-gray-400 italic",children:"Click song name to vote"})]}),(0,p.jsx)("div",{className:"space-y-2",children:tt.queuedSongs.filter(e=>{var t;if(null===(t=tt.playedSongs)||void 0===t||!t.includes(e.id)){if(!v)return!0;const t=v.toLowerCase();return e.title.toLowerCase().includes(t)||e.artist.toLowerCase().includes(t)}return!1}).map((e,t)=>{const n=tt.votes[Math.floor(e.id)]||0,r=Kt&&Kt[e.id],i=e.title.split(" "),s=i.length>5?i.slice(0,5).join(" ")+"...":e.title,a=e.artist.split(" "),o=a.length>2?a.slice(0,2).join(" ")+"...":e.artist;return(0,p.jsx)("button",{onClick:()=>Cn(e.id),disabled:r,className:"w-full p-2 rounded-lg transition bg-white/5 border border-white/10 hover:bg-white/10 hover:border-magenta disabled:opacity-60 disabled:cursor-not-allowed",children:(0,p.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,p.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center font-bold text-[10px] bg-electric/30 text-electric",children:t+1}),(0,p.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,p.jsx)("p",{className:"font-bold text-[11px] leading-tight text-white",children:s}),(0,p.jsx)("p",{className:"text-gray-400 text-[9px] leading-tight",children:o})]}),n>0&&(0,p.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-0.5 pl-4",children:[(0,p.jsx)("span",{className:"text-magenta text-[10px]",children:"\u26a1"}),(0,p.jsx)("span",{className:"font-bold text-[10px] text-magenta",children:n})]})]})},e.id)})})]}),Ze.masterPlaylist&&Ze.masterPlaylist.length>0&&(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,p.jsxs)("h3",{className:"text-sm font-bold text-electric flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udcda"}),(0,p.jsx)("span",{children:"More Songs Available"})]}),(0,p.jsx)("p",{className:"text-[9px] text-gray-400 italic",children:"Click song name to vote"})]}),(0,p.jsx)("div",{className:"space-y-2",children:Ze.masterPlaylist.filter(e=>{var t,n;const r=null===(t=tt.queuedSongs)||void 0===t?void 0:t.some(t=>t.id===e.id),i=null===(n=tt.playedSongs)||void 0===n?void 0:n.includes(e.id),s=!v||e.title.toLowerCase().includes(v.toLowerCase())||e.artist.toLowerCase().includes(v.toLowerCase());return!r&&!i&&s}).slice(0,20).map((e,t)=>{var n;const r=tt.votes[Math.floor(e.id)]||0,i=Kt&&Kt[e.id],s=e.title.split(" "),a=s.length>5?s.slice(0,5).join(" ")+"...":e.title,o=e.artist.split(" "),l=o.length>2?o.slice(0,2).join(" ")+"...":e.artist,c=(null===(n=tt.queuedSongs)||void 0===n?void 0:n.filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))&&(!v||e.title.toLowerCase().includes(v.toLowerCase())||e.artist.toLowerCase().includes(v.toLowerCase()))}).length)||0;return(0,p.jsx)("button",{onClick:()=>Cn(e.id),disabled:i,className:"w-full p-2 rounded-lg transition bg-white/5 border border-white/10 hover:bg-white/10 hover:border-magenta disabled:opacity-60 disabled:cursor-not-allowed",children:(0,p.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,p.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center font-bold text-[10px] bg-electric/30 text-electric",children:c+t+1}),(0,p.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,p.jsx)("p",{className:"font-bold text-[11px] leading-tight text-white",children:a}),(0,p.jsx)("p",{className:"text-gray-400 text-[9px] leading-tight",children:l})]}),r>0&&(0,p.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-0.5 pl-4",children:[(0,p.jsx)("span",{className:"text-magenta text-[10px]",children:"\u26a1"}),(0,p.jsx)("span",{className:"font-bold text-[10px] text-magenta",children:r})]})]})},e.id)})})]}),(!tt.queuedSongs||0===tt.queuedSongs.length)&&(!Ze.masterPlaylist||0===Ze.masterPlaylist.length)&&(0,p.jsx)("div",{className:"text-center py-8",children:(0,p.jsx)("p",{className:"text-gray-400 text-sm",children:"No songs available for voting"})})]}),(0,p.jsx)("div",{className:"px-6 py-4 border-t border-white/10",children:(0,p.jsx)("p",{className:"text-gray-400 text-xs text-center",children:Kt&&Object.keys(Kt).length>0?"You've Voted For ".concat(Object.keys(Kt).length," Song").concat(Object.keys(Kt).length>1?"s":""):"Tap Any Song To Vote"})})]})}),Yt&&Xt&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,p.jsxs)("div",{className:"rock-background gig-card border-2 border-electric max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"sticky top-0 bg-black/95 px-6 pt-4 pb-2 border-b border-white/10 z-10",children:[(0,p.jsx)("div",{className:"flex justify-end mb-2",children:(0,p.jsx)("button",{onClick:()=>Jt(!1),className:"text-white hover:text-neon transition font-bold text-3xl leading-none",style:{fontWeight:"900"},children:"\xd7"})}),(0,p.jsxs)("h2",{className:"concert-heading text-base sm:text-2xl text-electric text-center whitespace-nowrap flex items-center justify-center gap-2 pb-3",children:[(0,p.jsx)("span",{className:"text-2xl sm:text-3xl",children:"\ud83c\udfb8"}),(0,p.jsx)("span",{children:"Artist Profile"})]})]}),(0,p.jsxs)("div",{className:"p-6",children:[(0,p.jsxs)("div",{className:"text-center mb-6",children:[(0,p.jsx)("h1",{className:"concert-heading text-2xl sm:text-4xl text-white mb-3",children:Xt.artistName}),(0,p.jsxs)("div",{className:"flex flex-wrap justify-center gap-3",children:[(0,p.jsxs)("span",{className:"px-4 py-2 bg-magenta/20 text-magenta rounded-full text-sm font-bold border border-magenta",children:["\ud83c\udfb5 ",Xt.genre]}),(0,p.jsxs)("span",{className:"px-4 py-2 bg-electric/20 text-electric rounded-full text-sm font-bold border border-electric",children:["\ud83d\udccd ",Xt.location]})]})]}),(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-electric mb-3 text-center",children:"About"}),(0,p.jsx)("p",{className:"text-gray-light leading-relaxed text-left",children:Xt.bio})]}),Xt.socialMedia&&(0,p.jsx)("div",{className:"mb-6",children:(0,p.jsx)(kg,{socialMedia:Xt.socialMedia,artistName:Xt.artistName})}),(0,p.jsxs)("button",{disabled:!0,className:"w-full py-4 bg-gradient-to-r from-neon/20 to-electric/20 border-2 border-neon/50 text-white rounded-xl font-bold text-lg opacity-50 cursor-not-allowed",children:[(0,p.jsx)(A,{size:24,className:"inline mr-2"}),"Support Artist (Coming Soon)"]})]})]})}),Et&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"gig-card max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-magenta",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,p.jsxs)("div",{className:"flex-1 text-center",children:[(0,p.jsx)("h2",{className:"concert-heading text-3xl text-magenta",children:"Request A Song"}),(0,p.jsx)("p",{className:"text-gray-light text-sm mt-2",children:"Send Your Song Request To The Artist"})]}),(0,p.jsx)("button",{onClick:()=>{_t(!1),It(null),jt("")},className:"text-white hover:text-neon transition",children:(0,p.jsx)(x,{size:32})})]}),(0,p.jsxs)("div",{className:"mb-6 p-4 bg-blue-500/20 border border-blue-400 rounded-lg",children:[(0,p.jsxs)("h4",{className:"text-blue-300 font-bold mb-3 flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\ud83d\udcca"}),(0,p.jsx)("span",{children:"Queue Status"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-light",children:"Queue Capacity"}),(0,p.jsxs)("p",{className:"text-white font-bold text-lg",children:[(null===(Hn=tt.queuedSongs)||void 0===Hn?void 0:Hn.length)||0,"/",tt.songLimit||20]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-light",children:"Songs Played"}),(0,p.jsx)("p",{className:"text-white font-bold text-lg",children:(null===(Kn=tt.playedSongs)||void 0===Kn?void 0:Kn.length)||0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-light",children:"Songs Left"}),(0,p.jsx)("p",{className:"text-white font-bold text-lg",children:(tt.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))}).length})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-gray-light",children:"Pending Requests"}),(0,p.jsx)("p",{className:"text-white font-bold text-lg",children:(tt.songRequests||[]).filter(e=>"pending"===e.status).length})]})]}),(0,p.jsx)("div",{className:"mt-3",children:(e=>{const t=tt.songLimit||20,n=(null===(e=tt.queuedSongs)||void 0===e?void 0:e.length)||0,r=(tt.queuedSongs||[]).filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))}).length;return n>=t?(0,p.jsxs)("p",{className:"text-green-300 text-sm flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\u2705"}),(0,p.jsx)("span",{children:"You can still request! If accepted, the artist will make room in the queue."})]}):r<=3?(0,p.jsxs)("p",{className:"text-yellow-300 text-sm flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\u26a0\ufe0f"}),(0,p.jsxs)("span",{children:["Only ",r," songs left - your request may not be played tonight."]})]}):(0,p.jsxs)("p",{className:"text-green-300 text-sm flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\u2705"}),(0,p.jsx)("span",{children:"Queue has space - great time to request!"})]})})()})]}),(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d Search by song or artist name...",value:v,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 rounded-lg bg-white/10 text-white placeholder-white/40 border border-magenta/30 focus:border-magenta focus:outline-none"})}),(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsx)("h3",{className:"text-white font-bold text-xl mb-3",children:"Select A Song"}),(0,p.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto bg-black/30 rounded-lg p-3 border border-white/10",children:Ze.masterPlaylist&&Ze.masterPlaylist.length>0?Ze.masterPlaylist.filter(e=>{var t;if(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))return!1;const n=(tt.queuedSongs||[]).some(t=>t.id===e.id),r=!v||e.title.toLowerCase().includes(v.toLowerCase())||e.artist.toLowerCase().includes(v.toLowerCase());return!n&&r}).map(e=>(0,p.jsx)("div",{onClick:()=>It(e),className:"p-3 rounded-lg cursor-pointer transition border-2 ".concat((null===Tt||void 0===Tt?void 0:Tt.id)===e.id?"bg-magenta/30 border-magenta":"bg-white/5 border-white/10 hover:border-electric/50"),children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)("div",{className:"flex-1 min-w-0",children:(0,p.jsxs)("div",{className:"text-white font-bold truncate",children:[(e=>{const t=e.split(" ");return t.length<=5?e:t.slice(0,5).join(" ")+"..."})(e.title)," - ",e.artist]})}),(null===Tt||void 0===Tt?void 0:Tt.id)===e.id&&(0,p.jsx)("div",{className:"text-magenta text-2xl flex-shrink-0",children:"\u2713"})]})},e.id)):(0,p.jsx)("div",{className:"text-center py-8 text-gray-light",children:"No songs available for request"})}),(0,p.jsx)("p",{className:"text-gray-light text-sm mt-2 italic",children:"\ud83d\udca1 Songs already in tonight's setlist can only be voted for, not requested"})]}),Tt&&(0,p.jsxs)("div",{className:"mb-6 p-4 bg-magenta/20 border-2 border-magenta rounded-lg",children:[(0,p.jsx)("p",{className:"text-magenta font-bold text-sm mb-2",children:"SELECTED SONG:"}),(0,p.jsx)("h4",{className:"text-white font-bold text-xl",children:Tt.title}),(0,p.jsx)("p",{className:"text-electric",children:Tt.artist})]}),(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsx)("label",{className:"text-white font-bold mb-2 block",children:"Add A Message (Optional)"}),(0,p.jsx)("textarea",{value:Ct,onChange:e=>jt(e.target.value),placeholder:"Add a dedication or message...",maxLength:200,className:"w-full px-4 py-3 rounded-lg bg-black/50 text-white placeholder-gray-400 border border-white/20 focus:border-magenta focus:outline-none resize-none",rows:3}),(0,p.jsxs)("div",{className:"text-right text-gray-light text-sm mt-1",children:[Ct.length,"/200 characters"]})]}),(0,p.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,p.jsx)("button",{onClick:jn,disabled:!Tt,className:"flex-1 py-4 rounded-lg font-bold text-lg transition ".concat(Tt?"btn btn-neon":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:Tt?"Send Request":"Select a song first"}),(0,p.jsx)("button",{onClick:()=>{_t(!1),It(null),jt("")},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-bold transition",children:"Cancel"})]})]})}),Dt&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"gig-card max-w-md w-full border-2 border-electric relative",children:[(0,p.jsx)("div",{className:"flex justify-end mb-3",children:(0,p.jsx)("button",{onClick:Pn,className:"text-white hover:text-neon transition font-bold text-3xl leading-none",style:{fontWeight:"900"},children:"\xd7"})}),(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsxs)("h2",{className:"concert-heading text-base sm:text-xl text-electric text-center whitespace-nowrap flex items-center justify-center gap-2",children:[(0,p.jsx)("span",{className:"text-2xl sm:text-3xl",children:"\u2b50"}),(0,p.jsx)("span",{children:"Rate The Artist"})]}),(0,p.jsx)("p",{className:"text-gray-light text-xs sm:text-sm mt-2 text-center",children:"How's the performance? (Optional)"})]}),De&&(0,p.jsx)("div",{className:"mb-4 p-3 bg-neon/20 border border-neon rounded-lg",children:(0,p.jsxs)("p",{className:"text-neon font-bold text-xs sm:text-sm text-center",children:["\u2705 You rated this artist ",Oe,"\u2605 - Update your rating below"]})}),(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)("p",{className:"text-white text-base sm:text-lg font-bold mb-4",children:(null===Ze||void 0===Ze?void 0:Ze.artistName)||"Artist"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"flex gap-1.5 sm:gap-3 justify-center mb-2 px-1",children:[1,2,3,4,5].map(e=>(0,p.jsx)("button",{onClick:()=>Lt(e),className:"text-2xl sm:text-4xl transition transform ".concat(Ot>=e?"text-yellow-400 scale-110":"text-gray-600 hover:text-yellow-300 hover:scale-105"),children:Ot>=e?"\u2b50":"\u2606"},e))}),Ot>0&&(0,p.jsxs)("p",{className:"text-center text-electric font-bold text-base sm:text-lg",children:[1===Ot&&"Poor",2===Ot&&"Fair",3===Ot&&"Good",4===Ot&&"Great",5===Ot&&"Excellent"]})]}),(0,p.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,p.jsxs)("button",{onClick:An,disabled:0===Ot,className:"flex-1 btn text-base sm:text-lg ".concat(0===Ot?"btn-ghost opacity-50 cursor-not-allowed":"btn-neon"),children:[(0,p.jsx)("span",{children:"\u2713"}),(0,p.jsx)("span",{children:"Submit Rating"})]}),(0,p.jsx)("button",{onClick:Pn,className:"btn btn-ghost text-base sm:text-lg",children:"Close"})]}),(0,p.jsx)("p",{className:"text-center text-gray-light text-xs sm:text-sm",children:"Your rating helps the artist improve!"})]})]})}),Bt&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,p.jsxs)("div",{className:"gig-card max-w-md w-full border-2 border-electric max-h-[85vh] flex flex-col",children:[(0,p.jsx)("button",{onClick:()=>Gt(!1),className:"absolute top-0 right-0 text-white hover:text-neon transition font-bold text-3xl leading-none z-20 p-2",style:{fontWeight:"900"},children:"\xd7"}),(0,p.jsxs)("div",{className:"px-3 pt-4 pb-1",children:[(0,p.jsxs)("h2",{className:"text-[11px] sm:text-sm font-bold text-electric text-center flex items-center justify-center gap-1",children:[(0,p.jsx)("span",{className:"text-sm sm:text-lg",children:"\ud83c\udfb5"}),(0,p.jsx)("span",{className:"whitespace-nowrap",children:"Tonight's Playlist"})]}),(0,p.jsxs)("p",{className:"text-gray-light text-[8px] sm:text-[10px] mt-0.5 text-center truncate",children:[null===Ze||void 0===Ze?void 0:Ze.artistName," \u2022 ",null===Ze||void 0===Ze?void 0:Ze.venueName]})]}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[tt.queuedSongs&&tt.queuedSongs.length>0?(0,p.jsx)("div",{className:"space-y-2",children:tt.queuedSongs.filter(e=>{var t;return!(null!==(t=tt.playedSongs)&&void 0!==t&&t.includes(e.id))}).map(e=>o(o({},e),{},{voteCount:tt.votes[Math.floor(e.id)]||0})).sort((e,t)=>t.voteCount-e.voteCount).map((e,t)=>{const n=e.title.split(" "),r=n.length>5?n.slice(0,5).join(" ")+"...":e.title,i=e.artist.split(" "),s=i.length>2?i.slice(0,2).join(" ")+"...":e.artist;return(0,p.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-2 hover:bg-white/10 transition",children:(0,p.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,p.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center font-bold text-[10px] bg-electric/30 text-electric",children:t+1}),(0,p.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,p.jsx)("p",{className:"font-bold text-[11px] leading-tight text-white",children:r}),(0,p.jsx)("p",{className:"text-gray-400 text-[9px] leading-tight",children:s})]}),(0,p.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-0.5 pl-4",children:[(0,p.jsx)("span",{className:"text-magenta text-[10px]",children:"\u26a1"}),(0,p.jsx)("span",{className:"font-bold text-[10px] text-magenta",children:e.voteCount})]})]})},e.id)})}):(0,p.jsx)("div",{className:"text-center py-12",children:(0,p.jsx)("p",{className:"text-gray-light text-sm",children:"No songs in the playlist yet"})}),tt.playedSongs&&tt.playedSongs.length>0&&(0,p.jsxs)("div",{className:"mt-6 pt-4 border-t border-white/20",children:[(0,p.jsxs)("h3",{className:"text-gray-400 font-bold text-sm mb-3 flex items-center gap-2",children:[(0,p.jsx)("span",{children:"\u2705"}),(0,p.jsxs)("span",{children:["Already Played (",tt.playedSongs.length,")"]})]}),(0,p.jsx)("div",{className:"space-y-2 opacity-60",children:tt.queuedSongs.filter(e=>tt.playedSongs.includes(e.id)).map(e=>{const t=tt.votes[Math.floor(e.id)]||0,n=e.title.split(" "),r=n.length>5?n.slice(0,5).join(" ")+"...":e.title,i=e.artist.split(" "),s=i.length>2?i.slice(0,2).join(" ")+"...":e.artist;return(0,p.jsx)("div",{className:"bg-gray-500/20 border border-gray-600 rounded-lg p-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("span",{className:"text-gray-500 text-[10px]",children:"\u2713"}),(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("p",{className:"text-gray-400 font-semibold text-[10px] line-through leading-tight",children:r}),(0,p.jsx)("p",{className:"text-gray-500 text-[9px] leading-tight",children:s})]}),t>0&&(0,p.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-0.5",children:[(0,p.jsx)("span",{className:"text-gray-600 text-[9px]",children:"\u26a1"}),(0,p.jsx)("span",{className:"text-gray-600 text-[9px]",children:t})]})]})},e.id)})})]})]}),(0,p.jsx)("div",{className:"px-6 py-4 border-t border-white/10",children:(0,p.jsx)("button",{onClick:()=>Gt(!1),className:"w-full btn btn-electric text-sm sm:text-base",children:"Close"})})]})})]})):"artistProfile"===J&&Ut?(0,p.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 p-4",children:(0,p.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,p.jsxs)("button",{onClick:On,className:"btn btn-ghost mb-6",children:[(0,p.jsx)(P,{size:20}),(0,p.jsx)("span",{children:"Back to Discovery"})]}),(0,p.jsxs)("div",{className:"gig-card border-2 border-electric mb-6",children:[(0,p.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[(0,p.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-magenta to-electric flex items-center justify-center flex-shrink-0",children:(0,p.jsx)(E,{size:64,className:"text-white"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h1",{className:"concert-heading text-4xl md:text-5xl text-electric mb-2",children:Ut.artistName}),(0,p.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4",children:[(0,p.jsxs)("span",{className:"px-4 py-2 bg-magenta/20 text-magenta rounded-full text-sm font-bold border border-magenta",children:["\ud83c\udfb5 ",Ut.genre]}),(0,p.jsxs)("span",{className:"px-4 py-2 bg-electric/20 text-electric rounded-full text-sm font-bold border border-electric",children:["\ud83d\udccd ",Ut.location]})]}),(0,p.jsx)("p",{className:"text-gray-light text-lg mb-4",children:Ut.bio}),Ut.socialMedia&&(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)(kg,{socialMedia:Ut.socialMedia,artistName:Ut.artistName})})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-white/10",children:[(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("p",{className:"text-3xl font-bold text-neon",children:zt.length}),(0,p.jsx)("p",{className:"text-gray-light text-sm",children:"Upcoming Gigs"})]}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("p",{className:"text-3xl font-bold text-magenta",children:Ut.totalGigs||0}),(0,p.jsx)("p",{className:"text-gray-light text-sm",children:"Total Gigs"})]}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("p",{className:"text-3xl font-bold text-electric",children:Ut.followers||0}),(0,p.jsx)("p",{className:"text-gray-light text-sm",children:"Followers"})]})]})]}),(0,p.jsxs)("div",{className:"gig-card border-2 border-magenta",children:[(0,p.jsx)("h2",{className:"concert-heading text-3xl text-magenta mb-6",children:"\ud83c\udfb8 Upcoming Performances"}),0===zt.length?(0,p.jsxs)("div",{className:"text-center py-12",children:[(0,p.jsx)(I,{size:64,className:"text-gray mx-auto mb-4 opacity-50"}),(0,p.jsx)("p",{className:"text-gray-light text-lg",children:"No upcoming gigs scheduled"})]}):(0,p.jsx)("div",{className:"space-y-4",children:zt.map(e=>{const t=new Date(e.gigDate),n="live"===e.status;return(0,p.jsx)("div",{className:"bg-white/5 p-6 rounded-xl border-2 transition ".concat(n?"border-neon animate-pulse":"border-white/10 hover:border-electric/50"),children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,p.jsx)("h3",{className:"text-2xl font-bold text-white",children:e.venueName}),n&&(0,p.jsx)("span",{className:"px-3 py-1 bg-neon/20 text-neon rounded-full text-sm font-bold border border-neon animate-pulse",children:"\ud83d\udd34 LIVE NOW"})]}),e.venueAddress&&(0,p.jsxs)("p",{className:"text-gray-light mb-2",children:["\ud83d\udccd ",e.venueAddress]}),(0,p.jsxs)("div",{className:"flex flex-wrap gap-4 text-electric font-semibold",children:[(0,p.jsxs)("span",{children:["\ud83d\udcc5 ",t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]}),(0,p.jsxs)("span",{children:["\ud83d\udd50 ",e.gigTime]})]}),null!=e.distance&&!isNaN(e.distance)&&Number.isFinite(e.distance)&&(0,p.jsxs)("p",{className:"text-electric font-bold mt-2",children:["\ud83d\udccf ",e.distance<1e3?"".concat(Math.round(e.distance),"m away"):"".concat((e.distance/1e3).toFixed(1),"km away")]})]}),(0,p.jsx)("div",{className:"flex flex-col gap-2",children:n?(0,p.jsxs)("button",{onClick:()=>{et(e),nt({votes:e.votes||{},queuedSongs:e.queuedSongs||[],playedSongs:e.playedSongs||[],currentSong:e.currentSong||null,songRequests:e.songRequests||[],maxQueueSize:e.maxQueueSize||20}),X("audience")},className:"btn btn-neon",children:[(0,p.jsx)(C,{size:20}),(0,p.jsx)("span",{children:"Join Live Gig"})]}):(0,p.jsx)("button",{onClick:()=>{ut(e),ht(!0)},className:"btn btn-electric",children:"View Details"})})]})},e.id)})})]}),(0,p.jsxs)("div",{className:"gig-card border-2 border-electric mt-6",children:[(0,p.jsxs)("h2",{className:"concert-heading text-3xl text-electric mb-4",children:["\ud83d\udcd6 About ",Ut.artistName]}),(0,p.jsx)("p",{className:"text-white text-lg leading-relaxed",children:Ut.bio}),Ut.fullName&&(0,p.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,p.jsxs)("p",{className:"text-gray-light text-sm",children:["Artist: ",(0,p.jsx)("span",{className:"text-white font-semibold",children:Ut.fullName})]})})]})]})}):(0,p.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 flex items-center justify-center p-4",children:(0,p.jsxs)("div",{className:"text-center text-white",children:[(0,p.jsx)("h1",{className:"text-6xl font-bold mb-4",children:"GigWave"}),(0,p.jsx)("p",{className:"text-xl mb-8",children:"Live Performance Platform"}),(0,p.jsx)("button",{onClick:()=>X("discover"),className:"px-12 py-6 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-xl font-bold text-2xl",children:"Get Started"})]})})}t.createRoot(document.getElementById("root")).render((0,p.jsx)(e.StrictMode,{children:(0,p.jsx)(Eg,{})}))})()})();
//# sourceMappingURL=main.9a605e5d.js.map